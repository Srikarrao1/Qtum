LavaPack.loadBundle([[8230,{"../../../../../shared/constants/metametrics":7321,"../../../../../shared/constants/swaps":7326,"../../../../components/ui/actionable-message/actionable-message":7678,"../../../../components/ui/button":7686,"../../../../components/ui/identicon":7755,"../../../../components/ui/url-icon":7841,"../../../../contexts/i18n":7844,"../../../../contexts/metametrics":7845,"../../../../helpers/utils/util":7907,"../../../../selectors":8267,classnames:2484,"prop-types":5840,react:6817,"react-redux":6775},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=_;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=e("react-redux"),o=v(e("prop-types")),i=v(e("classnames")),s=v(e("../../../../components/ui/identicon")),l=v(e("../../../../components/ui/url-icon")),u=v(e("../../../../components/ui/button")),c=v(e("../../../../components/ui/actionable-message/actionable-message")),d=e("../../../../contexts/i18n"),f=e("../../../../selectors"),p=e("../../../../../shared/constants/metametrics"),m=e("../../../../../shared/constants/swaps"),g=e("../../../../helpers/utils/util"),h=e("../../../../contexts/metametrics");function v(e){return e&&e.__esModule?e:{default:e}}function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}function _({results:e=[],onClickItem:t,onOpenImportTokenModalClick:n,Placeholder:o,listTitle:v,maxListItems:b=6,searchQuery:_="",containerRef:y,hideRightLabels:E,hideItemIf:T,listContainerClassName:w}){var S,k;const I=(0,a.useContext)(d.I18nContext),O=(0,r.useSelector)(f.getCurrentChainId),C=null!==(S=null!==(k=(0,r.useSelector)(f.getRpcPrefsForCurrentProvider).blockExplorerUrl)&&void 0!==k?k:m.SWAPS_CHAINID_DEFAULT_BLOCK_EXPLORER_URL_MAP[O])&&void 0!==S?S:null,x=(0,g.getURLHostName)(C),P=(0,a.useContext)(h.MetaMetricsContext),N=1===e.length&&e[0].notImported,R=o?a.default.createElement(o,{searchQuery:_}):null;return 0===e.length?R:a.default.createElement("div",{className:"searchable-item-list"},v?a.default.createElement("div",{className:"searchable-item-list__title"},v):null,a.default.createElement("div",{className:(0,i.default)("searchable-item-list__list-container",w),ref:y},e.slice(0,b).map(((e,r)=>{if(null!=T&&T(e))return null;const o=()=>{e.notImported?n(e):null==t||t(e)},{iconUrl:c,identiconAddress:d,selected:f,disabled:p,primaryLabel:m,secondaryLabel:g,rightPrimaryLabel:h,rightSecondaryLabel:v,IconComponent:b}=e;return a.default.createElement("div",{tabIndex:"0",className:(0,i.default)("searchable-item-list__item",{"searchable-item-list__item--selected":f,"searchable-item-list__item--disabled":p}),onClick:o,onKeyUp:e=>"Enter"===e.key&&o(),key:`searchable-item-list-item-${r}`},c||m?a.default.createElement(l.default,{url:c,name:m}):null,c||m||!d?null:a.default.createElement("div",{className:"searchable-item-list__identicon"},a.default.createElement(s.default,{address:d,diameter:24})),b?a.default.createElement(b,null):null,a.default.createElement("div",{className:"searchable-item-list__labels"},a.default.createElement("div",{className:"searchable-item-list__item-labels"},m?a.default.createElement("span",{className:"searchable-item-list__primary-label"},m):null,g?a.default.createElement("span",{className:"searchable-item-list__secondary-label"},g):null),E||!h&&!v?null:a.default.createElement("div",{className:"searchable-item-list__right-labels"},h?a.default.createElement("span",{className:"searchable-item-list__right-primary-label"},h):null,v?a.default.createElement("span",{className:"searchable-item-list__right-secondary-label"},v):null)),e.notImported&&a.default.createElement(u.default,{type:"primary",onClick:o},I("import")))})),!N&&C&&a.default.createElement("div",{tabIndex:"0",className:"searchable-item-list__item searchable-item-list__item--add-token",key:"searchable-item-list-item-last"},a.default.createElement(c.default,{message:I("addCustomTokenByContractAddress",[a.default.createElement("a",{key:"searchable-item-list__etherscan-link",onClick:()=>{P({event:"Clicked Block Explorer Link",category:p.EVENT.CATEGORIES.SWAPS,properties:{link_type:"Token Tracker",action:"Verify Contract Address",block_explorer_domain:x}}),global.platform.openTab({url:C})},target:"_blank",rel:"noopener noreferrer"},x)])}))))}_.propTypes={results:o.default.arrayOf(o.default.shape({iconUrl:o.default.string,selected:o.default.bool,disabled:o.default.bool,primaryLabel:o.default.string,secondaryLabel:o.default.string,rightPrimaryLabel:o.default.string,rightSecondaryLabel:o.default.string})),onClickItem:o.default.func,onOpenImportTokenModalClick:o.default.func,Placeholder:o.default.func,listTitle:o.default.string,maxListItems:o.default.number,searchQuery:o.default.string,containerRef:o.default.shape({current:o.default.instanceOf(window.Element)}),hideRightLabels:o.default.bool,hideItemIf:o.default.func,listContainerClassName:o.default.string}}}},{package:"$root$"}],[8231,{"./list-item-search.component":8232},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./list-item-search.component"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[8232,{"../../../../../shared/modules/hexstring-utils":7336,"../../../../components/ui/icon/search-icon":7745,"../../../../components/ui/text-field":7822,"../../../../hooks/usePrevious":7930,"../../../../selectors/selectors":8270,"../../swaps.util":8253,"@material-ui/core/InputAdornment":1110,"fuse.js":4703,loglevel:5597,"prop-types":5840,react:6817,"react-redux":6775},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=v;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=e("react-redux"),o=g(e("prop-types")),i=g(e("fuse.js")),s=g(e("loglevel")),l=g(e("@material-ui/core/InputAdornment")),u=g(e("../../../../components/ui/text-field")),c=e("../../../../hooks/usePrevious"),d=e("../../../../../shared/modules/hexstring-utils"),f=e("../../swaps.util"),p=e("../../../../selectors/selectors"),m=g(e("../../../../components/ui/icon/search-icon"));function g(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function v({onSearch:e,error:t,listToSearch:n=[],fuseSearchKeys:o,searchPlaceholderText:g,defaultToAll:h,shouldSearchForImports:v}){const b=(0,a.useRef)(),[_,y]=(0,a.useState)(""),E=(0,r.useSelector)(p.getCurrentChainId),T=async t=>{const a=t.trim(),r=(0,d.isValidHexAddress)(a),o=b.current.search(t),i=h&&""===t?n:o;v&&0===i.length&&r?await(async t=>{y(t);try{const n=await(0,f.fetchToken)(t,E);if(n)return n.primaryLabel=n.symbol,n.secondaryLabel=n.name,n.notImported=!0,void e({searchQuery:t,results:[n]})}catch(e){s.default.error("Token not found, show 0 results.",e)}e({searchQuery:t,results:[]})})(a):(y(t),e({searchQuery:t,results:i}))};(0,a.useEffect)((()=>{b.current||(b.current=new i.default(n,{shouldSort:!0,threshold:.45,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1,keys:o}))}),[o,n]);const w=(0,c.usePrevious)(null!=n?n:[]);return(0,a.useEffect)((()=>{if(b.current&&_&&w!==n){b.current.setCollection(n);const t=b.current.search(_);e({searchQuery:_,results:t})}}),[n,_,e,w]),a.default.createElement(u.default,{"data-testid":"search-list-items",className:"searchable-item-list__search",placeholder:g,type:"text",value:_,onChange:e=>T(e.target.value),error:t,fullWidth:!0,startAdornment:a.default.createElement(l.default,{position:"start",style:{marginRight:"12px"}},a.default.createElement(m.default,{size:20,color:"var(--color-icon-muted)"})),autoComplete:"off",autoFocus:!0})}v.propTypes={onSearch:o.default.func,error:o.default.string,listToSearch:o.default.array.isRequired,fuseSearchKeys:o.default.arrayOf(o.default.object).isRequired,searchPlaceholderText:o.default.string,defaultToAll:o.default.bool,shouldSearchForImports:o.default.bool}}}},{package:"$root$"}],[8233,{"./item-list":8229,"./list-item-search":8231,"prop-types":5840,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=u;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=s(e("prop-types")),o=s(e("./item-list")),i=s(e("./list-item-search"));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function u({className:e,defaultToAll:t,fuseSearchKeys:n,itemSelectorError:r,itemsToSearch:s=[],listTitle:l,maxListItems:u,onClickItem:c,onOpenImportTokenModalClick:d,Placeholder:f,searchPlaceholderText:p,hideRightLabels:m,hideItemIf:g,listContainerClassName:h,shouldSearchForImports:v}){const b=(0,a.useRef)(),_=(0,a.useMemo)((()=>t?s:[]),[t,s]),[y,E]=(0,a.useState)(_);(0,a.useEffect)((()=>{E(_)}),[_.length]);const[T,w]=(0,a.useState)("");return a.default.createElement("div",{className:e},a.default.createElement(i.default,{listToSearch:s,fuseSearchKeys:n,onSearch:({searchQuery:e="",results:t=[]})=>{w(e),E(t)},error:r,searchPlaceholderText:p,defaultToAll:t,shouldSearchForImports:v}),a.default.createElement(o.default,{searchQuery:T,results:y,onClickItem:c,onOpenImportTokenModalClick:d,Placeholder:f,listTitle:l,maxListItems:u,containerRef:b,hideRightLabels:m,hideItemIf:g,listContainerClassName:h}))}u.propTypes={itemSelectorError:r.default.string,itemsToSearch:r.default.array,onClickItem:r.default.func,onOpenImportTokenModalClick:r.default.func,Placeholder:r.default.func,className:r.default.string,searchPlaceholderText:r.default.string,fuseSearchKeys:r.default.arrayOf(r.default.shape({name:r.default.string,weight:r.default.number})),listTitle:r.default.string,defaultToAll:r.default.bool,maxListItems:r.default.number,hideRightLabels:r.default.bool,hideItemIf:r.default.func,listContainerClassName:r.default.string,shouldSearchForImports:r.default.bool}}}},{package:"$root$"}],[8234,{"./select-quote-popover":8238},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./select-quote-popover"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[8235,{"./quote-details":8236},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./quote-details"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[8236,{"../../../../components/ui/info-tooltip":7756,"../../../../contexts/i18n":7844,"../../exchange-rate-display":8217,"prop-types":5840,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=l(e("prop-types")),o=e("../../../../contexts/i18n"),i=l(e("../../../../components/ui/info-tooltip")),s=l(e("../../exchange-rate-display"));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}const c=({slippage:e,sourceTokenValue:t,sourceTokenSymbol:n,destinationTokenValue:r,destinationTokenSymbol:l,liquiditySourceKey:u,minimumAmountReceived:c,feeInEth:d,networkFees:f,metaMaskFee:p,hideEstimatedGasFee:m})=>{const g=(0,a.useContext)(o.I18nContext);return a.default.createElement("div",{className:"quote-details"},a.default.createElement("div",{className:"quote-details__row"},a.default.createElement("div",{className:"quote-details__detail-header"},g("swapRate")),a.default.createElement("div",{className:"quote-details__detail-content"},a.default.createElement(s.default,{primaryTokenValue:t,primaryTokenDecimals:1,primaryTokenSymbol:n,secondaryTokenValue:r,secondaryTokenDecimals:1,secondaryTokenSymbol:l}))),a.default.createElement("div",{className:"quote-details__row"},a.default.createElement("div",{className:"quote-details__detail-header"},g("swapMaxSlippage"),a.default.createElement(i.default,{position:"bottom",contentText:g("swapQuoteDetailsSlippageInfo")})),a.default.createElement("div",{className:"quote-details__detail-content"},`${e}%`)),a.default.createElement("div",{className:"quote-details__row"},a.default.createElement("div",{className:"quote-details__detail-header"},g("swapAmountReceived"),a.default.createElement(i.default,{position:"bottom",contentText:g("swapAmountReceivedInfo")})),a.default.createElement("div",{className:"quote-details__detail-content"},a.default.createElement("span",null,c),a.default.createElement("span",{className:"quote-details__bold"},` ${l}`))),!m&&a.default.createElement("div",{className:"quote-details__row"},a.default.createElement("div",{className:"quote-details__detail-header"},g("swapEstimatedNetworkFees"),a.default.createElement(i.default,{position:"bottom",contentText:g("swapEstimatedNetworkFeesInfo")})),a.default.createElement("div",{className:"quote-details__detail-content"},a.default.createElement("span",null,d),a.default.createElement("span",{className:"quote-details__light-grey"},` (${f})`))),a.default.createElement("div",{className:"quote-details__row"},a.default.createElement("div",{className:"quote-details__detail-header"},g("swapSource"),a.default.createElement(i.default,{position:"bottom",contentText:g("swapSourceInfo")})),a.default.createElement("div",{className:"quote-details__detail-content"},g(u))),a.default.createElement("div",{className:"quote-details__row quote-details__row--high"},a.default.createElement("div",{className:"quote-details__detail-header"},a.default.createElement("img",{src:"./images/logo/qtum-logo.svg",className:"quote-details__metafox-logo",alt:""}),g("swapMetaMaskFee")),a.default.createElement("div",{className:"quote-details__detail-content"},g("swapMetaMaskFeeDescription",[p]))))};c.propTypes={slippage:r.default.number.isRequired,sourceTokenValue:r.default.string.isRequired,sourceTokenSymbol:r.default.string.isRequired,destinationTokenValue:r.default.string.isRequired,destinationTokenSymbol:r.default.string.isRequired,liquiditySourceKey:r.default.string.isRequired,minimumAmountReceived:r.default.string.isRequired,feeInEth:r.default.string.isRequired,networkFees:r.default.string.isRequired,metaMaskFee:r.default.number.isRequired,hideEstimatedGasFee:r.default.bool};var d=c;n.default=d}}},{package:"$root$"}],[8237,{"prop-types":5840},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.QUOTE_DATA_ROWS_PROPTYPES_SHAPE=void 0;var a,r=(a=e("prop-types"))&&a.__esModule?a:{default:a};const o=r.default.shape({aggId:r.default.string.isRequired,amountReceiving:r.default.string.isRequired,destinationTokenDecimals:r.default.number.isRequired,destinationTokenSymbol:r.default.string.isRequired,destinationTokenValue:r.default.string.isRequired,isBestQuote:r.default.bool,networkFees:r.default.string.isRequired,quoteSource:r.default.string.isRequired,rawNetworkFees:r.default.string.isRequired,slippage:r.default.number.isRequired,sourceTokenDecimals:r.default.number.isRequired,sourceTokenSymbol:r.default.string.isRequired,sourceTokenValue:r.default.string.isRequired});n.QUOTE_DATA_ROWS_PROPTYPES_SHAPE=o}}},{package:"$root$"}],[8238,{"../../../components/ui/button":7686,"../../../components/ui/popover":7798,"../../../contexts/i18n":7844,"./quote-details":8235,"./select-quote-popover-constants":8237,"./sort-list":8239,"prop-types":5840,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=d(e("prop-types")),o=e("../../../contexts/i18n"),i=d(e("../../../components/ui/popover")),s=d(e("../../../components/ui/button")),l=d(e("./quote-details")),u=d(e("./sort-list")),c=e("./select-quote-popover-constants");function d(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},p.apply(this,arguments)}const m=({quoteDataRows:e=[],onClose:t=null,onSubmit:n=null,swapToSymbol:r,initialAggId:c,onQuoteDetailsIsOpened:d,hideEstimatedGasFee:f})=>{const m=(0,a.useContext)(o.I18nContext),[g,h]=(0,a.useState)(1),[v,b]=(0,a.useState)(null),[_,y]=(0,a.useState)(c),[E,T]=(0,a.useState)("sortList"),[w,S]=(0,a.useState)(null),k=(0,a.useCallback)((()=>{n(_),t()}),[_,t,n]),I=(0,a.useCallback)((()=>{S(null),T("sortList")}),[]),O=(0,a.useCallback)((e=>y(e)),[y]),C=(0,a.useCallback)((t=>{const n=e.find((e=>e.aggId===t));T("quoteDetails"),d(),S(n)}),[e,d]),x=(0,a.useCallback)((()=>a.default.createElement("div",{className:"select-quote-popover__popover-bg",onClick:t})),[t]),P=a.default.createElement(a.default.Fragment,null,a.default.createElement(s.default,{type:"secondary",className:"page-container__footer-button select-quote-popover__button",onClick:t},m("close")),a.default.createElement(s.default,{type:"primary",className:"page-container__footer-button select-quote-popover__button",onClick:k},m("swapSelect")));return a.default.createElement("div",{className:"select-quote-popover"},a.default.createElement(i.default,{title:m("quoteDetails"===E?"swapSelectAQuote":"swapQuoteDetails"),subtitle:"sortList"===E?m("swapSelectQuotePopoverDescription"):null,onClose:t,CustomBackground:x,className:"select-quote-popover__popover-wrap",footerClassName:"swaps__footer",footer:"quoteDetails"===E?null:P,onBack:"quoteDetails"===E?I:null},"sortList"===E&&a.default.createElement(u.default,{quoteDataRows:e,selectedAggId:_,onSelect:O,onCaretClick:C,swapToSymbol:r,sortDirection:g,setSortDirection:h,sortColumn:v,setSortColumn:b,hideEstimatedGasFee:f}),"quoteDetails"===E&&w&&a.default.createElement(l.default,p({},w,{hideEstimatedGasFee:f}))))};m.propTypes={onClose:r.default.func,onSubmit:r.default.func,swapToSymbol:r.default.string,quoteDataRows:r.default.arrayOf(c.QUOTE_DATA_ROWS_PROPTYPES_SHAPE),initialAggId:r.default.string,onQuoteDetailsIsOpened:r.default.func,hideEstimatedGasFee:r.default.bool.isRequired};var g=m;n.default=g}}},{package:"$root$"}],[8239,{"./sort-list":8240},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./sort-list"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[8240,{"../../../../components/ui/icon/sun-check-icon.component":7748,"../../../../components/ui/info-tooltip":7756,"../../../../contexts/i18n":7844,"../select-quote-popover-constants":8237,"bignumber.js":2283,classnames:2484,"prop-types":5840,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=m;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=d(e("prop-types")),o=d(e("classnames")),i=d(e("bignumber.js")),s=d(e("../../../../components/ui/icon/sun-check-icon.component")),l=e("../../../../contexts/i18n"),u=e("../select-quote-popover-constants"),c=d(e("../../../../components/ui/info-tooltip"));function d(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}const p=()=>a.default.createElement("svg",{width:"6",height:"9",viewBox:"0 0 6 9",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.default.createElement("path",{d:"M0.7948 4.96973C0.365112 4.96973 0.150269 5.47754 0.462769 5.77051L2.78699 8.09473C2.96277 8.29004 3.25574 8.29004 3.45105 8.09473L5.77527 5.77051C6.06824 5.47754 5.85339 4.96973 5.44324 4.96973H0.7948ZM5.77527 2.91895L3.45105 0.594727C3.25574 0.418945 2.96277 0.418945 2.78699 0.594727L0.462769 2.91895C0.150269 3.23145 0.365112 3.71973 0.7948 3.71973H5.44324C5.85339 3.71973 6.06824 3.23145 5.77527 2.91895Z",fill:"var(--color-primary-default)"}));function m({quoteDataRows:e,selectedAggId:t,onSelect:n,onCaretClick:r,swapToSymbol:u,sortDirection:d,setSortDirection:f,sortColumn:m=null,setSortColumn:g,hideEstimatedGasFee:h}){const v=(0,a.useContext)(l.I18nContext),[b,_]=(0,a.useState)(!1),y=e=>{e===m?f(-1*d):g(e)},E=(0,a.useMemo)((()=>[...e].sort(((e,t)=>{if(null===m&&e.isBestQuote)return-1;if(null===m&&t.isBestQuote)return 1;if(null===m){const n=new i.default(e.destinationTokenValue).toString(16),a=new i.default(t.destinationTokenValue).toString(16);return n[n.length-1]<a[a.length-1]?-1:1}return"quoteSource"===m?e[m]>t[m]?-1*d:d:new i.default(e[m]).gt(t[m])?-1*d:d}))),[e,m,d]),T=E.findIndex((({aggId:e})=>t===e));return a.default.createElement("div",{className:"select-quote-popover__sort-list"},a.default.createElement("div",{className:"select-quote-popover__column-headers"},a.default.createElement("div",{className:"select-quote-popover__column-header select-quote-popover__receiving",onClick:()=>y("destinationTokenValue")},a.default.createElement("span",{className:"select-quote-popover__receiving-symbol"},u),a.default.createElement("div",{className:"select-quote-popover__receiving-label"},a.default.createElement("span",null,v("swapReceiving")),a.default.createElement(c.default,{position:"bottom",contentText:v("swapReceivingInfoTooltip")}),a.default.createElement(p,null))),a.default.createElement("div",{className:"select-quote-popover__column-header select-quote-popover__network-fees select-quote-popover__network-fees-header",onClick:()=>y("rawNetworkFees")},!h&&a.default.createElement(a.default.Fragment,null,a.default.createElement("span",null,v("swapEstimatedNetworkFees")),a.default.createElement(c.default,{position:"bottom",contentText:v("swapEstimatedNetworkFeesInfo")}),a.default.createElement(p,null))),a.default.createElement("div",{className:"select-quote-popover__column-header select-quote-popover__quote-source",onClick:()=>y("quoteSource")},v("swapQuoteSource"),a.default.createElement("div",{className:"select-quote-popover__quote-source-toggle"},a.default.createElement(p,null)))),E.map((({destinationTokenValue:e,networkFees:t,isBestQuote:i,quoteSource:l,aggId:u},c)=>a.default.createElement("div",{className:(0,o.default)("select-quote-popover__row",{"select-quote-popover__row--selected":T===c,"select-quote-popover__row--no-hover":b}),onClick:()=>n(u),key:`select-quote-popover-row-${c}`},a.default.createElement("div",{className:"select-quote-popover__receiving"},a.default.createElement("div",{className:"select-quote-popover__receiving-value"},i&&a.default.createElement(s.default,{reverseColors:T!==c}),a.default.createElement("div",{className:"select-quote-popover__receiving-value-text",title:e},e)),"RFQ"===l&&a.default.createElement("span",{className:"select-quote-popover__zero-slippage"},v("swapZeroSlippage"))),a.default.createElement("div",{className:"select-quote-popover__network-fees"},!h&&t),a.default.createElement("div",{className:"select-quote-popover__quote-source"},a.default.createElement("div",{className:(0,o.default)("select-quote-popover__quote-source-label",{"select-quote-popover__quote-source-label--green":"AGG"===l,"select-quote-popover__quote-source-label--orange":"RFQ"===l,"select-quote-popover__quote-source-label--blue":"DEX"===l})},l)),a.default.createElement("div",{className:"select-quote-popover__caret-right",onClick:e=>{e.stopPropagation(),r(u)},onMouseEnter:()=>_(!0),onMouseLeave:()=>_(!1)},a.default.createElement("i",{className:"fa fa-angle-up"}))))))}m.propTypes={selectedAggId:r.default.string.isRequired,onSelect:r.default.func.isRequired,onCaretClick:r.default.func.isRequired,swapToSymbol:r.default.string.isRequired,quoteDataRows:r.default.arrayOf(u.QUOTE_DATA_ROWS_PROPTYPES_SHAPE).isRequired,sortDirection:r.default.number.isRequired,setSortDirection:r.default.func.isRequired,sortColumn:r.default.string,setSortColumn:r.default.func.isRequired,hideEstimatedGasFee:r.default.bool.isRequired}}}},{package:"$root$"}],[8241,{"./slippage-buttons":8242},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./slippage-buttons"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[8242,{"../../../../shared/constants/swaps":7326,"../../../components/ui/box":7682,"../../../components/ui/button":7686,"../../../components/ui/button-group":7684,"../../../components/ui/info-tooltip":7756,"../../../components/ui/toggle-button":7825,"../../../components/ui/typography":7836,"../../../contexts/i18n":7844,"../../../helpers/constants/design-system":7868,"../swaps.util":8253,classnames:2484,"prop-types":5840,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=b;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=h(e("prop-types")),o=h(e("classnames")),i=e("../../../contexts/i18n"),s=h(e("../../../components/ui/button-group")),l=h(e("../../../components/ui/button")),u=h(e("../../../components/ui/info-tooltip")),c=h(e("../../../components/ui/toggle-button")),d=h(e("../../../components/ui/box")),f=h(e("../../../components/ui/typography")),p=e("../../../helpers/constants/design-system"),m=e("../swaps.util"),g=e("../../../../shared/constants/swaps");function h(e){return e&&e.__esModule?e:{default:e}}function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function b({onSelect:e,maxAllowedSlippage:t,currentSlippage:n,smartTransactionsEnabled:r,smartTransactionsOptInStatus:h,setSmartTransactionsOptInStatus:v,currentSmartTransactionsError:b,isDirectWrappingEnabled:_}){const y=(0,a.useContext)(i.I18nContext),[E,T]=(0,a.useState)((()=>"number"!=typeof n||Object.values(g.SLIPPAGE).includes(n)?"":n.toString())),[w,S]=(0,a.useState)(!1),[k,I]=(0,a.useState)((()=>n===g.SLIPPAGE.HIGH?1:n===g.SLIPPAGE.DEFAULT?0:"number"==typeof n?2:0)),[O,C]=(0,a.useState)((()=>n!==g.SLIPPAGE.DEFAULT)),[x,P]=(0,a.useState)(null);let N="";E&&(Number(E)<0?N=y("swapSlippageNegative"):Number(E)>0&&Number(E)<=1?N=y("swapLowSlippageError"):Number(E)>=5&&Number(E)<=t?N=y("swapHighSlippageWarning"):Number(E)>t&&(N=y("swapsExcessiveSlippageWarning")));const R=E||y("swapCustom");return(0,a.useEffect)((()=>{x&&w&&window.document.activeElement!==x&&x.focus()}),[x,w]),a.default.createElement("div",{className:"slippage-buttons"},a.default.createElement("button",{onClick:()=>C(!O),className:(0,o.default)("slippage-buttons__header",{"slippage-buttons__header--open":O})},a.default.createElement("div",{className:"slippage-buttons__header-text"},y("swapsAdvancedOptions")),O?a.default.createElement("i",{className:"fa fa-angle-up"}):a.default.createElement("i",{className:"fa fa-angle-down"})),a.default.createElement("div",{className:"slippage-buttons__content"},O&&a.default.createElement(a.default.Fragment,null,!_&&a.default.createElement("div",{className:"slippage-buttons__dropdown-content"},a.default.createElement("div",{className:"slippage-buttons__buttons-prefix"},a.default.createElement("div",{className:"slippage-buttons__prefix-text"},y("swapsMaxSlippage")),a.default.createElement(u.default,{position:"top",contentText:y("swapAdvancedSlippageInfo")})),a.default.createElement(s.default,{defaultActiveButtonIndex:2!==k||E?k:1,variant:"radiogroup",newActiveButtonIndex:k,className:(0,o.default)("button-group","slippage-buttons__button-group")},a.default.createElement(l.default,{onClick:()=>{T(""),S(!1),I(0),e(g.SLIPPAGE.DEFAULT)}},y("swapSlippagePercent",[g.SLIPPAGE.DEFAULT])),a.default.createElement(l.default,{onClick:()=>{T(""),S(!1),I(1),e(g.SLIPPAGE.HIGH)}},y("swapSlippagePercent",[g.SLIPPAGE.HIGH])),a.default.createElement(l.default,{className:(0,o.default)("slippage-buttons__button-group-custom-button",{"radio-button--danger":N}),onClick:()=>{I(2),S(!0)}},w?a.default.createElement("div",{className:(0,o.default)("slippage-buttons__custom-input",{"slippage-buttons__custom-input--danger":N})},a.default.createElement("input",{onChange:t=>{const{value:n}=t.target;!isNaN(Number(n))&&(T(n),e(Number(n)))},type:"text",maxLength:"4",ref:P,onBlur:()=>{S(!1)},value:E||""})):R,(E||w)&&a.default.createElement("div",{className:"slippage-buttons__percentage-suffix"},"%")))),r&&a.default.createElement(d.default,{marginTop:2,display:p.DISPLAY.FLEX},a.default.createElement(d.default,{display:p.DISPLAY.FLEX,alignItems:p.ALIGN_ITEMS.CENTER,paddingRight:3},a.default.createElement(f.default,{variant:p.TYPOGRAPHY.H6,boxProps:{paddingRight:2},fontWeight:p.FONT_WEIGHT.BOLD},y("smartTransaction")),b?a.default.createElement(u.default,{position:"top",contentText:(0,m.getTranslatedStxErrorMessage)(b,y)}):a.default.createElement(u.default,{position:"top",contentText:y("stxTooltip")})),a.default.createElement(c.default,{value:h,onToggle:e=>{v(!e,e)},offLabel:y("off"),onLabel:y("on"),disabled:Boolean(b)}))),N&&a.default.createElement("div",{className:"slippage-buttons__error-text"},N)))}b.propTypes={onSelect:r.default.func.isRequired,maxAllowedSlippage:r.default.number.isRequired,currentSlippage:r.default.number,smartTransactionsEnabled:r.default.bool.isRequired,smartTransactionsOptInStatus:r.default.bool,setSmartTransactionsOptInStatus:r.default.func,currentSmartTransactionsError:r.default.string,isDirectWrappingEnabled:r.default.bool}}}},{package:"$root$"}],[8243,{react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return r.default.createElement("svg",{width:"15",height:"13",viewBox:"0 0 15 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("path",{d:"M14.4946 6.14779C14.4863 5.93594 14.3991 5.69108 14.2539 5.53666L9.51334 0.49958C9.1921 0.21091 8.57613 0.0917437 8.21709 0.425509C7.86344 0.754237 7.87396 1.39178 8.22627 1.72181L11.5595 5.25889L1.1618 5.25889C0.670919 5.25889 0.272949 5.65687 0.272949 6.14779C0.272949 6.6387 0.670919 7.03668 1.1618 7.03668L11.5595 7.03668L8.22627 10.5738C7.92297 10.8776 7.86691 11.5376 8.21709 11.8701C8.56718 12.2025 9.20529 12.0963 9.51334 11.796L14.2539 6.75891C14.4161 6.58653 14.4952 6.38428 14.4946 6.14779Z",fill:"#D6D9DC"}))};var a,r=(a=e("react"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[8244,{react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return r.default.createElement("svg",{width:"41",height:"39",viewBox:"0 0 41 39",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("path",{d:"M34.5805 6.55143C36.1394 8.11033 37.3994 9.91222 38.3237 11.8681C38.7066 12.6782 39.0318 13.5148 39.2968 14.3714L39.3242 14.4606C39.4816 14.9785 39.6171 15.5037 39.73 16.0347C40.6511 20.3654 40.0335 24.9029 37.9511 28.8509C35.6001 33.308 31.5749 36.6487 26.7609 38.138C24.3773 38.8754 21.8717 39.1361 19.3873 38.9052C16.9029 38.6743 14.4883 37.9563 12.2813 36.7922C10.2608 35.7264 8.52045 34.3588 7.08333 32.7636C5.61245 31.1448 4.43054 29.2824 3.59178 27.2574C3.32329 26.6092 2.89685 25.2767 2.89685 25.2767H6.89583C7.68667 27.4068 8.96033 29.362 10.6288 30.9609L10.6318 30.96C11.5096 31.8005 12.501 32.5516 13.595 33.1786C15.8742 34.483 18.4736 35.1864 21.1455 35.1864C25.1768 35.1864 29.0429 33.585 31.8935 30.7345C34.744 27.8839 36.3455 24.0177 36.3455 19.9865C36.3455 18.7267 36.1891 17.483 35.8871 16.2814C35.8206 16.017 35.7471 15.7546 35.6666 15.4945C34.4752 11.6432 31.8027 8.42306 28.237 6.54231C24.6713 4.66156 20.5045 4.27429 16.6533 5.46571C12.8837 6.63189 9.71868 9.21706 7.82253 12.6699L12.8961 15.307L3.28331 18.3447L0.245605 8.73191L4.45005 10.9171C6.81537 6.56278 10.7905 3.30177 15.5303 1.83546C17.3658 1.26761 19.2587 0.986653 21.1455 0.986694C26.1846 0.986694 31.0173 2.98824 34.5805 6.55143Z",fill:"var(--color-primary-default)"}),r.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.1252 22.1036L14.7107 18.689L12.0926 21.3257L18.1252 27.3584L30.2322 15.2515L27.614 12.6148L18.1252 22.1036Z",fill:"var(--color-primary-default)"}))};var a,r=(a=e("react"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[8245,{"./smart-transaction-status":8247},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./smart-transaction-status"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[8246,{react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return r.default.createElement("svg",{width:"41",height:"39",viewBox:"0 0 41 39",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("path",{d:"M34.6806 6.55143C36.2395 8.11033 37.4995 9.91222 38.4238 11.8681C38.8067 12.6782 39.1319 13.5148 39.3969 14.3714L39.4243 14.4606C39.5817 14.9785 39.7172 15.5037 39.8301 16.0347C40.7512 20.3654 40.1336 24.9029 38.0512 28.8509C35.7002 33.308 31.675 36.6487 26.861 38.138C24.4773 38.8754 21.9718 39.1361 19.4874 38.9052C17.003 38.6743 14.5884 37.9563 12.3814 36.7922C10.3609 35.7264 8.62055 34.3588 7.18343 32.7636C5.71254 31.1448 4.53064 29.2824 3.69188 27.2574C3.42339 26.6092 2.99695 25.2767 2.99695 25.2767H6.99592C7.78677 27.4068 9.06042 29.362 10.7289 30.9609L10.7319 30.96C11.6097 31.8005 12.6011 32.5516 13.6951 33.1786C15.9743 34.483 18.5737 35.1864 21.2456 35.1864C25.2769 35.1864 29.143 33.585 31.9936 30.7345C34.8441 27.8839 36.4456 24.0177 36.4456 19.9865C36.4456 18.7267 36.2892 17.483 35.9872 16.2814C35.9207 16.017 35.8471 15.7546 35.7667 15.4945C34.5753 11.6432 31.9028 8.42306 28.3371 6.54231C24.7714 4.66156 20.6046 4.27429 16.7534 5.46571C12.9838 6.63189 9.81878 9.21706 7.92263 12.6699L12.9962 15.307L3.3834 18.3447L0.345703 8.73191L4.55015 10.9171C6.91547 6.56278 10.8906 3.30177 15.6304 1.83546C17.4659 1.26761 19.3588 0.986653 21.2456 0.986694C26.2847 0.986694 31.1174 2.98824 34.6806 6.55143Z",fill:"#D73A49"}),r.default.createElement("path",{d:"M18.5849 19.9869L15.1454 23.4264L17.9845 26.2655L21.424 22.826L24.8635 26.2655L27.7026 23.4264L24.2631 19.9869L27.7026 16.5473L24.8635 13.7082L21.424 17.1478L17.9845 13.7082L15.1454 16.5473L18.5849 19.9869Z",fill:"#D73A49"}))};var a,r=(a=e("react"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[8247,{"../../../../shared/constants/metametrics":7321,"../../../../shared/constants/swaps":7326,"../../../../shared/constants/transaction":7329,"../../../components/ui/box":7682,"../../../components/ui/typography":7836,"../../../components/ui/url-icon":7841,"../../../contexts/i18n":7844,"../../../contexts/metametrics":7845,"../../../ducks/metamask/metamask":7859,"../../../ducks/swaps/swaps":7863,"../../../helpers/constants/design-system":7868,"../../../helpers/constants/routes":7872,"../../../helpers/utils/token-util":7904,"../../../selectors":8267,"../../../store/actions":8273,"../create-new-swap":8211,"../swaps-footer":8251,"../swaps.util":8253,"../view-on-block-explorer":8254,"./arrow-icon":8243,"./canceled-icon":8244,"./reverted-icon":8246,"./success-icon":8248,"./timer-icon":8249,"./unknown-icon":8250,"@metamask/etherscan-link":1562,lodash:5584,react:6817,"react-redux":6775,"react-router-dom":6795},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var e,t,n,M,A,D;const[L,q]=(0,a.useState)(!1),j=(0,a.useContext)(l.I18nContext),F=(0,o.useHistory)(),U=(0,r.useDispatch)(),W=(0,r.useSelector)(u.getFetchParams,s.isEqual)||{},{destinationTokenInfo:G={},sourceTokenInfo:B={}}=(null==W?void 0:W.metaData)||{},H=(0,r.useSelector)(c.isHardwareWallet),$=(0,r.useSelector)(c.getHardwareWalletType),V=(0,r.useSelector)(u.getSelectedQuote,s.isEqual),Q=(0,r.useSelector)(u.getTopQuote,s.isEqual),Y=V||Q,K=(0,r.useSelector)(u.getCurrentSmartTransactions,s.isEqual),X=(0,r.useSelector)(u.getSmartTransactionsOptInStatus),z=(0,r.useSelector)(c.getCurrentChainId),Z=(0,r.useSelector)(c.getRpcPrefsForCurrentProvider,r.shallowEqual),J=(0,r.useSelector)(u.getSwapsNetworkConfig,r.shallowEqual),ee=(0,r.useSelector)(u.getSmartTransactionsEnabled),te=(0,r.useSelector)(u.getCurrentSmartTransactionsEnabled),ne=null!==(e=null!==(t=Z.blockExplorerUrl)&&void 0!==t?t:d.SWAPS_CHAINID_DEFAULT_BLOCK_EXPLORER_URL_MAP[z])&&void 0!==e?e:null,ae=(0,r.useSelector)(f.getNativeCurrency),re=(0,r.useSelector)(c.conversionRateSelector),oe=(0,r.useSelector)(c.getUSDConversionRate),ie=(0,r.useSelector)(c.getCurrentCurrency);let se,le,ue=y.SMART_TRANSACTION_STATUSES.PENDING,ce={};if(K&&K.length>0){var de,fe,pe,me;ce=K[K.length-1],se=null===(de=ce)||void 0===de?void 0:de.uuid,ue=(null===(fe=ce)||void 0===fe?void 0:fe.status)||y.SMART_TRANSACTION_STATUSES.PENDING,le=null===(pe=ce)||void 0===pe||null===(me=pe.statusMetadata)||void 0===me?void 0:me.cancellationFeeWei}const[ge,he]=(0,a.useState)(J.stxStatusDeadline),ve={needs_two_confirmations:!0,token_from:null==B?void 0:B.symbol,token_from_amount:null==W?void 0:W.value,token_to:null==G?void 0:G.symbol,request_type:null!=W&&W.balanceError?"Quote":"Order",slippage:null==W?void 0:W.slippage,custom_slippage:2===(null==W?void 0:W.slippage),is_hardware_wallet:H,hardware_wallet_type:$,stx_enabled:ee,current_stx_enabled:te,stx_user_opt_in:X};let be;null!=Y&&Y.destinationAmount&&(be=(0,T.calcTokenAmount)(null==Y?void 0:Y.destinationAmount,G.decimals).toPrecision(8));const _e=(0,a.useContext)(S.MetaMetricsContext),ye=ue===y.SMART_TRANSACTION_STATUSES.PENDING,Ee=ye||ue===y.SMART_TRANSACTION_STATUSES.SUCCESS,Te=null===(n=ce)||void 0===n||null===(M=n.statusMetadata)||void 0===M?void 0:M.minedHash;(0,a.useEffect)((()=>{_e({event:"STX Status Page Loaded",category:_.EVENT.CATEGORIES.SWAPS,sensitiveProperties:ve})}),[]),(0,a.useEffect)((()=>{let e;if(ye&&se){const t=()=>{const t=Math.round((Date.now()-ce.time)/1e3);if(t>J.stxStatusDeadline)return he(0),void clearInterval(e);he(J.stxStatusDeadline-t)};e=setInterval(t,1e3),t()}return()=>clearInterval(e)}),[U,ye,se,ce.time,J.stxStatusDeadline]),(0,a.useEffect)((()=>{U((0,b.setBackgroundSwapRouteState)("smartTransactionStatus")),setTimeout((()=>{U((0,b.stopPollingForQuotes)())}),1e3)}),[U]);let we,Se,ke,Ie,Oe=j("stxPendingPrivatelySubmittingSwap");ye&&(L?Oe=j("stxTryingToCancel"):le>0&&(Oe=j("stxPendingPubliclySubmittingSwap")));ue===y.SMART_TRANSACTION_STATUSES.SUCCESS?(Oe=j("stxSuccess"),null!=G&&G.symbol&&(we=j("stxSuccessDescription",[G.symbol])),ke=a.default.createElement(O.default,null)):"cancelled_user_cancelled"===ue||(null===(A=ce)||void 0===A||null===(D=A.statusMetadata)||void 0===D?void 0:D.minedTx)===y.SMART_TRANSACTION_STATUSES.CANCELLED?(Oe=j("stxUserCancelled"),we=j("stxUserCancelledDescription"),ke=a.default.createElement(x.default,null)):ue.startsWith("cancelled")||ue.includes("deadline_missed")?(Oe=j("stxCancelled"),we=j("stxCancelledDescription"),Se=j("stxCancelledSubDescription"),ke=a.default.createElement(x.default,null)):"unknown"===ue?(Oe=j("stxUnknown"),we=j("stxUnknownDescription"),ke=a.default.createElement(P.default,null)):"reverted"===ue&&(Oe=j("stxFailure"),we=j("stxFailureDescription",[a.default.createElement("a",{className:"smart-transaction-status__support-link",key:"smart-transaction-status-support-link",href:"https://www.qtum.org/support",target:"_blank",rel:"noopener noreferrer"},j("customerSupport"))]),ke=a.default.createElement(C.default,null));Te&&se&&(Ie=(0,i.getBlockExplorerLink)({hash:Te,chainId:z},{blockExplorerUrl:ne}));const Ce=ce.cancellable&&!L,xe=()=>{let e;return le>0&&({feeInFiat:e}=(0,w.getFeeForSmartTransaction)({chainId:z,currentCurrency:ie,conversionRate:re,USDConversionRate:oe,nativeCurrencySymbol:ae,feeInWeiDec:le})),a.default.createElement(g.default,{marginBottom:0},a.default.createElement("a",{className:"smart-transaction-status__cancel-swap-link",href:"#",onClick:e=>{null==e||e.preventDefault(),q(!0),_e({event:"Cancel STX",category:_.EVENT.CATEGORIES.SWAPS,sensitiveProperties:ve}),U((0,u.cancelSwapsSmartTransaction)(se))}},e?j("cancelSwapForFee",[e]):j("cancelSwapForFree")))};return a.default.createElement("div",{className:"smart-transaction-status"},a.default.createElement(g.default,{paddingLeft:8,paddingRight:8,height:v.BLOCK_SIZES.FULL,justifyContent:v.JUSTIFY_CONTENT.START,display:v.DISPLAY.FLEX,className:"smart-transaction-status__content"},a.default.createElement(g.default,{marginTop:10,marginBottom:0,display:v.DISPLAY.FLEX,justifyContent:v.JUSTIFY_CONTENT.CENTER,alignItems:v.ALIGN_ITEMS.CENTER},a.default.createElement(m.default,{color:v.COLORS.TEXT_ALTERNATIVE,variant:v.TYPOGRAPHY.H6},`${(null==W?void 0:W.value)&&Number(W.value).toFixed(5)} `),a.default.createElement(m.default,{color:v.COLORS.TEXT_ALTERNATIVE,variant:v.TYPOGRAPHY.H6,fontWeight:v.FONT_WEIGHT.BOLD,boxProps:{marginLeft:1,marginRight:2}},null==B?void 0:B.symbol),a.default.createElement(h.default,{url:B.iconUrl,className:"main-quote-summary__icon",name:B.symbol,fallbackClassName:"main-quote-summary__icon-fallback"}),a.default.createElement(g.default,{display:v.DISPLAY.BLOCK,marginLeft:2,marginRight:2},a.default.createElement(N.default,null)),a.default.createElement(h.default,{url:G.iconUrl,className:"main-quote-summary__icon",name:G.symbol,fallbackClassName:"main-quote-summary__icon-fallback"}),a.default.createElement(m.default,{color:v.COLORS.TEXT_ALTERNATIVE,variant:v.TYPOGRAPHY.H6,boxProps:{marginLeft:2}},`~${be&&Number(be).toFixed(5)} `),a.default.createElement(m.default,{color:v.COLORS.TEXT_ALTERNATIVE,variant:v.TYPOGRAPHY.H6,fontWeight:v.FONT_WEIGHT.BOLD,boxProps:{marginLeft:1}},null==G?void 0:G.symbol)),a.default.createElement(g.default,{marginTop:3,className:"smart-transaction-status__background-animation smart-transaction-status__background-animation--top"}),ke&&a.default.createElement(g.default,{marginTop:3,marginBottom:2},ke),ye&&a.default.createElement(g.default,{marginTop:7,marginBottom:1,display:v.DISPLAY.FLEX,justifyContent:v.JUSTIFY_CONTENT.CENTER,alignItems:v.ALIGN_ITEMS.CENTER},a.default.createElement(R.default,null),a.default.createElement(m.default,{color:v.COLORS.TEXT_ALTERNATIVE,variant:v.TYPOGRAPHY.H6,boxProps:{marginLeft:1}},`${j("stxSwapCompleteIn")} `),a.default.createElement(m.default,{color:v.COLORS.TEXT_ALTERNATIVE,variant:v.TYPOGRAPHY.H6,fontWeight:v.FONT_WEIGHT.BOLD,boxProps:{marginLeft:1},className:"smart-transaction-status__remaining-time"},(0,w.showRemainingTimeInMinAndSec)(ge))),a.default.createElement(m.default,{color:v.COLORS.TEXT_DEFAULT,variant:v.TYPOGRAPHY.H4,fontWeight:v.FONT_WEIGHT.BOLD},Oe),ye&&a.default.createElement("div",{className:"smart-transaction-status__loading-bar-container"},a.default.createElement("div",{className:"smart-transaction-status__loading-bar",style:{width:100/J.stxStatusDeadline*(J.stxStatusDeadline-ge)+"%"}})),we&&a.default.createElement(m.default,{variant:v.TYPOGRAPHY.H6,boxProps:{...Ie&&{margin:[1,0,0]}},color:v.COLORS.TEXT_ALTERNATIVE},we),Ie&&a.default.createElement(I.default,{blockExplorerUrl:Ie,sensitiveTrackingProperties:ve}),a.default.createElement(g.default,{marginTop:3,className:"smart-transaction-status__background-animation smart-transaction-status__background-animation--bottom"}),Se&&a.default.createElement(m.default,{variant:v.TYPOGRAPHY.H7,boxProps:{marginTop:8},color:v.COLORS.TEXT_ALTERNATIVE},Se)),Ce&&se&&ye&&a.default.createElement(xe,null),ue===y.SMART_TRANSACTION_STATUSES.SUCCESS?a.default.createElement(k.default,{sensitiveTrackingProperties:ve}):null,a.default.createElement(E.default,{onSubmit:async()=>{Ee?(await U((0,u.prepareToLeaveSwaps)()),F.push(p.DEFAULT_ROUTE)):F.push(p.BUILD_QUOTE_ROUTE)},onCancel:async()=>{await U((0,u.prepareToLeaveSwaps)()),F.push(p.DEFAULT_ROUTE)},submitText:j(Ee?"close":"tryAgain"),hideCancel:Ee,cancelText:j("close"),className:"smart-transaction-status__swaps-footer"}))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=A(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=e("react-redux"),o=e("react-router-dom"),i=e("@metamask/etherscan-link"),s=e("lodash"),l=e("../../../contexts/i18n"),u=e("../../../ducks/swaps/swaps"),c=e("../../../selectors"),d=e("../../../../shared/constants/swaps"),f=e("../../../ducks/metamask/metamask"),p=e("../../../helpers/constants/routes"),m=M(e("../../../components/ui/typography")),g=M(e("../../../components/ui/box")),h=M(e("../../../components/ui/url-icon")),v=e("../../../helpers/constants/design-system"),b=e("../../../store/actions"),_=e("../../../../shared/constants/metametrics"),y=e("../../../../shared/constants/transaction"),E=M(e("../swaps-footer")),T=e("../../../helpers/utils/token-util"),w=e("../swaps.util"),S=e("../../../contexts/metametrics"),k=M(e("../create-new-swap")),I=M(e("../view-on-block-explorer")),O=M(e("./success-icon")),C=M(e("./reverted-icon")),x=M(e("./canceled-icon")),P=M(e("./unknown-icon")),N=M(e("./arrow-icon")),R=M(e("./timer-icon"));function M(e){return e&&e.__esModule?e:{default:e}}function A(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(A=function(e){return e?n:t})(e)}}}},{package:"$root$"}],[8248,{react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return r.default.createElement("svg",{width:"39",height:"39",viewBox:"0 0 39 39",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("path",{d:"M34.5457 19.8983C34.5457 23.9296 32.9443 27.7958 30.0937 30.6463C27.2432 33.4969 23.377 35.0983 19.3457 35.0983C15.3144 35.0983 11.4482 33.4969 8.59768 30.6463C5.74713 27.7958 4.1457 23.9296 4.1457 19.8983C4.1457 15.867 5.74713 12.0008 8.59768 9.15029C11.4482 6.29974 15.3144 4.69832 19.3457 4.69832C20.7897 4.69832 22.1957 4.90732 23.5257 5.28732L26.5087 2.30432C24.3047 1.39232 21.8917 0.898315 19.3457 0.898315C16.8506 0.898315 14.3799 1.38977 12.0747 2.3446C9.76953 3.29944 7.67499 4.69897 5.91067 6.46329C2.34748 10.0265 0.345703 14.8592 0.345703 19.8983C0.345703 24.9374 2.34748 29.7702 5.91067 33.3333C7.67499 35.0977 9.76953 36.4972 12.0747 37.452C14.3799 38.4069 16.8506 38.8983 19.3457 38.8983C24.3848 38.8983 29.2175 36.8965 32.7807 33.3333C36.3439 29.7702 38.3457 24.9374 38.3457 19.8983H34.5457ZM11.5747 16.2503L8.8957 18.9483L17.4457 27.4983L36.4457 8.49832L33.7667 5.80032L17.4457 22.1213L11.5747 16.2503Z",fill:"#28A745"}))};var a,r=(a=e("react"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[8249,{react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return r.default.createElement("svg",{width:"15",height:"14",viewBox:"0 0 15 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("path",{d:"M7.36621 0.0810547C3.62012 0.0810547 0.584961 3.11621 0.584961 6.8623C0.584961 10.6084 3.62012 13.6436 7.36621 13.6436C11.1123 13.6436 14.1475 10.6084 14.1475 6.8623C14.1475 3.11621 11.1123 0.0810547 7.36621 0.0810547ZM7.36621 12.3311C4.33105 12.3311 1.89746 9.89746 1.89746 6.8623C1.89746 3.85449 4.33105 1.39355 7.36621 1.39355C10.374 1.39355 12.835 3.85449 12.835 6.8623C12.835 9.89746 10.374 12.3311 7.36621 12.3311ZM9.03418 9.4873C9.19824 9.59668 9.38965 9.56934 9.49902 9.40527L10.0186 8.72168C10.1279 8.55762 10.1006 8.36621 9.93652 8.25684L8.13184 6.91699V3.03418C8.13184 2.87012 7.96777 2.70605 7.80371 2.70605H6.92871C6.7373 2.70605 6.60059 2.87012 6.60059 3.03418V7.5459C6.60059 7.62793 6.62793 7.7373 6.70996 7.79199L9.03418 9.4873Z",fill:"var(--color-primary-default)"}))};var a,r=(a=e("react"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[8250,{react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return r.default.createElement("svg",{width:"39",height:"39",viewBox:"0 0 39 39",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("circle",{cx:"19.1533",cy:"19.2715",r:"17.1",stroke:"var(--color-primary-default)",strokeWidth:"3.8"}),r.default.createElement("path",{d:"M16.712 21.5034C16.712 20.7834 16.88 20.1834 17.216 19.7034C17.568 19.2074 18.08 18.7274 18.752 18.2634C19.008 18.0874 19.264 17.9274 19.52 17.7834C19.776 17.6394 20 17.4874 20.192 17.3274C20.4 17.1514 20.56 16.9674 20.672 16.7754C20.8 16.5674 20.864 16.3194 20.864 16.0314C20.864 15.5354 20.688 15.1594 20.336 14.9034C20 14.6474 19.592 14.5194 19.112 14.5194C18.616 14.5194 18.16 14.6794 17.744 14.9994C17.344 15.3034 17.144 15.7674 17.144 16.3914H13.52C13.52 15.6394 13.664 14.9354 13.952 14.2794C14.24 13.6074 14.632 13.0314 15.128 12.5514C15.64 12.0554 16.232 11.6634 16.904 11.3754C17.592 11.0874 18.328 10.9434 19.112 10.9434C19.896 10.9434 20.616 11.0794 21.272 11.3514C21.944 11.6234 22.512 11.9834 22.976 12.4314C23.456 12.8794 23.824 13.3994 24.08 13.9914C24.352 14.5674 24.488 15.1754 24.488 15.8154C24.488 16.2314 24.456 16.6234 24.392 16.9914C24.344 17.3594 24.24 17.7114 24.08 18.0474C23.936 18.3834 23.728 18.7114 23.456 19.0314C23.184 19.3514 22.84 19.6634 22.424 19.9674C21.784 20.4474 21.272 20.8234 20.888 21.0954C20.52 21.3674 20.336 21.6474 20.336 21.9354V21.9594H16.712V21.5034ZM18.512 28.4634C18.16 28.4634 17.824 28.3994 17.504 28.2714C17.2 28.1274 16.928 27.9434 16.688 27.7194C16.464 27.4794 16.28 27.2074 16.136 26.9034C16.008 26.5834 15.944 26.2474 15.944 25.8954C15.944 25.5434 16.008 25.2154 16.136 24.9114C16.28 24.5914 16.464 24.3194 16.688 24.0954C16.928 23.8554 17.2 23.6714 17.504 23.5434C17.824 23.3994 18.16 23.3274 18.512 23.3274C18.864 23.3274 19.192 23.3994 19.496 23.5434C19.816 23.6714 20.088 23.8554 20.312 24.0954C20.552 24.3194 20.736 24.5914 20.864 24.9114C21.008 25.2154 21.08 25.5434 21.08 25.8954C21.08 26.2474 21.008 26.5834 20.864 26.9034C20.736 27.2074 20.552 27.4794 20.312 27.7194C20.088 27.9434 19.816 28.1274 19.496 28.2714C19.192 28.3994 18.864 28.4634 18.512 28.4634Z",fill:"var(--color-primary-default)"}))};var a,r=(a=e("react"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[8251,{"./swaps-footer":8252},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./swaps-footer"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[8252,{"../../../components/ui/page-container/page-container-footer":7793,"../../../contexts/i18n":7844,classnames:2484,"prop-types":5840,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=c;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=l(e("prop-types")),o=l(e("classnames")),i=e("../../../contexts/i18n"),s=l(e("../../../components/ui/page-container/page-container-footer"));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function c({onCancel:e,hideCancel:t,onSubmit:n,submitText:r,disabled:l,showTermsOfService:u,showTopBorder:c,className:d="",cancelText:f}){const p=(0,a.useContext)(i.I18nContext);return a.default.createElement("div",{className:"swaps-footer"},a.default.createElement("div",{className:(0,o.default)("swaps-footer__buttons",d,{"swaps-footer__buttons--border":c})},a.default.createElement(s.default,{onCancel:e,hideCancel:t,cancelText:f||p("back"),onSubmit:n,submitText:r,footerClassName:(0,o.default)("swaps-footer__custom-page-container-footer-class",d),footerButtonClassName:(0,o.default)("swaps-footer__custom-page-container-footer-button-class",{"swaps-footer__custom-page-container-footer-button-class--single":t}),disabled:l})),u&&a.default.createElement("div",{className:"swaps-footer__bottom-text",onClick:()=>global.platform.openTab({url:"https://metamask.io/terms.html"})},p("termsOfService")))}c.propTypes={onCancel:r.default.func,hideCancel:r.default.bool,onSubmit:r.default.func.isRequired,submitText:r.default.string,disabled:r.default.bool,showTermsOfService:r.default.bool,showTopBorder:r.default.bool,className:r.default.string,cancelText:r.default.string}}}},{package:"$root$"}],[8254,{"./view-on-block-explorer":8255},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./view-on-block-explorer"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[8255,{"../../../../shared/constants/metametrics":7321,"../../../components/ui/box":7682,"../../../contexts/i18n":7844,"../../../contexts/metametrics":7845,"../../../helpers/utils/util":7907,"prop-types":5840,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=f;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=c(e("prop-types")),o=c(e("../../../components/ui/box")),i=e("../../../contexts/i18n"),s=e("../../../helpers/utils/util"),l=e("../../../contexts/metametrics"),u=e("../../../../shared/constants/metametrics");function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function f({blockExplorerUrl:e,sensitiveTrackingProperties:t}){const n=(0,a.useContext)(i.I18nContext),r=(0,a.useContext)(l.MetaMetricsContext),c=(0,s.getURLHostName)(e);return a.default.createElement(o.default,{marginTop:6,className:"view-on-block-explorer"},a.default.createElement("button",{onClick:()=>{r({event:u.EVENT_NAMES.EXTERNAL_LINK_CLICKED,category:u.EVENT.CATEGORIES.SWAPS,sensitiveProperties:t,properties:{link_type:u.EVENT.EXTERNAL_LINK_TYPES.TRANSACTION_BLOCK_EXPLORER,location:"Swap Transaction",url_domain:c}}),global.platform.openTab({url:e})}},n("viewOnCustomBlockExplorer",[n("blockExplorerSwapAction"),c])))}f.propTypes={blockExplorerUrl:r.default.string.isRequired,sensitiveTrackingProperties:r.default.object.isRequired}}}},{package:"$root$"}],[8256,{"./view-quote":8258},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./view-quote"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[8257,{"../../../../shared/constants/gas":7318,"../../../components/ui/actionable-message/actionable-message":7678,"../../../components/ui/box":7682,"../../../components/ui/tooltip":7832,"../../../contexts/i18n":7844,"../../../helpers/constants/design-system":7868,classnames:2484,"prop-types":5840,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=m;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=f(e("prop-types")),o=f(e("classnames")),i=e("../../../contexts/i18n"),s=f(e("../../../components/ui/actionable-message/actionable-message")),l=f(e("../../../components/ui/tooltip")),u=f(e("../../../components/ui/box")),c=e("../../../helpers/constants/design-system"),d=e("../../../../shared/constants/gas");function f(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function m(e){const{usedQuote:t,sourceTokenValue:n,destinationTokenValue:r,onAcknowledgementClick:f,acknowledged:p,priceSlippageFromSource:m,priceSlippageFromDestination:g,priceDifferencePercentage:h,priceSlippageUnknownFiatValue:v}=e,b=(0,a.useContext)(i.I18nContext);let _="",y="",E="",T="";return v?(_=b("swapPriceUnavailableTitle"),y=b("swapPriceUnavailableDescription"),E=d.GAS_RECOMMENDATIONS.HIGH,T=b("tooltipApproveButton")):(_=b("swapPriceDifferenceTitle",[h]),y=b("swapPriceDifference",[n,t.sourceTokenInfo.symbol,m,r,t.destinationTokenInfo.symbol,g]),E=t.priceSlippage.bucket,T=b("tooltipApproveButton")),a.default.createElement("div",{className:(0,o.default)("view-quote__price-difference-warning-wrapper",E)},a.default.createElement(s.default,{message:a.default.createElement("div",{className:"view-quote__price-difference-warning-contents"},a.default.createElement("div",{className:"view-quote__price-difference-warning-contents-text"},a.default.createElement(u.default,{display:c.DISPLAY.FLEX,justifyContent:c.JUSTIFY_CONTENT.SPACE_BETWEEN,paddingBottom:2},a.default.createElement("div",{className:"view-quote__price-difference-warning-contents-title"},_),a.default.createElement(l.default,{position:"bottom",title:b("swapPriceImpactTooltip")},a.default.createElement("i",{className:"fa fa-info-circle"}))),y,!p&&a.default.createElement("div",{className:"view-quote__price-difference-warning-contents-actions"},a.default.createElement("button",{onClick:()=>{f()}},T))))}))}m.propTypes={usedQuote:r.default.object,sourceTokenValue:r.default.string,destinationTokenValue:r.default.string,onAcknowledgementClick:r.default.func,acknowledged:r.default.bool,priceSlippageFromSource:r.default.string,priceSlippageFromDestination:r.default.string,priceDifferencePercentage:r.default.number,priceSlippageUnknownFiatValue:r.default.bool}}}},{package:"$root$"}],[8258,{"../../../../shared/constants/gas":7318,"../../../../shared/constants/metametrics":7321,"../../../../shared/constants/swaps":7326,"../../../../shared/modules/string-utils":7343,"../../../../shared/modules/transaction.utils":7345,"../../../components/ui/actionable-message/actionable-message":7678,"../../../components/ui/box":7682,"../../../components/ui/pulse-loader":7800,"../../../contexts/i18n":7844,"../../../contexts/metametrics":7845,"../../../ducks/metamask/metamask":7859,"../../../ducks/swaps/swaps":7863,"../../../helpers/constants/routes":7872,"../../../helpers/utils/conversions.util":7888,"../../../helpers/utils/token-util":7904,"../../../helpers/utils/util":7907,"../../../hooks/gasFeeInput/useGasFeeInputs":7911,"../../../hooks/useEqualityCheck":7924,"../../../hooks/useEthFiatAmount":7925,"../../../hooks/usePrevious":7930,"../../../hooks/useTokenTracker":7940,"../../../selectors":8267,"../../../store/actionConstants":8272,"../../../store/actions":8273,"../../confirm-approve/confirm-approve.util":7960,"../../send/send.utils":8145,"../countdown-timer":8208,"../fee-card":8219,"../main-quote-summary":8226,"../select-quote-popover":8234,"../swaps-footer":8251,"../swaps.util":8253,"./view-quote-price-difference":8257,"bignumber.js":2283,classnames:2484,lodash:5584,react:6817,"react-redux":6775,"react-router-dom":6795},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var e,t,n,G,B,$,V;const Q=(0,o.useHistory)(),Y=(0,r.useDispatch)(),K=(0,a.useContext)(u.I18nContext),X=(0,a.useContext)(g.MetaMetricsContext),[z,Z]=(0,a.useState)(!1),[J,ee]=(0,a.useState)(!1),[te,ne]=(0,a.useState)(!1),[ae,re]=(0,a.useState)(!1),[oe,ie]=(0,a.useState)(null),[se]=(0,a.useState)(Date.now()),[le,ue]=(0,a.useState)(!1),ce=[M.GAS_RECOMMENDATIONS.HIGH,M.GAS_RECOMMENDATIONS.MEDIUM],de=(0,r.useSelector)(v.getBackgroundSwapRouteState),fe=(0,r.useSelector)(v.getQuotes,s.isEqual);(0,a.useEffect)((()=>{Object.values(fe).length?"awaiting"===de&&Q.push(w.AWAITING_SWAP_ROUTE):Q.push(w.BUILD_QUOTE_ROUTE)}),[Q,fe,de]);const pe=(0,r.useSelector)(v.getQuotesLastFetched),me=(0,r.useSelector)(v.getUsedSwapsGasPrice),ge=(0,r.useSelector)(v.getCustomSwapsGas),he=(0,r.useSelector)(v.getCustomMaxFeePerGas),ve=(0,r.useSelector)(v.getCustomMaxPriorityFeePerGas),be=(0,r.useSelector)(v.getSwapsUserFeeLevel),_e=(0,r.useSelector)(b.getTokenExchangeRates,s.isEqual),ye=(0,f.useEqualityCheck)(_e),{balance:Ee}=(0,r.useSelector)(b.getSelectedAccount,r.shallowEqual),Te=(0,r.useSelector)(b.conversionRateSelector),we=(0,r.useSelector)(b.getUSDConversionRate),Se=(0,r.useSelector)(b.getCurrentCurrency),ke=(0,r.useSelector)(_.getTokens,s.isEqual),Ie=(0,r.useSelector)(b.checkNetworkAndAccountSupports1559),Oe=(0,r.useSelector)(v.getBalanceError),Ce=(0,r.useSelector)(v.getFetchParams,s.isEqual),xe=(0,r.useSelector)(v.getApproveTxParams,r.shallowEqual),Pe=(0,r.useSelector)(v.getSelectedQuote,s.isEqual),Ne=(0,r.useSelector)(v.getTopQuote,s.isEqual),Re=Pe||Ne,Me=null!==(e=null==Re||null===(t=Re.trade)||void 0===t?void 0:t.value)&&void 0!==e?e:"0x0",Ae=(0,r.useSelector)(v.getSwapsQuoteRefreshTime),De=(0,r.useSelector)(b.getSwapsDefaultToken,s.isEqual),Le=(0,r.useSelector)(b.getCurrentChainId),qe=(0,r.useSelector)(_.getNativeCurrency),je=(0,r.useSelector)(v.getReviewSwapClickedTimestamp),Fe=(0,r.useSelector)(v.getSmartTransactionsOptInStatus),Ue=(0,r.useSelector)(v.getSmartTransactionsEnabled),We=(0,r.useSelector)(v.getSwapsSTXLoading),Ge=(0,r.useSelector)(v.getCurrentSmartTransactionsError),Be=(0,r.useSelector)(v.getSmartTransactionsError),He=(0,r.useSelector)(v.getCurrentSmartTransactionsErrorMessageDismissed),$e=Ue&&!(Ge&&("not_enough_funds"!==Ge||He)),Ve=(0,r.useSelector)(v.getSmartTransactionFees,s.isEqual),Qe=(0,r.useSelector)(v.getSwapsNetworkConfig,r.shallowEqual),Ye=Re.trade;let Ke;Ie&&(Ke=(0,m.useGasFeeInputs)(M.GAS_RECOMMENDATIONS.HIGH,{userFeeLevel:be||M.GAS_RECOMMENDATIONS.HIGH}));const{isBestQuote:Xe}=Re,ze=null==Ce?void 0:Ce.sourceToken,Ze={reg_tx_fee_in_usd:undefined,reg_tx_fee_in_eth:undefined,reg_tx_max_fee_in_usd:undefined,reg_tx_max_fee_in_eth:undefined,stx_fee_in_usd:undefined,stx_fee_in_eth:undefined,stx_max_fee_in_usd:undefined,stx_max_fee_in_eth:undefined},Je=(null==Re?void 0:Re.gasEstimateWithRefund)||`0x${(0,k.decimalToHex)((null==Re?void 0:Re.averageGas)||0)}`,et=(null==Re?void 0:Re.gasEstimate)||"0x0",tt=new i.default(et,16).times((null==Re?void 0:Re.gasMultiplier)||v.FALLBACK_GAS_MULTIPLIER,10).round(0).toString(16),nt=null!=Re&&Re.gasEstimate?tt:`0x${(0,k.decimalToHex)((null==Re?void 0:Re.maxGas)||0)}`,at=ge||nt;let rt,ot,it;if(Ie){const{maxFeePerGas:e,maxPriorityFeePerGas:t,gasFeeEstimates:{estimatedBaseFee:n="0"}}=Ke;rt=he||(0,k.decGWEIToHexWEI)(e),ot=ve||(0,k.decGWEIToHexWEI)(t),it=(0,k.addHexes)((0,k.decGWEIToHexWEI)(n),ot)}const st=(0,O.calcGasTotal)(at,rt||me),{tokensWithBalances:lt}=(0,N.useTokenTracker)(ke,!0),ut=ze===De.address?De:lt.find((({address:e})=>(0,F.isEqualCaseInsensitive)(e,ze))),ct=ut||Re.sourceTokenInfo,dt=(null==lt?void 0:lt.length)&&(0,S.calcTokenAmount)(ct.balance||"0x0",ct.decimals).toFixed(9),ft=lt&&ut===undefined,pt=(0,U.parseStandardTokenTransactionData)(null==xe?void 0:xe.data),mt=pt&&(0,S.getTokenValueParam)(pt),gt=mt&&(null==ct?void 0:ct.decimals)!==undefined&&(0,S.calcTokenAmount)(mt,ct.decimals).toFixed(9),ht=null==xe?void 0:xe.gas,vt=(0,a.useMemo)((()=>(0,P.quotesToRenderableData)(fe,Ie?it:me,Te,Se,ht,ye,Le,Ue&&Fe&&(null==Ve?void 0:Ve.tradeTxFees),qe)),[fe,me,it,Ie,Te,Se,ht,ye,Le,null==Ve?void 0:Ve.tradeTxFees,qe,Ue,Fe]),bt=vt.find((e=>e.aggId===Re.aggregator)),{destinationTokenDecimals:_t,destinationTokenSymbol:yt,destinationTokenValue:Et,destinationIconUrl:Tt,sourceTokenDecimals:wt,sourceTokenSymbol:St,sourceTokenValue:kt,sourceTokenIconUrl:It}=bt;let{feeInFiat:Ot,feeInEth:Ct,rawEthFee:xt,feeInUsd:Pt}=(0,P.getRenderableNetworkFeesForQuote)({tradeGas:Je,approveGas:ht,gasPrice:Ie?it:me,currentCurrency:Se,conversionRate:Te,USDConversionRate:we,tradeValue:Me,sourceSymbol:St,sourceAmount:Re.sourceAmount,chainId:Le,nativeCurrencySymbol:qe});Ze.reg_tx_fee_in_usd=Number(Pt),Ze.reg_tx_fee_in_eth=Number(xt);const Nt=(0,P.getRenderableNetworkFeesForQuote)({tradeGas:at,approveGas:ht,gasPrice:rt||me,currentCurrency:Se,conversionRate:Te,USDConversionRate:we,tradeValue:Me,sourceSymbol:St,sourceAmount:Re.sourceAmount,chainId:Le,nativeCurrencySymbol:qe});let{feeInFiat:Rt,feeInEth:Mt,rawEthFee:At,feeInUsd:Dt}=Nt;if(Ze.reg_tx_max_fee_in_usd=Number(Dt),Ze.reg_tx_max_fee_in_eth=Number(At),$e&&Fe&&null!=Ve&&Ve.tradeTxFees){var Lt;const e=(null==Ve?void 0:Ve.tradeTxFees.feeEstimate)+((null==Ve||null===(Lt=Ve.approvalTxFees)||void 0===Lt?void 0:Lt.feeEstimate)||0),t=e*Qe.stxMaxFeeMultiplier;({feeInFiat:Ot,feeInEth:Ct,rawEthFee:xt,feeInUsd:Pt}=(0,P.getFeeForSmartTransaction)({chainId:Le,currentCurrency:Se,conversionRate:Te,USDConversionRate:we,nativeCurrencySymbol:qe,feeInWeiDec:e})),Ze.stx_fee_in_usd=Number(Pt),Ze.stx_fee_in_eth=Number(xt),Ze.estimated_gas=null==Ve?void 0:Ve.tradeTxFees.gasLimit,({feeInFiat:Rt,feeInEth:Mt,rawEthFee:At,feeInUsd:Dt}=(0,P.getFeeForSmartTransaction)({chainId:Le,currentCurrency:Se,conversionRate:Te,USDConversionRate:we,nativeCurrencySymbol:qe,feeInWeiDec:t})),Ze.stx_max_fee_in_usd=Number(Dt),Ze.stx_max_fee_in_eth=Number(At)}const qt=new i.default(Re.sourceAmount),jt=new i.default(Re.trade.value||0,10).plus(new i.default(st,16)),Ft=((null==lt?void 0:lt.length)||Oe)&&qt.gt(new i.default(ct.balance||"0x0")),Ut=jt.gt(new i.default(Ee||"0x0")),Wt=Ft?(0,y.toPrecisionWithoutTrailingZeros)((0,S.calcTokenAmount)(qt,ct.decimals).minus(dt).toString(10),6):null,Gt=Ut?(0,y.toPrecisionWithoutTrailingZeros)(jt.minus(Ee,16).div("1000000000000000000",10).toString(10),6):null;let Bt;null!=Be&&Be.balanceNeededWei&&(Bt=(0,k.decWEIToDecETH)(Be.balanceNeededWei-Be.currentBalanceWei));const Ht=(0,r.useSelector)(v.getDestinationTokenInfo,s.isEqual);(0,a.useEffect)((()=>{$e&&Fe?Ft?Y((0,v.setBalanceError)(!0)):Oe&&!Ft&&Y((0,v.setBalanceError)(!1)):Ft||Ut?Y((0,v.setBalanceError)(!0)):!Oe||Ft||Ut||Y((0,v.setBalanceError)(!1))}),[Ft,Ut,Oe,Y,$e,Fe]),(0,a.useEffect)((()=>{const e=Date.now()-pe;e>Ae&&!z?(Z(!0),Y((0,E.safeRefetchQuotes)())):e>Ae&&(Y((0,E.setSwapsErrorKey)(R.QUOTES_EXPIRED_ERROR)),Q.push(w.SWAPS_ERROR_ROUTE))}),[pe,z,Y,Q,Ae]),(0,a.useEffect)((()=>{!oe&&gt&&ie(gt)}),[oe,gt]);const $t=(!$e||!Fe)&&Gt,Vt=$e&&Fe&&Bt,Qt=(Oe||Wt||$t||Vt)&&!ae,Yt=(0,r.useSelector)(b.isHardwareWallet),Kt=(0,r.useSelector)(b.getHardwareWalletType),Xt=Object.values(fe).length,zt=(0,a.useRef)(),Zt=(0,a.useMemo)((()=>({token_from:St,token_from_amount:kt,token_to:yt,token_to_amount:Et,request_type:null==Ce?void 0:Ce.balanceError,slippage:null==Ce?void 0:Ce.slippage,custom_slippage:2!==(null==Ce?void 0:Ce.slippage),response_time:null==Ce?void 0:Ce.responseTime,best_quote_source:null==Ne?void 0:Ne.aggregator,available_quotes:Xt,is_hardware_wallet:Yt,hardware_wallet_type:Kt,stx_enabled:Ue,current_stx_enabled:$e,stx_user_opt_in:Fe})),[St,kt,yt,Et,null==Ce?void 0:Ce.balanceError,null==Ce?void 0:Ce.slippage,null==Ce?void 0:Ce.responseTime,null==Ne?void 0:Ne.aggregator,Xt,Yt,Kt,Ue,$e,Fe]),Jt=()=>{X({event:"Edit Spend Limit Opened",category:j.EVENT.CATEGORIES.SWAPS,sensitiveProperties:{...Zt,custom_spend_limit_set:oe===gt,custom_spend_limit_amount:oe===gt?null:gt}})},en=(0,a.useCallback)((()=>{X({event:"Best Quote Reviewed",category:j.EVENT.CATEGORIES.SWAPS,sensitiveProperties:{...Zt,network_fees:Ot}})}),[X,Zt,Ot]),tn=(0,a.useCallback)((()=>{X({event:"View Quote Page Loaded",category:j.EVENT.CATEGORIES.SWAPS,sensitiveProperties:{...Zt,response_time:se-je}})}),[X,Zt,se,je]);(0,a.useEffect)((()=>{!zt.current&&[St,kt,yt,Et,Ce,Ne,Xt,Ot].every((e=>null!==e&&e!==undefined))&&(zt.current=!0,en())}),[Ce,Ne,Xt,Ot,yt,Et,St,kt,en]);const nn=Re.fee,an=ft?K("swapTokenBalanceUnavailable",[St]):K("swapApproveNeedMoreTokens",[a.default.createElement("span",{key:"swapApproveNeedMoreTokens-1",className:"view-quote__bold"},Wt||Bt||Gt),Wt&&St!==De.symbol?St:De.symbol]),rn=null==Re||null===(n=Re.priceSlippage)||void 0===n?void 0:n.bucket,on=(0,p.usePrevious)(rn);(0,a.useEffect)((()=>{le&&on===M.GAS_RECOMMENDATIONS.MEDIUM&&rn===M.GAS_RECOMMENDATIONS.HIGH&&ue(!1)}),[rn,le,on]);let sn=null;const ln=(0,d.useEthFiatAmount)((null==Re||null===(G=Re.priceSlippage)||void 0===G?void 0:G.sourceAmountInETH)||0,{showFiat:!0}),un=(0,d.useEthFiatAmount)((null==Re||null===(B=Re.priceSlippage)||void 0===B?void 0:B.destinationAmountInETH)||0,{showFiat:!0}),cn=!ln||!un||(null==Re||null===($=Re.priceSlippage)||void 0===$?void 0:$.calculationError);let dn=0;null!=Re&&null!==(V=Re.priceSlippage)&&void 0!==V&&V.ratio&&(dn=parseFloat(new i.default(Re.priceSlippage.ratio,10).minus(1,10).times(100,10).toFixed(2),10));const fn=!ft&&!Qt&&Re&&(ce.includes(rn)||cn);fn&&(sn=a.default.createElement(W.default,{usedQuote:Re,sourceTokenValue:kt,destinationTokenValue:Et,priceSlippageFromSource:ln,priceSlippageFromDestination:un,priceDifferencePercentage:dn,priceSlippageUnknownFiatValue:cn,onAcknowledgementClick:()=>{ue(!0)},acknowledged:le}));const pn=fn&&!le,mn=Qt||fn,gn=Boolean(J||Oe||ft||pn||Ie&&it===undefined||!Ie&&(null===me||me===undefined)||$e&&(Ge||Be)||$e&&Fe&&!(null!=Ve&&Ve.tradeTxFees));return(0,a.useEffect)((()=>{if($e&&Fe&&!Ft){const e={from:Ye.from,to:Ye.to,value:Ye.value,data:Ye.data,gas:Ye.gas,chainId:Le};H=setInterval((()=>{We||Y((0,v.fetchSwapsSmartTransactionFees)({unsignedTransaction:e,approveTxParams:xe,fallbackOnNotEnoughFunds:!1}))}),Qe.stxGetTransactionsRefreshTime),Y((0,v.fetchSwapsSmartTransactionFees)({unsignedTransaction:e,approveTxParams:xe,fallbackOnNotEnoughFunds:!1}))}else H&&clearInterval(H);return()=>clearInterval(H)}),[Y,$e,Fe,Ye.data,Ye.from,Ye.value,Ye.gas,Ye.to,Le,Qe.stxGetTransactionsRefreshTime,Ft]),(0,a.useEffect)((()=>{Y((0,E.setSwapsQuotesPollingLimitEnabled)(!0)),je&&tn()}),[Y,tn,je]),(0,a.useEffect)((()=>{!$e&&Ge&&J&&ee(!1)}),[$e,Ge,J]),(0,a.useEffect)((()=>{$e&&Fe&&Y({type:T.SET_SMART_TRANSACTIONS_ERROR,payload:null})}),[$e,Fe,Y]),a.default.createElement("div",{className:"view-quote"},a.default.createElement("div",{className:(0,l.default)("view-quote__content",{"view-quote__content_modal":pn})},te&&a.default.createElement(c.default,{quoteDataRows:vt,onClose:()=>ne(!1),onSubmit:e=>Y((0,v.swapsQuoteSelected)(e)),swapToSymbol:yt,initialAggId:Re.aggregator,onQuoteDetailsIsOpened:()=>{X({event:"Quote Details Opened",category:j.EVENT.CATEGORIES.SWAPS,sensitiveProperties:{...Zt,other_quote_selected:(null==Re?void 0:Re.aggregator)!==(null==Ne?void 0:Ne.aggregator),other_quote_selected_source:(null==Re?void 0:Re.aggregator)===(null==Ne?void 0:Ne.aggregator)?null:null==Re?void 0:Re.aggregator}})},hideEstimatedGasFee:Ue&&Fe}),a.default.createElement("div",{className:(0,l.default)("view-quote__warning-wrapper",{"view-quote__warning-wrapper--thin":!mn})},sn,(Qt||ft)&&a.default.createElement(x.default,{message:an,onClose:()=>re(!0)})),a.default.createElement("div",{className:"view-quote__countdown-timer-container"},a.default.createElement(A.default,{timeStarted:pe,warningTime:"0:10",labelKey:"swapNewQuoteIn"})),a.default.createElement(I.default,{sourceValue:(0,S.calcTokenValue)(kt,wt),sourceDecimals:wt,sourceSymbol:St,destinationValue:(0,S.calcTokenValue)(Et,_t),destinationDecimals:_t,destinationSymbol:yt,sourceIconUrl:It,destinationIconUrl:Tt}),$e&&Fe&&!(null!=Ve&&Ve.tradeTxFees)&&!Qt&&a.default.createElement(q.default,{marginTop:0,marginBottom:10},a.default.createElement(L.default,null)),(!$e||!Fe||(null==Ve?void 0:Ve.tradeTxFees))&&a.default.createElement("div",{className:(0,l.default)("view-quote__fee-card-container",{"view-quote__fee-card-container--three-rows":xe&&(!Oe||ae)})},a.default.createElement(h.default,{primaryFee:{fee:Ct,maxFee:Mt},secondaryFee:{fee:Ot,maxFee:Rt},hideTokenApprovalRow:!xe||Oe&&!ae,tokenApprovalSourceTokenSymbol:St,onTokenApprovalClick:()=>{Jt(),Y((0,E.showModal)({name:"EDIT_APPROVAL_PERMISSION",decimals:ct.decimals,origin:"MetaMask",setCustomAmount:e=>{const t=""===e?oe:e,n=(0,C.getCustomTxParamsData)(xe.data,{customPermissionAmount:t,decimals:ct.decimals});null!=t&&t.length&&xe.data!==n&&Y((0,E.setCustomApproveTxData)(n))},tokenAmount:oe,customTokenAmount:oe===gt?null:gt,tokenBalance:dt,tokenSymbol:ct.symbol,requiredMinimum:(0,S.calcTokenAmount)(Re.sourceAmount,ct.decimals)}))},metaMaskFee:String(nn),numberOfQuotes:Object.values(fe).length,onQuotesClick:()=>{X({event:"All Available Quotes Opened",category:j.EVENT.CATEGORIES.SWAPS,sensitiveProperties:{...Zt,other_quote_selected:(null==Re?void 0:Re.aggregator)!==(null==Ne?void 0:Ne.aggregator),other_quote_selected_source:(null==Re?void 0:Re.aggregator)===(null==Ne?void 0:Ne.aggregator)?null:null==Re?void 0:Re.aggregator}}),ne(!0)},chainId:Le,isBestQuote:Xe,maxPriorityFeePerGasDecGWEI:(0,k.hexWEIToDecGWEI)(ot),maxFeePerGasDecGWEI:(0,k.hexWEIToDecGWEI)(rt)}))),a.default.createElement(D.default,{onSubmit:()=>{ee(!0),Oe?Ht.symbol===De.symbol?Q.push(w.DEFAULT_ROUTE):Q.push(`${w.ASSET_ROUTE}/${Ht.address}`):$e&&Fe&&null!=Ve&&Ve.tradeTxFees?Y((0,v.signAndSendSwapsSmartTransaction)({unsignedTransaction:Ye,trackEvent:X,history:Q,additionalTrackingParams:Ze})):Y((0,v.signAndSendTransactions)(Q,X,Ze))},submitText:K($e&&Fe&&We?"preparingSwap":"swap"),hideCancel:!0,disabled:gn,className:mn&&"view-quote__thin-swaps-footer",showTopBorder:!0}))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=B(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=e("react-redux"),o=e("react-router-dom"),i=G(e("bignumber.js")),s=e("lodash"),l=G(e("classnames")),u=e("../../../contexts/i18n"),c=G(e("../select-quote-popover")),d=e("../../../hooks/useEthFiatAmount"),f=e("../../../hooks/useEqualityCheck"),p=e("../../../hooks/usePrevious"),m=e("../../../hooks/gasFeeInput/useGasFeeInputs"),g=e("../../../contexts/metametrics"),h=G(e("../fee-card")),v=e("../../../ducks/swaps/swaps"),b=e("../../../selectors"),_=e("../../../ducks/metamask/metamask"),y=e("../../../helpers/utils/util"),E=e("../../../store/actions"),T=e("../../../store/actionConstants"),w=e("../../../helpers/constants/routes"),S=e("../../../helpers/utils/token-util"),k=e("../../../helpers/utils/conversions.util"),I=G(e("../main-quote-summary")),O=e("../../send/send.utils"),C=e("../../confirm-approve/confirm-approve.util"),x=G(e("../../../components/ui/actionable-message/actionable-message")),P=e("../swaps.util"),N=e("../../../hooks/useTokenTracker"),R=e("../../../../shared/constants/swaps"),M=e("../../../../shared/constants/gas"),A=G(e("../countdown-timer")),D=G(e("../swaps-footer")),L=G(e("../../../components/ui/pulse-loader")),q=G(e("../../../components/ui/box")),j=e("../../../../shared/constants/metametrics"),F=e("../../../../shared/modules/string-utils"),U=e("../../../../shared/modules/transaction.utils"),W=G(e("./view-quote-price-difference"));function G(e){return e&&e.__esModule?e:{default:e}}function B(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(B=function(e){return e?n:t})(e)}let H}}},{package:"$root$"}],[8259,{"./token-details-page":8260},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./token-details-page"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[8260,{"../../../shared/constants/network":7322,"../../../shared/modules/string-utils":7343,"../../components/ui/box":7682,"../../components/ui/button":7686,"../../components/ui/icon/copy-icon.component":7726,"../../components/ui/identicon":7755,"../../components/ui/page-container":7791,"../../components/ui/page-container/page-container-header":7795,"../../components/ui/tooltip":7832,"../../components/ui/typography":7836,"../../contexts/i18n":7844,"../../ducks/metamask/metamask":7859,"../../helpers/constants/design-system":7868,"../../helpers/constants/routes":7872,"../../hooks/useCopyToClipboard":7921,"../../hooks/useTokenFiatAmount":7939,"../../hooks/useTokenTracker":7940,"../../selectors":8267,"../../store/actions":8273,react:6817,"react-redux":6775,"react-router-dom":6795},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var e,t,n;const T=(0,r.useDispatch)(),w=(0,o.useHistory)(),S=(0,a.useContext)(c.I18nContext),k=(0,r.useSelector)(i.getTokens),I=(0,r.useSelector)(s.getTokenList),{address:O}=(0,o.useParams)(),C=I[O.toLowerCase()],x=null==C||null===(e=C.aggregators)||void 0===e?void 0:e.join(", "),P=k.find((({address:e})=>(0,E.isEqualCaseInsensitive)(e,O))),{tokensWithBalances:N}=(0,d.useTokenTracker)([P]),R=null===(t=N[0])||void 0===t?void 0:t.string,M=((0,f.useTokenFiatAmount)(null==P?void 0:P.address,R,null==P?void 0:P.symbol),(0,r.useSelector)((e=>({nickname:e.metamask.provider.nickname,type:e.metamask.provider.type})))),{nickname:A,type:D}=M,[L,q]=(0,l.useCopyToClipboard)();if(!P)return a.default.createElement(o.Redirect,{to:{pathname:g.DEFAULT_ROUTE}});return a.default.createElement("div",{className:"page-container send-container"},a.default.createElement(_.default,{className:"send__header",onClose:()=>w.push(`${g.ASSET_ROUTE}/${P.address}`),title:S("tokenDetails"),headerCloseText:S("cancel"),hideClose:!1}),a.default.createElement("div",{className:"settings-page__body"},a.default.createElement("div",{className:"settings-page__content-row"},a.default.createElement("div",{className:"token-details__balance-container"},a.default.createElement("div",{className:"token-details__balance"},R||""),a.default.createElement(u.default,{diameter:32,address:P.address,image:C?C.iconUrl:P.image,className:"token-details__icon"}))),a.default.createElement("div",{className:"settings-page__content-row"},a.default.createElement("div",{className:"settings-page__content-item"},S("tokenContractAddress"),a.default.createElement("div",{className:"settings-page__content-description token-details__token-contract-address"},P.address,a.default.createElement("div",{className:"token-details__copy-icon"},a.default.createElement(h.default,{position:"bottom",title:S(L?"copiedExclamation":"copyToClipboard")},a.default.createElement(v.default,{type:"link",className:"token-details__copyIcon",onClick:()=>{q(P.address)}},a.default.createElement(b.default,{size:11,color:"var(--color-primary-default)"})))))),a.default.createElement("div",{className:"settings-page__content-item"},S("tokenDecimalTitle"),a.default.createElement("div",{className:"settings-page__content-description"},P.decimals)),a.default.createElement("div",{className:"settings-page__content-item"},S("network"),a.default.createElement("div",{className:"settings-page__content-description"},D===m.NETWORK_TYPE_RPC?null!==(n=S(A))&&void 0!==n?n:S("privateNetwork"):S(D))),x&&a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{className:"settings-page__content-item"},S("tokenList"),`${x}.`)))),a.default.createElement(y.PageContainerFooter,{cancelButtonType:"default",onSubmit:()=>{T((0,p.showModal)({name:"HIDE_TOKEN_CONFIRMATION",token:P,history:w}))},submitText:S("hideToken"),hideCancel:!0,buttonSizeLarge:!1}))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=e("react-redux"),o=e("react-router-dom"),i=e("../../ducks/metamask/metamask"),s=e("../../selectors"),l=e("../../hooks/useCopyToClipboard"),u=T(e("../../components/ui/identicon")),c=e("../../contexts/i18n"),d=e("../../hooks/useTokenTracker"),f=e("../../hooks/useTokenFiatAmount"),p=e("../../store/actions"),m=e("../../../shared/constants/network"),g=e("../../helpers/constants/routes"),h=T(e("../../components/ui/tooltip")),v=T(e("../../components/ui/button")),b=T(e("../../components/ui/icon/copy-icon.component")),_=(T(e("../../components/ui/box")),T(e("../../components/ui/typography")),T(e("../../components/ui/page-container/page-container-header"))),y=e("../../components/ui/page-container"),E=(e("../../helpers/constants/design-system"),e("../../../shared/modules/string-utils"));function T(e){return e&&e.__esModule?e:{default:e}}function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}}}},{package:"$root$"}],[8261,{"./unlock-page.container":8263},function(){with(this)return function(){"use strict";return function(e,t,n){var a;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=((a=e("./unlock-page.container"))&&a.__esModule?a:{default:a}).default;n.default=r}}},{package:"$root$"}],[8262,{"../../../shared/constants/metametrics":7321,"../../components/ui/button":7686,"../../components/ui/mascot":7779,"../../components/ui/text-field":7822,"../../helpers/constants/common":7865,"../../helpers/constants/routes":7872,events:2435,"prop-types":5840,react:6817,"textarea-caret":7067},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=e("events"),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),o=p(e("prop-types")),i=p(e("textarea-caret")),s=p(e("../../components/ui/button")),l=p(e("../../components/ui/text-field")),u=p(e("../../components/ui/mascot")),c=e("../../helpers/constants/common"),d=e("../../helpers/constants/routes"),f=e("../../../shared/constants/metametrics");function p(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class h extends r.Component{constructor(...e){super(...e),g(this,"state",{password:"",error:null}),g(this,"submitting",!1),g(this,"failed_attempts",0),g(this,"animationEventEmitter",new a.EventEmitter),g(this,"handleSubmit",(async e=>{e.preventDefault(),e.stopPropagation();const{password:t}=this.state,{onSubmit:n,forceUpdateMetamaskState:a,showOptInModal:r}=this.props;if(""!==t&&!this.submitting){this.setState({error:null}),this.submitting=!0;try{await n(t);const e=await a();this.context.trackEvent({category:f.EVENT.CATEGORIES.NAVIGATION,event:f.EVENT_NAMES.APP_UNLOCKED,properties:{failed_attempts:this.failed_attempts}},{isNewVisit:!0}),null!==e.participateInMetaMetrics&&e.participateInMetaMetrics!==undefined||r()}catch({message:e}){this.failed_attempts+=1,"Incorrect password"===e&&(await a(),this.context.trackEvent({category:f.EVENT.CATEGORIES.NAVIGATION,event:f.EVENT_NAMES.APP_UNLOCKED_FAILED,properties:{reason:"incorrect_password",failed_attempts:this.failed_attempts}})),this.setState({error:e}),this.submitting=!1}}}))}UNSAFE_componentWillMount(){const{isUnlocked:e,history:t}=this.props;e&&t.push(d.DEFAULT_ROUTE)}handleInputChange({target:e}){if(this.setState({password:e.value,error:null}),e.getBoundingClientRect){const t=e,n=t.getBoundingClientRect(),a=(0,i.default)(t,t.selectionEnd);this.animationEventEmitter.emit("point",{x:n.left+a.left-t.scrollLeft,y:n.top+a.top-t.scrollTop})}}renderSubmitButton(){return r.default.createElement(s.default,{type:"submit",style:{backgroundColor:"var(--color-primary-default)",color:"var(--color-primary-inverse)",marginTop:"20px",height:"60px",fontWeight:"400",boxShadow:"none",borderRadius:"100px"},disabled:!this.state.password,variant:"contained",size:"large",onClick:this.handleSubmit},this.context.t("unlock"))}render(){const{password:e,error:t}=this.state,{t:n}=this.context,{onRestore:a}=this.props;return r.default.createElement("div",{className:"unlock-page__container"},r.default.createElement("div",{className:"unlock-page","data-testid":"unlock-page"},r.default.createElement("div",{className:"unlock-page__mascot-container"},r.default.createElement(u.default,{animationEventEmitter:this.animationEventEmitter,width:"0",height:"0"})),r.default.createElement("h1",{className:"unlock-page__title"},n("welcomeBack")),r.default.createElement("div",null,n("unlockMessage")),r.default.createElement("form",{className:"unlock-page__form",onSubmit:this.handleSubmit},r.default.createElement(l.default,{id:"password",label:n("password"),type:"password",value:e,onChange:e=>this.handleInputChange(e),error:t,autoFocus:!0,autoComplete:"current-password",theme:"material",fullWidth:!0})),this.renderSubmitButton(),r.default.createElement("div",{className:"unlock-page__links"},r.default.createElement(s.default,{type:"link",key:"import-account",className:"unlock-page__link",onClick:()=>a()},n("forgotPassword"))),r.default.createElement("div",{className:"unlock-page__support"},n("needHelp",[r.default.createElement("a",{href:c.SUPPORT_LINK,target:"_blank",rel:"noopener noreferrer",key:"need-help-link",onClick:()=>{this.context.trackEvent({category:f.EVENT.CATEGORIES.NAVIGATION,event:f.EVENT_NAMES.SUPPORT_LINK_CLICKED,properties:{url:c.SUPPORT_LINK}},{contextPropsIntoEventProperties:[f.CONTEXT_PROPS.PAGE_TITLE]})}},n("needHelpLinkText"))]))))}}n.default=h,g(h,"contextTypes",{trackEvent:o.default.func,t:o.default.func}),g(h,"propTypes",{history:o.default.object.isRequired,isUnlocked:o.default.bool,onRestore:o.default.func,onSubmit:o.default.func,forceUpdateMetamaskState:o.default.func,showOptInModal:o.default.func})}}},{package:"$root$"}],[8263,{"../../../app/scripts/lib/util":88,"../../../shared/constants/app":7316,"../../helpers/constants/routes":7872,"../../store/actions":8273,"./unlock-page.component":8262,"react-redux":6775,"react-router-dom":6795,redux:6852},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=e("react-redux"),o=e("react-router-dom"),i=e("redux"),s=e("../../../app/scripts/lib/util"),l=e("../../../shared/constants/app"),u=e("../../helpers/constants/routes"),c=e("../../store/actions"),d=(a=e("./unlock-page.component"))&&a.__esModule?a:{default:a};var f=(0,i.compose)(o.withRouter,(0,r.connect)((e=>{const{metamask:{isUnlocked:t}}=e;return{isUnlocked:t}}),(e=>({forgotPassword:()=>e((0,c.forgotPassword)()),tryUnlockMetamask:t=>e((0,c.tryUnlockMetamask)(t)),markPasswordForgotten:()=>e((0,c.markPasswordForgotten)()),forceUpdateMetamaskState:()=>(0,c.forceUpdateMetamaskState)(e),showOptInModal:()=>e((0,c.showModal)({name:"METAMETRICS_OPT_IN_MODAL"}))})),((e,t,n)=>{const{markPasswordForgotten:a,tryUnlockMetamask:r,...o}=t,{history:i,onSubmit:c,...d}=n;return{...e,...o,...d,onRestore:async()=>{await a(),i.push(u.RESTORE_VAULT_ROUTE),(0,s.getEnvironmentType)()===l.ENVIRONMENT_TYPE_POPUP&&global.platform.openExtensionInBrowser(u.RESTORE_VAULT_ROUTE)},onSubmit:c||(async e=>{await r(e),i.push(u.DEFAULT_ROUTE)}),history:i}})))(d.default);n.default=f}}},{package:"$root$"}],[8274,{"../ducks":7857,redux:6852,"redux-thunk":6851,"remote-redux-devtools":2432},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){let t=(0,a.applyMiddleware)(r.default);0;return(0,a.createStore)(o.default,e,t)};var a=e("redux"),r=i(e("redux-thunk")),o=(e("remote-redux-devtools"),i(e("../ducks")));function i(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$"}],[928,{"@formatjs/intl-utils":932},function(){with(this)return function(){"use strict";return function(e,t,n){var a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],a=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var r=e("@formatjs/intl-utils");var o=/^[a-z0-9]{3,8}(-[a-z0-9]{3,8})*$/i;function i(e){return e+""}function s(e,t,n,o){if(r.invariant("number"==typeof n,"value must be number, instead got "+typeof n,TypeError),r.invariant("string"==typeof o,"unit must be number, instead got "+typeof n,TypeError),isNaN(n)||n===Infinity||n===-Infinity)throw new RangeError("Invalid value "+n);var s=function(e){if(r.invariant("string"==typeof e,"unit must be a string, instead got "+typeof e,TypeError),"seconds"===e)return"second";if("minutes"===e)return"minute";if("hours"===e)return"hour";if("days"===e)return"day";if("weeks"===e)return"week";if("months"===e)return"month";if("quarters"===e)return"quarter";if("years"===e)return"year";if("second"!==e&&"minute"!==e&&"hour"!==e&&"day"!==e&&"week"!==e&&"month"!==e&&"quarter"!==e&&"year"!==e)throw new RangeError("Invalid unit "+e);return e}(o),l=r.getInternalSlot(e,t,"fields"),u=r.getInternalSlot(e,t,"style"),c=s;"short"===u?c=o+"-short":"narrow"===u&&(c=o+"-narrow"),c in l||(c=o);var d=l[c];if("auto"===r.getInternalSlot(e,t,"numeric")&&i(n)in d)return[{type:"literal",value:d[i(n)]}];var f,p,m="future";f=n,p=-0,((Object.is?Object.is(f,p):f===p?0!==f||1/f==1/p:f!=f&&p!=p)||n<0)&&(m="past");var g=d[m],h=r.getInternalSlot(e,t,"pluralRules"),v=r.getInternalSlot(e,t,"numberFormat"),b="function"==typeof v.formatToParts?v.formatToParts(Math.abs(n)):[{type:"literal",value:v.format(Math.abs(n)),unit:o}];return function(e,t,n){var o,i,s,l,u=r.partitionPattern(e),c=[];try{for(var d=a(u),f=d.next();!f.done;f=d.next()){var p=f.value;if(r.isLiteralPart(p))c.push({type:"literal",value:p.value});else{r.invariant("0"===p.type,"Malformed pattern "+e);try{for(var m=(s=void 0,a(n)),g=m.next();!g.done;g=m.next()){var h=g.value;c.push({type:h.type,value:h.value,unit:t})}}catch(e){s={error:e}}finally{try{g&&!g.done&&(l=m.return)&&l.call(m)}finally{if(s)throw s.error}}}}}catch(e){o={error:e}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(o)throw o.error}}return c}(g[h.select(n)],s,b)}var l=function(){function e(t,n){if(!(this&&this instanceof e?this.constructor:void 0))throw new TypeError("Intl.RelativeTimeFormat must be called with 'new'");r.setInternalSlot(e.__INTERNAL_SLOT_MAP__,this,"initializedRelativeTimeFormat",!0);var a=Intl.getCanonicalLocales(t),i=Object.create(null),s=n===undefined?Object.create(null):r.toObject(n),l=r.getOption(s,"localeMatcher","string",["best fit","lookup"],"best fit");i.localeMatcher=l;var u=r.getOption(s,"numberingSystem","string",undefined,undefined);if(u!==undefined&&!o.test(u))throw new RangeError("Invalid numbering system "+u);i.nu=u;var c=r.createResolveLocale(e.getDefaultLocale)(e.availableLocales,a,i,e.relevantExtensionKeys,e.localeData),d=c.locale,f=c.nu;r.setInternalSlot(e.__INTERNAL_SLOT_MAP__,this,"locale",d),r.setInternalSlot(e.__INTERNAL_SLOT_MAP__,this,"style",r.getOption(s,"style","string",["long","narrow","short"],"long")),r.setInternalSlot(e.__INTERNAL_SLOT_MAP__,this,"numeric",r.getOption(s,"numeric","string",["always","auto"],"always")),r.setInternalSlot(e.__INTERNAL_SLOT_MAP__,this,"fields",e.localeData[d]),r.setInternalSlot(e.__INTERNAL_SLOT_MAP__,this,"numberFormat",new Intl.NumberFormat(t)),r.setInternalSlot(e.__INTERNAL_SLOT_MAP__,this,"pluralRules",new Intl.PluralRules(t)),r.setInternalSlot(e.__INTERNAL_SLOT_MAP__,this,"numberingSystem",f)}return e.prototype.format=function(t,n){if("object"!=typeof this)throw new TypeError("format was called on a non-object");if(!r.getInternalSlot(e.__INTERNAL_SLOT_MAP__,this,"initializedRelativeTimeFormat"))throw new TypeError("format was called on a invalid context");return s(e.__INTERNAL_SLOT_MAP__,this,Number(t),i(n)).map((function(e){return e.value})).join("")},e.prototype.formatToParts=function(t,n){if("object"!=typeof this)throw new TypeError("formatToParts was called on a non-object");if(!r.getInternalSlot(e.__INTERNAL_SLOT_MAP__,this,"initializedRelativeTimeFormat"))throw new TypeError("formatToParts was called on a invalid context");return s(e.__INTERNAL_SLOT_MAP__,this,Number(t),i(n))},e.prototype.resolvedOptions=function(){if("object"!=typeof this)throw new TypeError("resolvedOptions was called on a non-object");if(!r.getInternalSlot(e.__INTERNAL_SLOT_MAP__,this,"initializedRelativeTimeFormat"))throw new TypeError("resolvedOptions was called on a invalid context");return{locale:r.getInternalSlot(e.__INTERNAL_SLOT_MAP__,this,"locale"),style:r.getInternalSlot(e.__INTERNAL_SLOT_MAP__,this,"style"),numeric:r.getInternalSlot(e.__INTERNAL_SLOT_MAP__,this,"numeric"),numberingSystem:r.getInternalSlot(e.__INTERNAL_SLOT_MAP__,this,"numberingSystem")}},e.supportedLocalesOf=function(t,n){return r.supportedLocales(e.availableLocales,Intl.getCanonicalLocales(t),n)},e.__addLocaleData=function(){for(var t,n,o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var s=function(t){t.availableLocales.forEach((function(n){try{e.localeData[n]=r.unpackData(n,t)}catch(e){if(r.isMissingLocaleDataError(e))return;throw e}}))};try{for(var l=a(o),u=l.next();!u.done;u=l.next()){var c=u.value;s(c)}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}e.availableLocales=Object.keys(e.localeData),e.__defaultLocale||(e.__defaultLocale=e.availableLocales[0])},e.getDefaultLocale=function(){return e.__defaultLocale},e.localeData={},e.availableLocales=[],e.__defaultLocale="en",e.relevantExtensionKeys=["nu"],e.polyfilled=!0,e.__INTERNAL_SLOT_MAP__=new WeakMap,e}();n.default=l;try{"undefined"!=typeof Symbol&&Object.defineProperty(l.prototype,Symbol.toStringTag,{value:"Intl.RelativeTimeFormat",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype.constructor,"length",{value:0,writable:!1,enumerable:!1,configurable:!0}),Object.defineProperty(l.supportedLocalesOf,"length",{value:1,writable:!1,enumerable:!1,configurable:!0})}catch(e){}}}},{package:"@formatjs/intl-relativetimeformat"}],[929,{"./core":928},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var a=e("./core");"RelativeTimeFormat"in Intl||Object.defineProperty(Intl,"RelativeTimeFormat",{value:a.default,writable:!0,enumerable:!1,configurable:!0})}}},{package:"@formatjs/intl-relativetimeformat"}],[930,{"./dist/polyfill":929},function(){with(this)return function(){"use strict";return function(e,t,n){e("./dist/polyfill")}}},{package:"@formatjs/intl-relativetimeformat"}],[931,{},function(){with(this)return function(){"use strict";return function(e,t,n){var a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},a.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0});n.selectUnit=function(e,t,r){void 0===t&&(t=Date.now()),void 0===r&&(r={});var o=a(a({},n.DEFAULT_THRESHOLDS),r||{}),i=(+e-+t)/1e3;if(Math.abs(i)<o.second)return{value:Math.round(i),unit:"second"};var s=i/60;if(Math.abs(s)<o.minute)return{value:Math.round(s),unit:"minute"};var l=i/3600;if(Math.abs(l)<o.hour)return{value:Math.round(l),unit:"hour"};var u=i/86400;if(Math.abs(u)<o.day)return{value:Math.round(u),unit:"day"};var c=new Date(e),d=new Date(t),f=c.getFullYear()-d.getFullYear();if(Math.round(Math.abs(f))>0)return{value:Math.round(f),unit:"year"};var p=12*f+c.getMonth()-d.getMonth();if(Math.round(Math.abs(p))>0)return{value:Math.round(p),unit:"month"};var m=i/604800;return{value:Math.round(m),unit:"week"}},n.DEFAULT_THRESHOLDS={second:45,minute:45,hour:22,day:5}}}},{package:"@formatjs/intl-relativetimeformat>@formatjs/intl-utils"}],[932,{"./diff":931,"./invariant":933,"./polyfill-utils":934,"./resolve-locale":935,"./units":936},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var a=e("./diff");n.selectUnit=a.selectUnit;var r=e("./polyfill-utils");n.defaultNumberOption=r.defaultNumberOption,n.getInternalSlot=r.getInternalSlot,n.getMultiInternalSlots=r.getMultiInternalSlots,n.getNumberOption=r.getNumberOption,n.getOption=r.getOption,n.isLiteralPart=r.isLiteralPart,n.partitionPattern=r.partitionPattern,n.setInternalSlot=r.setInternalSlot,n.setMultiInternalSlots=r.setMultiInternalSlots,n.setNumberFormatDigitOptions=r.setNumberFormatDigitOptions,n.toObject=r.toObject,n.objectIs=r.objectIs,n.isWellFormedCurrencyCode=r.isWellFormedCurrencyCode,n.toString=r.toString,n.formatNumericToString=r.formatNumericToString,n.toRawFixed=r.toRawFixed,n.toRawPrecision=r.toRawPrecision,n.getMagnitude=r.getMagnitude,n.repeat=r.repeat,Object.defineProperty(n,"hasOwnProperty",{value:r.hasOwnProperty}),n.isWellFormedUnitIdentifier=r.isWellFormedUnitIdentifier,n.defineProperty=r.defineProperty;var o=e("./resolve-locale");n.createResolveLocale=o.createResolveLocale,n.getLocaleHierarchy=o.getLocaleHierarchy,n.supportedLocales=o.supportedLocales,n.unpackData=o.unpackData,n.isMissingLocaleDataError=o.isMissingLocaleDataError,function(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}(e("./units"));var i=e("./units");n.removeUnitNamespace=i.removeUnitNamespace;var s=e("./invariant");n.invariant=s.invariant}}},{package:"@formatjs/intl-relativetimeformat>@formatjs/intl-utils"}],[933,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.invariant=function(e,t,n){if(void 0===n&&(n=Error),!e)throw new n(t)}}}},{package:"@formatjs/intl-relativetimeformat>@formatjs/intl-utils"}],[934,{"./invariant":933,"./units":936},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var a=e("./invariant"),r=e("./units");function o(e){if("symbol"==typeof e)throw TypeError("Cannot convert a Symbol value to a string");return String(e)}function i(e,t,n,a){if(e!==undefined){if(e=Number(e),isNaN(e)||e<t||e>n)throw new RangeError(e+" is outside of range ["+t+", "+n+"]");return Math.floor(e)}return a}function s(e,t,n,a,r){return i(e[t],n,a,r)}function l(e,t,n,a){e.get(t)||e.set(t,Object.create(null)),e.get(t)[n]=a}function u(e,t){for(var n=[],a=2;a<arguments.length;a++)n[a-2]=arguments[a];var r=e.get(t);if(!r)throw new TypeError(t+" InternalSlot has not been initialized");return n.reduce((function(e,t){return e[t]=r[t],e}),Object.create(null))}function c(e,t){return Object.is?Object.is(e,t):e===t?0!==e||1/e==1/t:e!=e&&t!=t}Object.defineProperty(n,"hasOwnProperty",{value:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}),n.toObject=function(e){if(null==e)throw new TypeError("undefined/null cannot be converted to object");return Object(e)},n.toString=o,n.getOption=function(e,t,n,a,r){var i=e[t];if(i!==undefined){if("boolean"!==n&&"string"!==n)throw new TypeError("invalid type");if("boolean"===n&&(i=Boolean(i)),"string"===n&&(i=o(i)),a!==undefined&&!a.filter((function(e){return e==i})).length)throw new RangeError(i+" is not within "+a.join(", "));return i}return r},n.defaultNumberOption=i,n.getNumberOption=s,n.setInternalSlot=l,n.setMultiInternalSlots=function(e,t,n){for(var a=0,r=Object.keys(n);a<r.length;a++){var o=r[a];l(e,t,o,n[o])}},n.getInternalSlot=function(e,t,n){return u(e,t,n)[n]},n.getMultiInternalSlots=u,n.isLiteralPart=function(e){return"literal"===e.type},n.partitionPattern=function(e){for(var t=[],n=e.indexOf("{"),r=0,o=0,i=e.length;n<e.length&&n>-1;)r=e.indexOf("}",n),a.invariant(r>n,"Invalid pattern "+e),n>o&&t.push({type:"literal",value:e.substring(o,n)}),t.push({type:e.substring(n+1,r),value:undefined}),o=r+1,n=e.indexOf("{",o);return o<i&&t.push({type:"literal",value:e.substring(o,i)}),t},n.setNumberFormatDigitOptions=function(e,t,n,a,r){var o=s(t,"minimumIntegerDigits",1,21,1),l=t.minimumFractionDigits,u=t.maximumFractionDigits,c=t.minimumSignificantDigits,d=t.maximumSignificantDigits;if(e.minimumIntegerDigits=o,c!==undefined||d!==undefined)e.roundingType="significantDigits",c=i(c,1,21,1),d=i(d,c,21,21),e.minimumSignificantDigits=c,e.maximumSignificantDigits=d;else if(l!==undefined||u!==undefined){e.roundingType="fractionDigits",l=i(l,0,20,n),u=i(u,l,20,Math.max(l,a)),e.minimumFractionDigits=l,e.maximumFractionDigits=u}else"compact"===r?e.roundingType="compactRounding":(e.roundingType="fractionDigits",e.minimumFractionDigits=n,e.maximumFractionDigits=a)},n.objectIs=c;var d=/[^A-Z]/;function f(e,t,n){var a,r,o=n,i=Math.round(e*Math.pow(10,o)),s=i/Math.pow(10,o);if(i<1e21)a=i.toString();else{var l=(a=i.toString()).split("e"),u=l[0],c=l[1];a=u.replace(".",""),a+=m("0",Math.max(+c-a.length+1,0))}if(0!==o){var d=a.length;if(d<=o)a=m("0",o+1-d)+a,d=o+1;var f=a.slice(0,d-o),p=a.slice(d-o);a=f+"."+p,r=f.length}else r=a.length;for(var g=n-t;g>0&&"0"===a[a.length-1];)a=a.slice(0,-1),g--;return"."===a[a.length-1]&&(a=a.slice(0,-1)),{formattedString:a,roundedNumber:s,integerDigitsCount:r}}function p(e,t,n){var a,r,o,i,s=n;if(0===e)a=m("0",s),r=0,o=0;else{var l=e.toString(),u=l.indexOf("e"),c=l.split("e"),d=c[0],f=c[1],p=d.replace(".","");if(u>=0&&p.length<=s)r=+f,a=p+m("0",s-p.length),o=e;else{var h=(r=g(e))-s+1,v=Math.round(_(e,h));_(v,s-1)>=10&&(r+=1,v=Math.floor(v/10)),a=v.toString(),o=_(v,s-1-r)}}if(r>=s-1?(a+=m("0",r-s+1),i=r+1):r>=0?(a=a.slice(0,r+1)+"."+a.slice(r+1),i=r+1):(a="0."+m("0",-r-1)+a,i=1),a.indexOf(".")>=0&&n>t){for(var b=n-t;b>0&&"0"===a[a.length-1];)a=a.slice(0,-1),b--;"."===a[a.length-1]&&(a=a.slice(0,-1))}return{formattedString:a,roundedNumber:o,integerDigitsCount:i};function _(e,t){return t<0?e*Math.pow(10,-t):e/Math.pow(10,t)}}function m(e,t){if("function"==typeof e.repeat)return e.repeat(t);for(var n=new Array(t),a=0;a<n.length;a++)n[a]=e;return n.join("")}function g(e){return Math.floor(Math.log(e)*Math.LOG10E)}n.isWellFormedCurrencyCode=function(e){return 3===(e=e.replace(/([a-z])/g,(function(e,t){return t.toUpperCase()}))).length&&!d.test(e)},n.formatNumericToString=function(e,t){var n,a=t<0||c(t,-0);switch(a&&(t=-t),e.roundingType){case"significantDigits":n=p(t,e.minimumSignificantDigits,e.maximumSignificantDigits);break;case"fractionDigits":n=f(t,e.minimumFractionDigits,e.maximumFractionDigits);break;default:(n=p(t,1,2)).integerDigitsCount>1&&(n=f(t,0,0))}t=n.roundedNumber;var r=n.formattedString,o=n.integerDigitsCount,i=e.minimumIntegerDigits;return o<i&&(r=m("0",i-o)+r),a&&(t=-t),{roundedNumber:t,formattedString:r}},n.toRawFixed=f,n.toRawPrecision=p,n.repeat=m,n.getMagnitude=g;var h=r.SANCTIONED_UNITS.map((function(e){return e.replace(/^(.*?)-/,"")}));n.isWellFormedUnitIdentifier=function(e){if(e=e.replace(/([A-Z])/g,(function(e,t){return t.toLowerCase()})),h.indexOf(e)>-1)return!0;var t=e.split("-per-");return 2===t.length&&!(h.indexOf(t[0])<0||h.indexOf(t[1])<0)},n.defineProperty=function(e,t,n){var a=n.value;Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:a})}}}},{package:"@formatjs/intl-relativetimeformat>@formatjs/intl-utils"}],[935,{"./invariant":933,"./polyfill-utils":934},function(){with(this)return function(){"use strict";return function(e,t,n){var a,r=this&&this.__extends||(a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},a(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},o.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./invariant"),s=e("./polyfill-utils");function l(e,t){i.invariant(2===t.length,"key must have 2 elements");var n=e.length,a="-"+t+"-",r=e.indexOf(a);if(-1!==r){for(var o=r+4,s=o,l=o,u=!1;!u;){var c=e.indexOf("-",l);2===(-1===c?n-l:c-l)?u=!0:-1===c?(s=n,u=!0):(s=c,l=c+1)}return e.slice(o,s)}return a="-"+t,-1!==(r=e.indexOf(a))&&r+3===n?"":undefined}n.createResolveLocale=function(e){var t=function(e){return function(t,n){for(var a={locale:""},r=0,o=n;r<o.length;r++){var i=o[r],s=i.replace(u,""),l=c(t,s);if(l)return a.locale=l,i!==s&&(a.extension=i.slice(s.length+1,i.length)),a}return a.locale=e(),a}}(e),n=function(e){return function(t,n){for(var a={locale:""},r=0,o=n;r<o.length;r++){var i=o[r],s=i.replace(u,""),l=c(t,s);if(l)return a.locale=l,i!==s&&(a.extension=i.slice(s.length+1,i.length)),a}return a.locale=e(),a}}(e);return function(e,a,r,o,s){for(var u,c=(u="lookup"===r.localeMatcher?t(e,a):n(e,a)).locale,d={locale:"",dataLocale:c},f="-u",p=0,m=o;p<m.length;p++){var g=m[p],h=s[c];i.invariant("object"==typeof h&&null!==h,"locale data "+g+" must be an object");var v=h[g];i.invariant(Array.isArray(v),"keyLocaleData for "+g+" must be an array");var b=v[0];i.invariant("string"==typeof b||null===b,"value must be string or null");var _="";if(u.extension){var y=l(u.extension,g);y!==undefined&&(""!==y?~v.indexOf(y)&&(_="-"+g+"-"+(b=y)):~y.indexOf("true")&&(b="true",_="-"+g))}if(g in r){var E=r[g];i.invariant("string"==typeof E||null==E,"optionsValue must be String, Undefined or Null"),~v.indexOf(E)&&E!==b&&(b=E,_="")}d[g]=b,f+=_}if(f.length>2){var T=c.indexOf("-x-");if(-1===T)c+=f;else{var w=c.slice(0,T),S=c.slice(T,c.length);c=w+f+S}c=Intl.getCanonicalLocales(c)[0]}return d.locale=c,d}};var u=/-u(?:-[0-9a-z]{2,8})+/gi;function c(e,t){for(var n=t;;){if(~e.indexOf(n))return n;var a=n.lastIndexOf("-");if(!~a)return undefined;a>=2&&"-"===n[a-2]&&(a-=2),n=n.slice(0,a)}}function d(e){for(var t=[e],n=e.split("-"),a=n.length;a>1;a--)t.push(n.slice(0,a-1).join("-"));return t}function f(e,t){for(var n=[],a=0,r=t;a<r.length;a++){var o=c(e,r[a].replace(u,""));o&&n.push(o)}return n}n.getLocaleHierarchy=d,n.supportedLocales=function(e,t,n){return n!==undefined&&(n=s.toObject(n),s.getOption(n,"localeMatcher","string",["lookup","best fit"],"best fit")),f(e,t)};var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="MISSING_LOCALE_DATA",t}return r(t,e),t}(Error);n.isMissingLocaleDataError=function(e){return"MISSING_LOCALE_DATA"===e.type},n.unpackData=function(e,t,n){void 0===n&&(n=function(e,t){return o(o({},e),t)});var a=d(e),r=a.map((function(e){return t.data[e]})).filter(Boolean);if(!r.length)throw new p('Missing locale data for "'+e+'", lookup hierarchy: '+a.join(", "));return r.reverse(),r.reduce(n,{})}}}},{package:"@formatjs/intl-relativetimeformat>@formatjs/intl-utils"}],[936,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SANCTIONED_UNITS=["angle-degree","area-acre","area-hectare","concentr-percent","digital-bit","digital-byte","digital-gigabit","digital-gigabyte","digital-kilobit","digital-kilobyte","digital-megabit","digital-megabyte","digital-petabyte","digital-terabit","digital-terabyte","duration-day","duration-hour","duration-millisecond","duration-minute","duration-month","duration-second","duration-week","duration-year","length-centimeter","length-foot","length-inch","length-kilometer","length-meter","length-mile-scandinavian","length-mile","length-millimeter","length-yard","mass-gram","mass-kilogram","mass-ounce","mass-pound","mass-stone","temperature-celsius","temperature-fahrenheit","volume-fluid-ounce","volume-gallon","volume-liter","volume-milliliter"],n.removeUnitNamespace=function(e){return e.replace(/^(.*?)-/,"")}}}},{package:"@formatjs/intl-relativetimeformat>@formatjs/intl-utils"}],[951,{"@keystonehq/bc-ur-registry":968,buffer:2434,"ethereumjs-util":2891,hdkey:4812,uuid:7148},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0});var a,r=e("@keystonehq/bc-ur-registry"),o=e("uuid"),i=(a=e("hdkey"))&&"object"==typeof a&&"default"in a?a.default:a,s=e("ethereumjs-util");const{RegistryType:l}=r.extend,u={ETH_SIGN_REQUEST:new l("eth-sign-request",401),ETH_SIGNATAURE:new l("eth-signature",402)},{decodeToDataItem:c,RegistryTypes:d}=r.extend;var f,p;!function(e){e[e.requestId=1]="requestId",e[e.signData=2]="signData",e[e.dataType=3]="dataType",e[e.chainId=4]="chainId",e[e.derivationPath=5]="derivationPath",e[e.address=6]="address",e[e.origin=7]="origin"}(f||(f={})),(p=n.DataType||(n.DataType={}))[p.transaction=1]="transaction",p[p.typedData=2]="typedData",p[p.personalMessage=3]="personalMessage",p[p.typedTransaction=4]="typedTransaction";class m extends r.RegistryItem{constructor(e){super(),this.getRegistryType=()=>u.ETH_SIGN_REQUEST,this.setupData=e=>{this.requestId=e.requestId,this.signData=e.signData,this.dataType=e.dataType,this.chainId=e.chainId,this.derivationPath=e.derivationPath,this.address=e.address,this.origin=e.origin},this.getRequestId=()=>this.requestId,this.getSignData=()=>this.signData,this.getDataType=()=>this.dataType,this.getChainId=()=>this.chainId,this.getDerivationPath=()=>this.derivationPath.getPath(),this.getSignRequestAddress=()=>this.address,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};this.requestId&&(e[f.requestId]=new r.DataItem(this.requestId,d.UUID.getTag())),this.address&&(e[f.address]=this.address),this.chainId&&(e[f.chainId]=this.chainId),this.origin&&(e[f.origin]=this.origin),e[f.signData]=this.signData,e[f.dataType]=this.dataType;const t=this.derivationPath.toDataItem();return t.setTag(this.derivationPath.getRegistryType().getTag()),e[f.derivationPath]=t,new r.DataItem(e)},this.setupData(e)}static constructETHRequest(e,n,a,i,s,l,u,c){const d=a.replace(/[m|M]\//,"").split("/"),f=new r.CryptoKeypath(d.map((e=>{const t=parseInt(e.replace("'",""));let n=!1;return e.endsWith("'")&&(n=!0),new r.PathComponent({index:t,hardened:n})})),t.from(i,"hex"));return new m({requestId:s?t.from(o.parse(s)):undefined,signData:e,dataType:n,derivationPath:f,chainId:l,address:u?t.from(u.replace("0x",""),"hex"):undefined,origin:c||undefined})}}m.fromDataItem=e=>{const t=e.getData(),n=t[f.signData],a=t[f.dataType],o=r.CryptoKeypath.fromDataItem(t[f.derivationPath]),i=t[f.chainId]?t[f.chainId]:undefined,s=t[f.address]?t[f.address]:undefined,l=t[f.requestId]?t[f.requestId].getData():undefined,u=t[f.origin]?t[f.origin]:undefined;return new m({requestId:l,signData:n,dataType:a,chainId:i,derivationPath:o,address:s,origin:u})},m.fromCBOR=e=>{const t=c(e);return m.fromDataItem(t)};const{RegistryTypes:g,decodeToDataItem:h}=r.extend;var v;!function(e){e[e.requestId=1]="requestId",e[e.signature=2]="signature"}(v||(v={}));class b extends r.RegistryItem{constructor(e,t){super(),this.getRegistryType=()=>u.ETH_SIGNATAURE,this.getRequestId=()=>this.requestId,this.getSignature=()=>this.signature,this.toDataItem=()=>{const e={};return this.requestId&&(e[v.requestId]=new r.DataItem(this.requestId,g.UUID.getTag())),e[v.signature]=this.signature,new r.DataItem(e)},this.signature=e,this.requestId=t}}b.fromDataItem=e=>{const t=e.getData(),n=t[v.signature],a=t[v.requestId]?t[v.requestId].getData():undefined;return new b(n,a)},b.fromCBOR=e=>{const t=h(e);return b.fromDataItem(t)};const _=(e,t)=>{const n=i.fromExtendedKey(e).derive(t),a="0x"+s.publicToAddress(n.publicKey,!0).toString("hex");return s.toChecksumAddress(a)},{cbor:y}=r.extend;y.patchTags(Object.values(u).filter((e=>!!e.getTag())).map((e=>e.getTag()))),Object.keys(r).forEach((function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})})),n.ETHSignature=b,n.EthSignRequest=m,n.findHDpatfromAddress=(e,t,n,a)=>{for(let r=0;r<n;r++){const n=_(t,`M/0/${r}`);if(e.toLowerCase()==n.toLowerCase())return`${a}/0/${r}`}return null},n.generateAddressfromXpub=_}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/bc-ur-registry-eth"}],[952,{"@keystonehq/bc-ur-registry":968,buffer:2434,"ethereumjs-util":2891,hdkey:4812,uuid:7148},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0});var a,r=e("@keystonehq/bc-ur-registry"),o=e("uuid"),i=(a=e("hdkey"))&&"object"==typeof a&&"default"in a?a.default:a,s=e("ethereumjs-util");const{RegistryType:l}=r.extend,u={ETH_SIGN_REQUEST:new l("eth-sign-request",401),ETH_SIGNATAURE:new l("eth-signature",402)},{decodeToDataItem:c,RegistryTypes:d}=r.extend;var f,p;!function(e){e[e.requestId=1]="requestId",e[e.signData=2]="signData",e[e.dataType=3]="dataType",e[e.chainId=4]="chainId",e[e.derivationPath=5]="derivationPath",e[e.address=6]="address",e[e.origin=7]="origin"}(f||(f={})),(p=n.DataType||(n.DataType={}))[p.transaction=1]="transaction",p[p.typedData=2]="typedData",p[p.personalMessage=3]="personalMessage",p[p.typedTransaction=4]="typedTransaction";class m extends r.RegistryItem{constructor(e){super(),this.getRegistryType=()=>u.ETH_SIGN_REQUEST,this.setupData=e=>{this.requestId=e.requestId,this.signData=e.signData,this.dataType=e.dataType,this.chainId=e.chainId,this.derivationPath=e.derivationPath,this.address=e.address,this.origin=e.origin},this.getRequestId=()=>this.requestId,this.getSignData=()=>this.signData,this.getDataType=()=>this.dataType,this.getChainId=()=>this.chainId,this.getDerivationPath=()=>this.derivationPath.getPath(),this.getSignRequestAddress=()=>this.address,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};this.requestId&&(e[f.requestId]=new r.DataItem(this.requestId,d.UUID.getTag())),this.address&&(e[f.address]=this.address),this.chainId&&(e[f.chainId]=this.chainId),this.origin&&(e[f.origin]=this.origin),e[f.signData]=this.signData,e[f.dataType]=this.dataType;const t=this.derivationPath.toDataItem();return t.setTag(this.derivationPath.getRegistryType().getTag()),e[f.derivationPath]=t,new r.DataItem(e)},this.setupData(e)}static constructETHRequest(e,n,a,i,s,l,u,c){const d=a.replace(/[m|M]\//,"").split("/"),f=new r.CryptoKeypath(d.map((e=>{const t=parseInt(e.replace("'",""));let n=!1;return e.endsWith("'")&&(n=!0),new r.PathComponent({index:t,hardened:n})})),t.from(i,"hex"));return new m({requestId:s?t.from(o.parse(s)):void 0,signData:e,dataType:n,derivationPath:f,chainId:l,address:u?t.from(u.replace("0x",""),"hex"):void 0,origin:c||void 0})}}m.fromDataItem=e=>{const t=e.getData(),n=t[f.signData],a=t[f.dataType],o=r.CryptoKeypath.fromDataItem(t[f.derivationPath]),i=t[f.chainId]?t[f.chainId]:void 0,s=t[f.address]?t[f.address]:void 0,l=t[f.requestId]?t[f.requestId].getData():void 0;return new m({requestId:l,signData:n,dataType:a,chainId:i,derivationPath:o,address:s,origin:t[f.origin]?t[f.origin]:void 0})},m.fromCBOR=e=>{const t=c(e);return m.fromDataItem(t)};const{RegistryTypes:g,decodeToDataItem:h}=r.extend;var v;!function(e){e[e.requestId=1]="requestId",e[e.signature=2]="signature"}(v||(v={}));class b extends r.RegistryItem{constructor(e,t){super(),this.getRegistryType=()=>u.ETH_SIGNATAURE,this.getRequestId=()=>this.requestId,this.getSignature=()=>this.signature,this.toDataItem=()=>{const e={};return this.requestId&&(e[v.requestId]=new r.DataItem(this.requestId,g.UUID.getTag())),e[v.signature]=this.signature,new r.DataItem(e)},this.signature=e,this.requestId=t}}b.fromDataItem=e=>{const t=e.getData(),n=t[v.signature],a=t[v.requestId]?t[v.requestId].getData():void 0;return new b(n,a)},b.fromCBOR=e=>{const t=h(e);return b.fromDataItem(t)};const _=(e,t)=>{const n=i.fromExtendedKey(e).derive(t),a="0x"+s.publicToAddress(n.publicKey,!0).toString("hex");return s.toChecksumAddress(a)},{cbor:y}=r.extend;y.patchTags(Object.values(u).filter((e=>!!e.getTag())).map((e=>e.getTag()))),Object.keys(r).forEach((function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})})),n.ETHSignature=b,n.EthSignRequest=m,n.findHDpatfromAddress=(e,t,n,a)=>{for(let r=0;r<n;r++){const n=_(t,"M/0/"+r);if(e.toLowerCase()==n.toLowerCase())return`${a}/0/${r}`}return null},n.generateAddressfromXpub=_}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/bc-ur-registry-eth"}],[953,{"./bc-ur-registry-eth.cjs.development.js":951,"./bc-ur-registry-eth.cjs.production.min.js":952},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=e("./bc-ur-registry-eth.cjs.production.min.js")}}},{package:"@keystonehq/bc-ur-registry-eth"}],[987,{"../Collapse":1042,"../Paper":1156,"../styles/withStyles":1318,"../utils/useControlled":1341,"./AccordionContext":988,"@babel/runtime/helpers/extends":305,"@babel/runtime/helpers/interopRequireDefault":310,"@babel/runtime/helpers/interopRequireWildcard":311,"@babel/runtime/helpers/objectWithoutProperties":319,"@babel/runtime/helpers/slicedToArray":324,"@babel/runtime/helpers/toArray":326,"@material-ui/utils":1409,clsx:2486,"prop-types":5840,react:6817,"react-is":6754},function(){with(this)return function(){"use strict";return function(e,t,n){var a=e("@babel/runtime/helpers/interopRequireWildcard"),r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.styles=void 0;var o=r(e("@babel/runtime/helpers/extends")),i=r(e("@babel/runtime/helpers/toArray")),s=r(e("@babel/runtime/helpers/slicedToArray")),l=r(e("@babel/runtime/helpers/objectWithoutProperties")),u=a(e("react")),c=(e("react-is"),r(e("prop-types")),r(e("clsx"))),d=(e("@material-ui/utils"),r(e("../Collapse"))),f=r(e("../Paper")),p=r(e("../styles/withStyles")),m=r(e("./AccordionContext")),g=r(e("../utils/useControlled")),h=function(e){var t={duration:e.transitions.duration.shortest};return{root:{position:"relative",transition:e.transitions.create(["margin"],t),"&:before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:e.palette.divider,transition:e.transitions.create(["opacity","background-color"],t)},"&:first-child":{"&:before":{display:"none"}},"&$expanded":{margin:"16px 0","&:first-child":{marginTop:0},"&:last-child":{marginBottom:0},"&:before":{opacity:0}},"&$expanded + &":{"&:before":{display:"none"}},"&$disabled":{backgroundColor:e.palette.action.disabledBackground}},rounded:{borderRadius:0,"&:first-child":{borderTopLeftRadius:e.shape.borderRadius,borderTopRightRadius:e.shape.borderRadius},"&:last-child":{borderBottomLeftRadius:e.shape.borderRadius,borderBottomRightRadius:e.shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}},expanded:{},disabled:{}}};n.styles=h;var v=u.forwardRef((function(e,t){var n=e.children,a=e.classes,r=e.className,p=e.defaultExpanded,h=void 0!==p&&p,v=e.disabled,b=void 0!==v&&v,_=e.expanded,y=e.onChange,E=e.square,T=void 0!==E&&E,w=e.TransitionComponent,S=void 0===w?d.default:w,k=e.TransitionProps,I=(0,l.default)(e,["children","classes","className","defaultExpanded","disabled","expanded","onChange","square","TransitionComponent","TransitionProps"]),O=(0,g.default)({controlled:_,default:h,name:"Accordion",state:"expanded"}),C=(0,s.default)(O,2),x=C[0],P=C[1],N=u.useCallback((function(e){P(!x),y&&y(e,!x)}),[x,y,P]),R=u.Children.toArray(n),M=(0,i.default)(R),A=M[0],D=M.slice(1),L=u.useMemo((function(){return{expanded:x,disabled:b,toggle:N}}),[x,b,N]);return u.createElement(f.default,(0,o.default)({className:(0,c.default)(a.root,r,x&&a.expanded,b&&a.disabled,!T&&a.rounded),ref:t,square:T},I),u.createElement(m.default.Provider,{value:L},A),u.createElement(S,(0,o.default)({in:x,timeout:"auto"},k),u.createElement("div",{"aria-labelledby":A.props.id,id:A.props["aria-controls"],role:"region"},D)))})),b=(0,p.default)(h,{name:"MuiAccordion"})(v);n.default=b}}},{package:"@material-ui/core"}],[988,{"@babel/runtime/helpers/interopRequireWildcard":311,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){var a=e("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(e("react")).createContext({});var o=r;n.default=o}}},{package:"@material-ui/core"}],[989,{"./Accordion":987,"@babel/runtime/helpers/interopRequireDefault":310},function(){with(this)return function(){"use strict";return function(e,t,n){var a=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var r=a(e("./Accordion"))}}},{package:"@material-ui/core"}],[990,{"../styles/withStyles":1318,"@babel/runtime/helpers/extends":305,"@babel/runtime/helpers/interopRequireDefault":310,"@babel/runtime/helpers/interopRequireWildcard":311,"@babel/runtime/helpers/objectWithoutProperties":319,clsx:2486,"prop-types":5840,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){var a=e("@babel/runtime/helpers/interopRequireWildcard"),r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.styles=void 0;var o=r(e("@babel/runtime/helpers/extends")),i=r(e("@babel/runtime/helpers/objectWithoutProperties")),s=a(e("react")),l=(r(e("prop-types")),r(e("clsx"))),u=r(e("../styles/withStyles")),c={root:{display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end"},spacing:{"& > :not(:first-child)":{marginLeft:8}}};n.styles=c;var d=s.forwardRef((function(e,t){var n=e.classes,a=e.className,r=e.disableSpacing,u=void 0!==r&&r,c=(0,i.default)(e,["classes","className","disableSpacing"]);return s.createElement("div",(0,o.default)({className:(0,l.default)(n.root,a,!u&&n.spacing),ref:t},c))})),f=(0,u.default)(c,{name:"MuiAccordionActions"})(d);n.default=f}}},{package:"@material-ui/core"}],[991,{"./AccordionActions":990,"@babel/runtime/helpers/interopRequireDefault":310},function(){with(this)return function(){"use strict";return function(e,t,n){var a=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var r=a(e("./AccordionActions"))}}},{package:"@material-ui/core"}],[992,{"../styles/withStyles":1318,"@babel/runtime/helpers/extends":305,"@babel/runtime/helpers/interopRequireDefault":310,"@babel/runtime/helpers/interopRequireWildcard":311,"@babel/runtime/helpers/objectWithoutProperties":319,clsx:2486,"prop-types":5840,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){var a=e("@babel/runtime/helpers/interopRequireWildcard"),r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.styles=void 0;var o=r(e("@babel/runtime/helpers/extends")),i=r(e("@babel/runtime/helpers/objectWithoutProperties")),s=a(e("react")),l=(r(e("prop-types")),r(e("clsx"))),u=r(e("../styles/withStyles")),c=function(e){return{root:{display:"flex",padding:e.spacing(1,2,2)}}};n.styles=c;var d=s.forwardRef((function(e,t){var n=e.classes,a=e.className,r=(0,i.default)(e,["classes","className"]);return s.createElement("div",(0,o.default)({className:(0,l.default)(n.root,a),ref:t},r))})),f=(0,u.default)(c,{name:"MuiAccordionDetails"})(d);n.default=f}}},{package:"@material-ui/core"}],[993,{"./AccordionDetails":992,"@babel/runtime/helpers/interopRequireDefault":310},function(){with(this)return function(){"use strict";return function(e,t,n){var a=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var r=a(e("./AccordionDetails"))}}},{package:"@material-ui/core"}],[994,{"../Accordion/AccordionContext":988,"../ButtonBase":1018,"../IconButton":1106,"../styles/withStyles":1318,"@babel/runtime/helpers/extends":305,"@babel/runtime/helpers/interopRequireDefault":310,"@babel/runtime/helpers/interopRequireWildcard":311,"@babel/runtime/helpers/objectWithoutProperties":319,clsx:2486,"prop-types":5840,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){var a=e("@babel/runtime/helpers/interopRequireWildcard"),r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.styles=void 0;var o=r(e("@babel/runtime/helpers/extends")),i=r(e("@babel/runtime/helpers/objectWithoutProperties")),s=a(e("react")),l=(r(e("prop-types")),r(e("clsx"))),u=r(e("../ButtonBase")),c=r(e("../IconButton")),d=r(e("../styles/withStyles")),f=r(e("../Accordion/AccordionContext")),p=function(e){var t={duration:e.transitions.duration.shortest};return{root:{display:"flex",minHeight:48,transition:e.transitions.create(["min-height","background-color"],t),padding:e.spacing(0,2),"&:hover:not($disabled)":{cursor:"pointer"},"&$expanded":{minHeight:64},"&$focused":{backgroundColor:e.palette.action.focus},"&$disabled":{opacity:e.palette.action.disabledOpacity}},expanded:{},focused:{},disabled:{},content:{display:"flex",flexGrow:1,transition:e.transitions.create(["margin"],t),margin:"12px 0","&$expanded":{margin:"20px 0"}},expandIcon:{transform:"rotate(0deg)",transition:e.transitions.create("transform",t),"&:hover":{backgroundColor:"transparent"},"&$expanded":{transform:"rotate(180deg)"}}}};n.styles=p;var m=s.forwardRef((function(e,t){var n=e.children,a=e.classes,r=e.className,d=e.expandIcon,p=e.IconButtonProps,m=e.onBlur,g=e.onClick,h=e.onFocusVisible,v=(0,i.default)(e,["children","classes","className","expandIcon","IconButtonProps","onBlur","onClick","onFocusVisible"]),b=s.useState(!1),_=b[0],y=b[1],E=s.useContext(f.default),T=E.disabled,w=void 0!==T&&T,S=E.expanded,k=E.toggle;return s.createElement(u.default,(0,o.default)({focusRipple:!1,disableRipple:!0,disabled:w,component:"div","aria-expanded":S,className:(0,l.default)(a.root,r,w&&a.disabled,S&&a.expanded,_&&a.focused),onFocusVisible:function(e){y(!0),h&&h(e)},onBlur:function(e){y(!1),m&&m(e)},onClick:function(e){k&&k(e),g&&g(e)},ref:t},v),s.createElement("div",{className:(0,l.default)(a.content,S&&a.expanded)},n),d&&s.createElement(c.default,(0,o.default)({className:(0,l.default)(a.expandIcon,S&&a.expanded),edge:"end",component:"div",tabIndex:null,role:null,"aria-hidden":!0},p),d))})),g=(0,d.default)(p,{name:"MuiAccordionSummary"})(m);n.default=g}}},{package:"@material-ui/core"}],[995,{"./AccordionSummary":994,"@babel/runtime/helpers/interopRequireDefault":310},function(){with(this)return function(){"use strict";return function(e,t,n){var a=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var r=a(e("./AccordionSummary"))}}},{package:"@material-ui/core"}],[996,{"../Paper":1156,"../styles/withStyles":1318,"../utils/capitalize":1326,"@babel/runtime/helpers/extends":305,"@babel/runtime/helpers/interopRequireDefault":310,"@babel/runtime/helpers/interopRequireWildcard":311,"@babel/runtime/helpers/objectWithoutProperties":319,clsx:2486,"prop-types":5840,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){var a=e("@babel/runtime/helpers/interopRequireWildcard"),r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.styles=void 0;var o=r(e("@babel/runtime/helpers/extends")),i=r(e("@babel/runtime/helpers/objectWithoutProperties")),s=a(e("react")),l=(r(e("prop-types")),r(e("clsx"))),u=r(e("../styles/withStyles")),c=r(e("../utils/capitalize")),d=r(e("../Paper")),f=function(e){var t="light"===e.palette.type?e.palette.grey[100]:e.palette.grey[900];return{root:{display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",zIndex:e.zIndex.appBar,flexShrink:0},positionFixed:{position:"fixed",top:0,left:"auto",right:0,"@media print":{position:"absolute"}},positionAbsolute:{position:"absolute",top:0,left:"auto",right:0},positionSticky:{position:"sticky",top:0,left:"auto",right:0},positionStatic:{position:"static"},positionRelative:{position:"relative"},colorDefault:{backgroundColor:t,color:e.palette.getContrastText(t)},colorPrimary:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText},colorSecondary:{backgroundColor:e.palette.secondary.main,color:e.palette.secondary.contrastText},colorInherit:{color:"inherit"},colorTransparent:{backgroundColor:"transparent",color:"inherit"}}};n.styles=f;var p=s.forwardRef((function(e,t){var n=e.classes,a=e.className,r=e.color,u=void 0===r?"primary":r,f=e.position,p=void 0===f?"fixed":f,m=(0,i.default)(e,["classes","className","color","position"]);return s.createElement(d.default,(0,o.default)({square:!0,component:"header",elevation:4,className:(0,l.default)(n.root,n["position".concat((0,c.default)(p))],n["color".concat((0,c.default)(u))],a,"fixed"===p&&"mui-fixed"),ref:t},m))})),m=(0,u.default)(f,{name:"MuiAppBar"})(p);n.default=m}}},{package:"@material-ui/core"}],[997,{"./AppBar":996,"@babel/runtime/helpers/interopRequireDefault":310},function(){with(this)return function(){"use strict";return function(e,t,n){var a=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var r=a(e("./AppBar"))}}},{package:"@material-ui/core"}],[998,{"../internal/svg-icons/Person":1282,"../styles/withStyles":1318,"@babel/runtime/helpers/extends":305,"@babel/runtime/helpers/interopRequireDefault":310,"@babel/runtime/helpers/interopRequireWildcard":311,"@babel/runtime/helpers/objectWithoutProperties":319,clsx:2486,"prop-types":5840,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){var a=e("@babel/runtime/helpers/interopRequireWildcard"),r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.styles=void 0;var o=r(e("@babel/runtime/helpers/extends")),i=r(e("@babel/runtime/helpers/objectWithoutProperties")),s=a(e("react")),l=(r(e("prop-types")),r(e("clsx"))),u=r(e("../styles/withStyles")),c=r(e("../internal/svg-icons/Person")),d=function(e){return{root:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},colorDefault:{color:e.palette.background.default,backgroundColor:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[600]},circle:{},rounded:{borderRadius:e.shape.borderRadius},square:{borderRadius:0},img:{width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4},fallback:{width:"75%",height:"75%"}}};n.styles=d;var f=s.forwardRef((function(e,t){var n=e.alt,a=e.children,r=e.classes,u=e.className,d=e.component,f=void 0===d?"div":d,p=e.imgProps,m=e.sizes,g=e.src,h=e.srcSet,v=e.variant,b=void 0===v?"circle":v,_=(0,i.default)(e,["alt","children","classes","className","component","imgProps","sizes","src","srcSet","variant"]),y=null,E=function(e){var t=e.src,n=e.srcSet,a=s.useState(!1),r=a[0],o=a[1];return s.useEffect((function(){if(!t&&!n)return undefined;o(!1);var e=!0,a=new Image;return a.src=t,a.srcSet=n,a.onload=function(){e&&o("loaded")},a.onerror=function(){e&&o("error")},function(){e=!1}}),[t,n]),r}({src:g,srcSet:h}),T=g||h,w=T&&"error"!==E;return y=w?s.createElement("img",(0,o.default)({alt:n,src:g,srcSet:h,sizes:m,className:r.img},p)):null!=a?a:T&&n?n[0]:s.createElement(c.default,{className:r.fallback}),s.createElement(f,(0,o.default)({className:(0,l.default)(r.root,r.system,r[b],u,!w&&r.colorDefault),ref:t},_),y)})),p=(0,u.default)(d,{name:"MuiAvatar"})(f);n.default=p}}},{package:"@material-ui/core"}],[999,{"./Avatar":998,"@babel/runtime/helpers/interopRequireDefault":310},function(){with(this)return function(){"use strict";return function(e,t,n){var a=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var r=a(e("./Avatar"))}}},{package:"@material-ui/core"}],[165,{"../../shared/constants/app":7316,"../../shared/modules/mv3.utils":7337,"../../ui":7945,"../../ui/helpers/constants/common":7865,"../../ui/helpers/utils/error-utils":7889,"./lib/metaRPCClientFactory":64,"./lib/stream-utils":86,"./lib/util":88,"./platforms/extension":164,"@formatjs/intl-relativetimeformat/polyfill":930,"eth-query":2811,ethjs:2971,"extension-port-stream":2980,loglevel:5597,"react-devtools":2432,"web3-stream-provider":7231,"webextension-polyfill":7290},function(){with(this)return function(){"use strict";return function(e,t,n){e("@formatjs/intl-relativetimeformat/polyfill"),e("react-devtools");var a=_(e("extension-port-stream")),r=_(e("webextension-polyfill")),o=_(e("ethjs")),i=_(e("eth-query")),s=_(e("web3-stream-provider")),l=_(e("loglevel")),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("../../ui")),c=e("../../shared/constants/app"),d=e("../../shared/modules/mv3.utils"),f=e("../../ui/helpers/constants/common"),p=e("../../ui/helpers/utils/error-utils"),m=_(e("./platforms/extension")),g=e("./lib/stream-utils"),h=e("./lib/util"),v=_(e("./lib/metaRPCClientFactory"));function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}function _(e){return e&&e.__esModule?e:{default:e}}const y=document.getElementById("app-content"),E="WORKER_KEEP_ALIVE_MESSAGE";async function T(e,t){const n=await(0,p.getErrorHtml)(f.SUPPORT_LINK,t);y.innerHTML=n;throw document.getElementById("critical-error-button").addEventListener("click",(e=>{r.default.runtime.reload()})),l.default.error(e.stack),e}function w(e,t){const n=(0,g.setupMultiplex)(e);!function(e,t){const n=(0,v.default)(e);t(null,n)}(n.createStream("controller"),t),function(e){const t=new s.default;t.pipe(e).pipe(t),e.on("error",console.error.bind(console)),t.on("error",console.error.bind(console)),global.ethereumProvider=t,global.ethQuery=new i.default(t),global.eth=new o.default(t)}(n.createStream("provider"))}d.isManifestV3&&setInterval((()=>{r.default.runtime.sendMessage({name:E})}),1e3),async function(){global.platform=new m.default;const e=(0,h.getEnvironmentType)();let t=!1,n=r.default.runtime.connect({name:e}),o=new a.default(n);const i=await async function(e){return new Promise((t=>{e===c.ENVIRONMENT_TYPE_POPUP?r.default.tabs.query({active:!0,currentWindow:!0}).then((e=>{const[n]=e,{id:a,title:r,url:o}=n,{origin:i,protocol:s}=o?new URL(o):{};t(i&&"null"!==i?{id:a,title:r,origin:i,protocol:s,url:o}:{})})):t({})}))}(e);if(d.isManifestV3){const l=e=>{"CONNECTION_READY"===(null==e?void 0:e.name)&&(t?w(o,((e,t)=>{e?T(e):(0,u.updateBackgroundConnection)(t)})):s(i))},c=()=>{n.onMessage.removeListener(l),n.onDisconnect.removeListener(c),r.default.runtime.sendMessage({name:E}),n=r.default.runtime.connect({name:e}),o=new a.default(n),n.onMessage.addListener(l),n.onDisconnect.addListener(c)};n.onMessage.addListener(l),n.onDisconnect.addListener(c)}else s(i);function s(n){!function(e,t,n){w(t,((t,a)=>{console.log("backgroundConnection",a,a.exportAccount),t?n(t,null):(0,u.default)({activeTab:e,container:y,backgroundConnection:a},n)}))}(n,o,((n,a)=>{if(n)return void T(n,a);t=!0;const r=a.getState(),{metamask:{completedOnboarding:o}={}}=r;o||e===c.ENVIRONMENT_TYPE_FULLSCREEN||global.platform.openExtensionInBrowser()}))}}().catch(l.default.error)}}},{package:"$root$"}]],[165],{});