LavaPack.loadBundle([[7946,{"../../../shared/constants/metametrics":7321,"../../../shared/constants/transaction":7329,"../../components/app/collectibles-detection-notice":7398,"../../components/ui/actionable-message":7679,"../../components/ui/box":7682,"../../components/ui/form-field":7716,"../../components/ui/page-container":7791,"../../components/ui/typography":7836,"../../contexts/metametrics":7845,"../../ducks/metamask/metamask":7859,"../../helpers/constants/design-system":7868,"../../helpers/constants/routes":7872,"../../hooks/useI18nContext":7927,"../../selectors":8267,"../../store/actions":8273,"@metamask/controllers":1458,react:6817,"react-redux":6775,"react-router-dom":6795},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var e,t,n,b,k;const N=(0,c.useI18nContext)(),w=(0,r.useHistory)(),O=(0,o.useDispatch)(),P=(0,o.useSelector)(g.getUseCollectibleDetection),A=(0,o.useSelector)(g.getIsMainnet),S=(0,o.useSelector)(E.getCollectiblesDetectionNoticeDismissed),C=null==w||null===(e=w.location)||void 0===e||null===(t=e.state)||void 0===t?void 0:t.addressEnteredOnImportTokensPage,x=null==w||null===(n=w.location)||void 0===n||null===(b=n.state)||void 0===b?void 0:b.tokenAddress,[R,M]=(0,a.useState)(null!==(k=null!=C?C:x)&&void 0!==k?k:""),[I,D]=(0,a.useState)(""),[j,L]=(0,a.useState)(!0),[F,W]=(0,a.useState)(!1),U=(0,a.useContext)(y.MetaMetricsContext);return a.default.createElement(f.default,{title:N("importNFT"),onSubmit:()=>{(async()=>{try{await O((0,m.addCollectibleVerifyOwnership)(R,I))}catch(e){const{message:t}=e;return O((0,m.setNewCollectibleAddedMessage)(t)),void W(!0)}x&&await O((0,m.ignoreTokens)({tokensToIgnore:x,dontShowLoadingIndicator:!0})),O((0,m.setNewCollectibleAddedMessage)("success"));const e=await(0,m.getTokenStandardAndDetails)(R,null,I.toString());U({event:T.EVENT_NAMES.TOKEN_ADDED,category:"Wallet",sensitiveProperties:{token_contract_address:R,token_symbol:null==e?void 0:e.symbol,tokenId:I.toString(),asset_type:v.ASSET_TYPES.COLLECTIBLE,token_standard:null==e?void 0:e.standard,source:T.EVENT.SOURCE.TOKEN.CUSTOM}}),w.push(i.DEFAULT_ROUTE)})()},submitText:N("add"),onCancel:()=>{w.push(i.DEFAULT_ROUTE)},onClose:()=>{w.push(i.DEFAULT_ROUTE)},disabled:j,contentComponent:a.default.createElement(u.default,null,!A||P||S?null:a.default.createElement(_.default,null),F&&a.default.createElement(p.default,{type:"danger",useIcon:!0,iconFillColor:"var(--color-error-default)",message:a.default.createElement(u.default,{display:l.DISPLAY.INLINE_FLEX},a.default.createElement(d.default,{variant:l.TYPOGRAPHY.H7,fontWeight:l.FONT_WEIGHT.NORMAL,margin:0},N("collectibleAddFailedMessage")),a.default.createElement("button",{className:"fas fa-times add-collectible__close",title:N("close"),onClick:()=>W(!1)}))}),a.default.createElement(u.default,{margin:4},a.default.createElement(h.default,{dataTestId:"address",titleText:N("address"),placeholder:"0x...",value:R,onChange:e=>{(e=>{L(!s.util.isValidHexAddress(e)||!I),M(e)})(e),W(!1)},tooltipText:N("importNFTAddressToolTip"),autoFocus:!0}),a.default.createElement(h.default,{dataTestId:"token-id",titleText:N("tokenId"),placeholder:N("nftTokenIdPlaceholder"),value:I,onChange:e=>{(e=>{L(!s.util.isValidHexAddress(R)||!e||isNaN(Number(e))),D(e)})(e),W(!1)},tooltipText:N("importNFTTokenIdToolTip")})))})};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=k(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=e("react-router-dom"),o=e("react-redux"),s=e("@metamask/controllers"),c=e("../../hooks/useI18nContext"),i=e("../../helpers/constants/routes"),l=e("../../helpers/constants/design-system"),u=b(e("../../components/ui/box")),d=b(e("../../components/ui/typography")),p=b(e("../../components/ui/actionable-message")),f=b(e("../../components/ui/page-container")),m=e("../../store/actions"),h=b(e("../../components/ui/form-field")),g=e("../../selectors"),E=e("../../ducks/metamask/metamask"),_=b(e("../../components/app/collectibles-detection-notice")),y=e("../../contexts/metametrics"),v=e("../../../shared/constants/transaction"),T=e("../../../shared/constants/metametrics");function b(e){return e&&e.__esModule?e:{default:e}}function k(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(k=function(e){return e?n:t})(e)}}}},{package:"$root$"}],[7947,{"./add-collectible":7946},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./add-collectible"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[7948,{"../../../shared/modules/string-utils":7343,"../../components/app/collectible-details/collectible-details":7395,"../../ducks/metamask/metamask":7859,"../../helpers/constants/routes":7872,"./components/native-asset":7952,"./components/token-asset":7953,react:6817,"react-redux":6775,"react-router-dom":6795},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=e("react-redux"),o=e("react-router-dom"),s=e("../../../shared/modules/string-utils"),c=p(e("../../components/app/collectible-details/collectible-details")),i=e("../../ducks/metamask/metamask"),l=e("../../helpers/constants/routes"),u=p(e("./components/native-asset")),d=p(e("./components/token-asset"));function p(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}var m=()=>{const e=(0,r.useSelector)((e=>e.metamask.nativeCurrency)),t=(0,r.useSelector)(i.getTokens),n=(0,r.useSelector)(i.getCollectibles),{asset:p,id:f}=(0,o.useParams)(),m=t.find((({address:e})=>(0,s.isEqualCaseInsensitive)(e,p))),h=n.find((({address:e,tokenId:t})=>(0,s.isEqualCaseInsensitive)(e,p)&&f===t.toString()));let g;return(0,a.useEffect)((()=>{document.querySelector(".app").scroll(0,0)}),[]),g=h?a.default.createElement(c.default,{collectible:h}):m?a.default.createElement(d.default,{token:m}):p===e?a.default.createElement(u.default,{nativeCurrency:e}):a.default.createElement(o.Redirect,{to:{pathname:l.DEFAULT_ROUTE}}),a.default.createElement("div",{className:"main-container asset__container"},g)};n.default=m}}},{package:"$root$"}],[7949,{"prop-types":5840,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=o(e("react")),r=o(e("prop-types"));function o(e){return e&&e.__esModule?e:{default:e}}const s=({accountName:e,assetName:t,onBack:n})=>a.default.createElement("button",{className:"asset-breadcrumb",onClick:n},a.default.createElement("i",{className:"fas fa-chevron-left asset-breadcrumb__chevron","data-testid":"asset__back"}),a.default.createElement("span",null,e)," / ",a.default.createElement("span",{className:"asset-breadcrumb__asset"},t));s.propTypes={accountName:r.default.string.isRequired,assetName:r.default.string.isRequired,onBack:r.default.func.isRequired};var c=s;n.default=c}}},{package:"$root$"}],[7950,{"./asset-breadcrumb":7949,"prop-types":5840,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=s(e("react")),r=s(e("prop-types")),o=s(e("./asset-breadcrumb"));function s(e){return e&&e.__esModule?e:{default:e}}const c=({accountName:e,assetName:t,onBack:n,optionsButton:r,className:s})=>a.default.createElement("div",{className:`asset-navigation ${s}`},a.default.createElement(o.default,{accountName:e,assetName:t,onBack:n}),r);c.propTypes={accountName:r.default.string.isRequired,assetName:r.default.string.isRequired,onBack:r.default.func.isRequired,optionsButton:r.default.element},c.defaultProps={optionsButton:undefined};var i=c;n.default=i}}},{package:"$root$"}],[7951,{"../../../components/ui/menu":7781,"../../../contexts/i18n":7844,"../../../helpers/constants/routes":7872,"../../../selectors":8267,"prop-types":5840,react:6817,"react-redux":6775,"react-router-dom":6795},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),o=(a=e("prop-types"))&&a.__esModule?a:{default:a},s=e("react-router-dom"),c=e("react-redux"),i=e("../../../contexts/i18n"),l=e("../../../components/ui/menu"),u=e("../../../selectors"),d=e("../../../helpers/constants/routes");function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}const f=({onRemove:e,onClickBlockExplorer:t,onViewAccountDetails:n,onViewTokenDetails:a,tokenSymbol:o,isNativeAsset:p})=>{const f=(0,r.useContext)(i.I18nContext),[m,h]=(0,r.useState)(null),[g,E]=(0,r.useState)(!1),_=(0,s.useHistory)(),y=(0,c.useSelector)(u.getBlockExplorerLinkText);return r.default.createElement(r.default.Fragment,null,r.default.createElement("button",{className:"fas fa-ellipsis-v asset-options__button","data-testid":"asset-options__button",onClick:()=>E(!0),ref:h,title:f("assetOptions")}),g?r.default.createElement(l.Menu,{anchorElement:m,onHide:()=>E(!1)},r.default.createElement(l.MenuItem,{iconClassName:"fas fa-qrcode","data-testid":"asset-options__account-details",onClick:()=>{E(!1),n()}},f("accountDetails")),r.default.createElement(l.MenuItem,{iconClassName:"fas fa-external-link-alt asset-options__icon","data-testid":"asset-options__etherscan",onClick:"addBlockExplorer"===y.firstPart?()=>{_.push(`${d.NETWORKS_ROUTE}#blockExplorerUrl`)}:()=>{E(!1),t()}},f(y.firstPart,""===y.secondPart?null:[f("blockExplorerAssetAction")])),p?null:r.default.createElement(l.MenuItem,{iconClassName:"fas fa-trash-alt asset-options__icon","data-testid":"asset-options__hide",onClick:()=>{E(!1),e()}},f("hideTokenSymbol",[o])),p?null:r.default.createElement(l.MenuItem,{iconClassName:"fas fa-info-circle asset-options__icon","data-testid":"asset-options__token-details",onClick:()=>{E(!1),a()}},f("tokenDetails"))):null)},m=e=>"function"!=typeof e;f.propTypes={isNativeAsset:o.default.bool,onClickBlockExplorer:o.default.func.isRequired,onViewAccountDetails:o.default.func.isRequired,onRemove:e=>{if(!1===e.isNativeAsset&&m(e.onRemove))throw new Error("When isNativeAsset is true, onRemove is a required prop")},onViewTokenDetails:e=>{if(!1===e.isNativeAsset&&m(e.onViewTokenDetails))throw new Error("When isNativeAsset is true, onViewTokenDetails is a required prop")},tokenSymbol:e=>{if(!1===e.isNativeAsset&&"string"!=typeof e.tokenSymbol)throw new Error("When isNativeAsset is true, tokenSymbol is a required prop")}};var h=f;n.default=h}}},{package:"$root$"}],[7952,{"../../../../shared/constants/metametrics":7321,"../../../components/app/transaction-list":7657,"../../../components/app/wallet-overview":7670,"../../../contexts/metametrics":7845,"../../../helpers/constants/routes":7872,"../../../helpers/utils/util":7907,"../../../selectors/selectors":8270,"../../../store/actions":8273,"./asset-navigation":7950,"./asset-options":7951,"@metamask/etherscan-link":1562,"prop-types":5840,react:6817,"react-redux":6775,"react-router-dom":6795},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=v;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=_(e("prop-types")),o=e("react-redux"),s=e("react-router-dom"),c=e("@metamask/etherscan-link"),i=_(e("../../../components/app/transaction-list")),l=e("../../../components/app/wallet-overview"),u=e("../../../selectors/selectors"),d=e("../../../store/actions"),p=e("../../../helpers/constants/routes"),f=e("../../../contexts/metametrics"),m=e("../../../../shared/constants/metametrics"),h=e("../../../helpers/utils/util"),g=_(e("./asset-navigation")),E=_(e("./asset-options"));function _(e){return e&&e.__esModule?e:{default:e}}function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function v({nativeCurrency:e}){const t=(0,o.useSelector)((e=>(0,u.getSelectedIdentity)(e).name)),n=(0,o.useDispatch)(),r=(0,o.useSelector)(u.getCurrentChainId),_=(0,o.useSelector)(u.getRpcPrefsForCurrentProvider),y=(0,o.useSelector)(u.getSelectedAddress),v=(0,s.useHistory)(),T=(0,c.getAccountLink)((0,h.getQtumAddressFromHex)(y,r),r,_),b=(0,a.useContext)(f.MetaMetricsContext),k=(0,o.useSelector)(u.getIsCustomNetwork);return a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{className:"asset__header"},a.default.createElement(g.default,{accountName:t,assetName:e,onBack:()=>v.push(p.DEFAULT_ROUTE),isEthNetwork:!_.blockExplorerUrl,optionsButton:a.default.createElement(E.default,{isNativeAsset:!0,onClickBlockExplorer:()=>{b({event:"Clicked Block Explorer Link",category:m.EVENT.CATEGORIES.NAVIGATION,properties:{link_type:"Account Tracker",action:"Asset Options",block_explorer_domain:(0,h.getURLHostName)(T)}}),global.platform.openTab({url:T})},onViewAccountDetails:()=>{n((0,d.showModal)({name:"ACCOUNT_DETAILS"}))},isCustomNetwork:k})}),a.default.createElement(l.EthOverview,{className:"asset__overview"})),a.default.createElement(i.default,{hideTokenTransactions:!0}))}v.propTypes={nativeCurrency:r.default.string.isRequired}}}},{package:"$root$"}],[7953,{"../../../../shared/constants/metametrics":7321,"../../../components/app/transaction-list":7657,"../../../components/app/wallet-overview":7670,"../../../contexts/metametrics":7845,"../../../helpers/constants/routes":7872,"../../../helpers/utils/util":7907,"../../../selectors/selectors":8270,"../../../store/actions":8273,"./asset-navigation":7950,"./asset-options":7951,"@metamask/etherscan-link":1562,"ethereumjs-util":2891,"prop-types":5840,react:6817,"react-redux":6775,"react-router-dom":6795},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=T;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=y(e("prop-types")),o=e("react-redux"),s=e("react-router-dom"),c=e("@metamask/etherscan-link"),i=y(e("../../../components/app/transaction-list")),l=e("../../../components/app/wallet-overview"),u=e("../../../selectors/selectors"),d=e("../../../helpers/constants/routes"),p=e("../../../helpers/utils/util"),f=e("../../../store/actions"),m=e("../../../contexts/metametrics"),h=e("../../../../shared/constants/metametrics"),g=y(e("./asset-navigation")),E=y(e("./asset-options")),_=e("ethereumjs-util");function y(e){return e&&e.__esModule?e:{default:e}}function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function T({token:e}){const t=(0,o.useDispatch)(),n=(0,o.useSelector)(u.getCurrentChainId),r=(0,o.useSelector)(u.getRpcPrefsForCurrentProvider),y=(0,o.useSelector)(u.getSelectedIdentity),v=y.name,T=y.address,b=(0,s.useHistory)(),k=(0,c.getTokenTrackerLink)((0,_.stripHexPrefix)(e.address).toLowerCase(),n,null,T,r),N=(0,a.useContext)(m.MetaMetricsContext),w=(0,p.getQRCTokenTrackerLink)(k),O=(0,o.useSelector)(u.getIsCustomNetwork);return a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{className:"asset__header"},a.default.createElement(g.default,{accountName:v,assetName:e.symbol,onBack:()=>b.push(d.DEFAULT_ROUTE),optionsButton:a.default.createElement(E.default,{onRemove:()=>t((0,f.showModal)({name:"HIDE_TOKEN_CONFIRMATION",token:e,history:b})),isCustomNetwork:O,onClickBlockExplorer:()=>{N({event:"Clicked Block Explorer Link",category:h.EVENT.CATEGORIES.NAVIGATION,properties:{link_type:"Token Tracker",action:"Token Options",block_explorer_domain:(0,p.getURLHostName)(w)}}),global.platform.openTab({url:w})},onViewAccountDetails:()=>{t((0,f.showModal)({name:"ACCOUNT_DETAILS"}))},onViewTokenDetails:()=>{b.push(`${d.TOKEN_DETAILS}/${e.address}`)},tokenSymbol:e.symbol}),className:"token__navigation"}),a.default.createElement(l.TokenOverview,{className:"asset__overview token__overview",token:e})),a.default.createElement(i.default,{tokenAddress:e.address}))}T.propTypes={token:r.default.shape({address:r.default.string.isRequired,decimals:r.default.number,symbol:r.default.string}).isRequired}}}},{package:"$root$"}],[7954,{"./asset":7948},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./asset"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[7955,{"../../../shared/constants/metametrics":7321,"../../../shared/constants/transaction":7329,"../../../shared/modules/string-utils":7343,"../../components/ui/actionable-message/actionable-message":7678,"../../components/ui/button":7686,"../../components/ui/identicon":7755,"../../components/ui/token-balance":7827,"../../contexts/i18n":7844,"../../contexts/metametrics":7845,"../../ducks/history/history":7856,"../../ducks/metamask/metamask":7859,"../../helpers/constants/zendesk-url":7875,"../../selectors":8267,"../../store/actions":8273,react:6817,"react-redux":6775,"react-router-dom":6795},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=T(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=e("react-redux"),o=e("react-router-dom"),s=v(e("../../components/ui/actionable-message/actionable-message")),c=v(e("../../components/ui/button")),i=v(e("../../components/ui/identicon")),l=v(e("../../components/ui/token-balance")),u=e("../../contexts/i18n"),d=e("../../contexts/metametrics"),p=e("../../ducks/history/history"),f=e("../../ducks/metamask/metamask"),m=v(e("../../helpers/constants/zendesk-url")),h=e("../../../shared/modules/string-utils"),g=e("../../selectors"),E=e("../../store/actions"),_=e("../../../shared/constants/metametrics"),y=e("../../../shared/constants/transaction");function v(e){return e&&e.__esModule?e:{default:e}}function T(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(T=function(e){return e?n:t})(e)}var b=()=>{const e=(0,a.useContext)(u.I18nContext),t=(0,r.useDispatch)(),n=(0,o.useHistory)(),v=(0,r.useSelector)(p.getMostRecentOverviewPage),T=(0,r.useSelector)(g.getSuggestedAssets),b=(0,r.useSelector)(f.getTokens),k=(0,a.useContext)(d.MetaMetricsContext),N=(0,a.useMemo)((()=>function(e,t){const n=e.find((({asset:e})=>{const n=t.find((({address:t})=>(0,h.isEqualCaseInsensitive)(t,e.address)));return Boolean(n)}));return Boolean(n)}(T,b)&&a.default.createElement(s.default,{message:e("knownTokenWarning",[a.default.createElement(c.default,{type:"link",key:"confirm-add-suggested-token-duplicate-warning",className:"confirm-add-suggested-token__link",rel:"noopener noreferrer",target:"_blank",href:m.default.TOKEN_SAFETY_PRACTICES},e("learnScamRisk"))]),type:"warning",withRightButton:!0,useIcon:!0,iconFillColor:"#f8c000"})),[T,b,e]),w=(0,a.useMemo)((()=>function(e,t){const n=e.find((({asset:e})=>{const n=t.find((t=>(0,h.isEqualCaseInsensitive)(t.symbol,e.symbol)&&!(0,h.isEqualCaseInsensitive)(t.address,e.address)));return Boolean(n)}));return Boolean(n)}(T,b)&&a.default.createElement(s.default,{message:e("reusedTokenNameWarning"),type:"warning",withRightButton:!0,useIcon:!0,iconFillColor:"#f8c000"})),[T,b,e]),O=(0,a.useCallback)((async()=>{await Promise.all(T.map((async({asset:e,id:n})=>{await t((0,E.acceptWatchAsset)(n)),k({event:_.EVENT_NAMES.TOKEN_ADDED,category:_.EVENT.CATEGORIES.WALLET,sensitiveProperties:{token_symbol:e.symbol,token_contract_address:e.address,token_decimal_precision:e.decimals,unlisted:e.unlisted,source:_.EVENT.SOURCE.TOKEN.DAPP,token_standard:y.TOKEN_STANDARDS.ERC20,asset_type:y.ASSET_TYPES.TOKEN}})}))),n.push(v)}),[t,n,k,v,T]);return(0,a.useEffect)((()=>{T.length||n.push(v)}),[]),a.default.createElement("div",{className:"page-container"},a.default.createElement("div",{className:"page-container__header"},a.default.createElement("div",{className:"page-container__title"},e("addSuggestedTokens")),a.default.createElement("div",{className:"page-container__subtitle"},e("likeToImportTokens")),N,w),a.default.createElement("div",{className:"page-container__content"},a.default.createElement("div",{className:"confirm-add-suggested-token"},a.default.createElement("div",{className:"confirm-add-suggested-token__header"},a.default.createElement("div",{className:"confirm-add-suggested-token__token"},e("token")),a.default.createElement("div",{className:"confirm-add-suggested-token__balance"},e("balance"))),a.default.createElement("div",{className:"confirm-add-suggested-token__token-list"},T.map((({asset:e})=>{return a.default.createElement("div",{className:"confirm-add-suggested-token__token-list-item",key:e.address},a.default.createElement("div",{className:"confirm-add-suggested-token__token confirm-add-suggested-token__data"},a.default.createElement(i.default,{className:"confirm-add-suggested-token__token-icon",diameter:48,address:e.address,image:e.image}),a.default.createElement("div",{className:"confirm-add-suggested-token__name"},(t=e.name,n=e.symbol,t===undefined?n:`${t} (${n})`))),a.default.createElement("div",{className:"confirm-add-suggested-token__balance"},a.default.createElement(l.default,{token:e})));var t,n}))))),a.default.createElement("div",{className:"page-container__footer"},a.default.createElement("footer",null,a.default.createElement(c.default,{type:"secondary",large:!0,className:"page-container__footer-button",onClick:async()=>{await Promise.all(T.map((({id:e})=>t((0,E.rejectWatchAsset)(e))))),n.push(v)}},e("cancel")),a.default.createElement(c.default,{type:"primary",large:!0,className:"page-container__footer-button",disabled:0===T.length,onClick:O},e("addToken")))))};n.default=b}}},{package:"$root$"}],[7956,{"./confirm-add-suggested-token":7955},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./confirm-add-suggested-token"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[7957,{"../../../../shared/constants/network":7322,"../../../../shared/constants/time":7327,"../../../../shared/constants/transaction":7329,"../../../components/app/confirm-page-container/confirm-page-container-content":7410,"../../../components/app/edit-gas-fee-button":7453,"../../../components/app/gas-details-item":7483,"../../../components/app/ledger-instruction-field":7490,"../../../components/app/multilayer-fee-message":7562,"../../../components/ui/box":7682,"../../../components/ui/button":7686,"../../../components/ui/icon/copy-icon.component":7726,"../../../components/ui/identicon":7755,"../../../components/ui/typography":7836,"../../../components/ui/url-icon":7841,"../../../helpers/constants/design-system":7868,"../../../helpers/utils/confirm-tx.util":7887,"../../../helpers/utils/util":7907,"../../send/send.utils":8145,"@metamask/etherscan-link":1562,classnames:2484,"copy-to-clipboard":2518,"ethereumjs-util":2891,"prop-types":5840,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=A(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=P(e("prop-types")),o=P(e("classnames")),s=P(e("copy-to-clipboard")),c=e("@metamask/etherscan-link"),i=P(e("../../../components/ui/url-icon")),l=e("../../../helpers/utils/util"),u=e("../../../helpers/utils/confirm-tx.util"),d=e("../../send/send.utils"),p=P(e("../../../components/ui/typography")),f=P(e("../../../components/ui/box")),m=P(e("../../../components/ui/button")),h=P(e("../../../components/app/edit-gas-fee-button")),g=P(e("../../../components/ui/identicon")),E=P(e("../../../components/app/multilayer-fee-message")),_=P(e("../../../components/ui/icon/copy-icon.component")),y=e("../../../helpers/constants/design-system"),v=e("../../../../shared/constants/time"),T=e("../../../components/app/confirm-page-container/confirm-page-container-content"),b=P(e("../../../components/app/gas-details-item")),k=P(e("../../../components/app/ledger-instruction-field")),N=e("../../../../shared/constants/transaction"),w=e("../../../../shared/constants/network"),O=e("ethereumjs-util");function P(e){return e&&e.__esModule?e:{default:e}}function A(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(A=function(e){return e?n:t})(e)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class C extends a.Component{constructor(...e){super(...e),S(this,"state",{showFullTxDetails:!0,copied:!1})}renderApproveContentCard({showHeader:e=!0,symbol:t,title:n,showEdit:r,showAdvanceGasFeeOptions:s=!1,onEditClick:c,content:i,footer:l,noBorder:u}){const{supportsEIP1559V2:d}=this.props,{t:p}=this.context;return a.default.createElement("div",{className:(0,o.default)({"confirm-approve-content__card":!u,"confirm-approve-content__card--no-border":u})},e&&a.default.createElement("div",{className:"confirm-approve-content__card-header"},d&&n===p("transactionFee")?null:a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{className:"confirm-approve-content__card-header__symbol"},t),a.default.createElement("div",{className:"confirm-approve-content__card-header__title"},n)),r&&(!s||!d)&&a.default.createElement(f.default,{width:y.BLOCK_SIZES.ONE_SIXTH},a.default.createElement(m.default,{type:"link",className:"confirm-approve-content__small-blue-text",onClick:()=>c()},p("edit"))),r&&s&&d&&a.default.createElement(h.default,null)),a.default.createElement("div",{className:"confirm-approve-content__card-content"},i),l)}renderTransactionDetailsContent(){const{t:e}=this.context,{currentCurrency:t,nativeCurrency:n,ethTransactionTotal:r,fiatTransactionTotal:o,hexTransactionTotal:s,txData:c,isMultiLayerFeeNetwork:i,supportsEIP1559V2:l}=this.props;return!i&&l?a.default.createElement(b.default,null):a.default.createElement("div",{className:"confirm-approve-content__transaction-details-content"},i?a.default.createElement("div",{className:"confirm-approve-content__transaction-details-extra-content"},a.default.createElement("div",{className:"confirm-approve-content__transaction-details-content__labelled-fee"},a.default.createElement("span",null,e("transactionDetailLayer2GasHeading")),`${r} ${n}`),a.default.createElement(E.default,{transaction:c,layer2fee:s,nativeCurrency:n,plainStyle:!0})):a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{className:"confirm-approve-content__small-text"},e("feeAssociatedRequest")),a.default.createElement("div",{className:"confirm-approve-content__transaction-details-content__fee"},a.default.createElement("div",{className:"confirm-approve-content__transaction-details-content__primary-fee"},(0,u.formatCurrency)(o,t)),a.default.createElement("div",{className:"confirm-approve-content__transaction-details-content__secondary-fee"},`${r} ${n}`))))}renderERC721OrERC1155PermissionContent(){const{t:e}=this.context,{origin:t,toAddress:n,isContract:r,isSetApproveForAll:o}=this.props,c=this.getTitleTokenDescription(),i=r?`${e("contract")} (${(0,l.addressSummary)(n)})`:(0,l.addressSummary)(n);return a.default.createElement("div",{className:"flex-column"},a.default.createElement("div",{className:"confirm-approve-content__small-text"},e("accessAndSpendNoticeNFT",[t])),a.default.createElement("div",{className:"flex-row"},a.default.createElement("div",{className:"confirm-approve-content__label"},e("approvedAsset"),":"),a.default.createElement("div",{className:"confirm-approve-content__medium-text"},o?e("allOfYour",[c]):c)),a.default.createElement("div",{className:"flex-row"},a.default.createElement("div",{className:"confirm-approve-content__label"},e("grantedToWithColon")),a.default.createElement("div",{className:"confirm-approve-content__medium-text"},i),a.default.createElement("div",{className:"confirm-approve-content__medium-text"},a.default.createElement(m.default,{type:"link",className:"confirm-approve-content__copy-address",onClick:()=>{this.setState({copied:!0}),this.copyTimeout=setTimeout((()=>this.setState({copied:!1})),3*v.SECOND),(0,s.default)(n)},title:this.state.copied?e("copiedExclamation"):e("copyToClipboard")},a.default.createElement(_.default,{size:14,color:"var(--color-icon-default)"})))))}renderERC20PermissionContent(){const{t:e}=this.context,{customTokenAmount:t,tokenAmount:n,tokenSymbol:r,origin:o,toAddress:c,isContract:i}=this.props,u=i?`${e("contract")} (${(0,l.addressSummary)(c)})`:(0,l.addressSummary)(c);return a.default.createElement("div",{className:"flex-column"},a.default.createElement("div",{className:"confirm-approve-content__small-text"},e("accessAndSpendNotice",[o])),a.default.createElement("div",{className:"flex-row"},a.default.createElement("div",{className:"confirm-approve-content__label"},e("approvedAmountWithColon")),a.default.createElement("div",{className:"confirm-approve-content__medium-text"},`${Number(t||n)} ${r}`)),a.default.createElement("div",{className:"flex-row"},a.default.createElement("div",{className:"confirm-approve-content__label"},e("grantedToWithColon")),a.default.createElement("div",{className:"confirm-approve-content__medium-text"},`${u}`),a.default.createElement("div",{className:"confirm-approve-content__medium-text"},a.default.createElement(m.default,{type:"link",className:"confirm-approve-content__copy-address",onClick:()=>{this.setState({copied:!0}),this.copyTimeout=setTimeout((()=>this.setState({copied:!1})),3*v.SECOND),(0,s.default)(c)},title:this.state.copied?e("copiedExclamation"):e("copyToClipboard")},a.default.createElement(_.default,{size:14,color:"var(--color-icon-default)"})))))}renderDataContent(){const{t:e}=this.context,{data:t,isSetApproveForAll:n,setApproveForAllArg:r}=this.props;return a.default.createElement("div",{className:"flex-column"},a.default.createElement("div",{className:"confirm-approve-content__small-text"},e(n?"functionSetApprovalForAll":"functionApprove")),n&&r!==undefined?a.default.createElement("div",{className:"confirm-approve-content__small-text"},`${e("parameters")}: ${r}`):null,a.default.createElement("div",{className:"confirm-approve-content__small-text confirm-approve-content__data__data-block"},t))}renderFullDetails(){const{t:e}=this.context,{assetStandard:t,showEditApprovalPermissionModal:n,customTokenAmount:r,tokenAmount:o,decimals:s,origin:c,setCustomAmount:i,tokenSymbol:l,tokenBalance:u}=this.props;return t===N.ERC20?a.default.createElement("div",{className:"confirm-approve-content__full-tx-content"},a.default.createElement("div",{className:"confirm-approve-content__permission"},this.renderApproveContentCard({symbol:a.default.createElement("i",{className:"fa fa-user-check"}),title:e("permissionRequest"),content:this.renderERC20PermissionContent(),showEdit:!0,onEditClick:()=>n({customTokenAmount:r,decimals:s,origin:c,setCustomAmount:i,tokenAmount:o,tokenSymbol:l,tokenBalance:u})})),a.default.createElement("div",{className:"confirm-approve-content__data"},this.renderApproveContentCard({symbol:a.default.createElement("i",{className:"fa fa-file"}),title:"Data",content:this.renderDataContent(),noBorder:!0}))):t===N.ERC721||t===N.ERC1155?a.default.createElement("div",{className:"confirm-approve-content__full-tx-content"},a.default.createElement("div",{className:"confirm-approve-content__permission"},this.renderApproveContentCard({symbol:a.default.createElement("i",{className:"fas fa-user-check"}),title:e("permissionRequest"),content:this.renderERC721OrERC1155PermissionContent(),showEdit:!1})),a.default.createElement("div",{className:"confirm-approve-content__data"},this.renderApproveContentCard({symbol:a.default.createElement("i",{className:"fa fa-file"}),title:e("data"),content:this.renderDataContent(),noBorder:!0}))):null}renderCustomNonceContent(){const{t:e}=this.context,{useNonceField:t,customNonceValue:n,updateCustomNonce:r,getNextNonce:o,nextNonce:s,showCustomizeNonceModal:c}=this.props;return a.default.createElement(a.default.Fragment,null,t&&a.default.createElement("div",{className:"confirm-approve-content__custom-nonce-content"},a.default.createElement(f.default,{className:"confirm-approve-content__custom-nonce-header",justifyContent:y.JUSTIFY_CONTENT.FLEX_START},a.default.createElement(p.default,{variant:y.TYPOGRAPHY.H6,fontWeight:y.FONT_WEIGHT.NORMAL},e("nonce")),a.default.createElement(m.default,{type:"link",className:"confirm-approve-content__custom-nonce-edit",onClick:()=>c({nextNonce:s,customNonceValue:n,updateCustomNonce:r,getNextNonce:o})},e("edit"))),a.default.createElement(p.default,{className:"confirm-approve-content__custom-nonce-value",variant:y.TYPOGRAPHY.H6,fontWeight:y.FONT_WEIGHT.BOLD},n||s)))}getTitleTokenDescription(){const{tokenId:e,assetName:t,tokenAddress:n,rpcPrefs:r,chainId:o,assetStandard:i,tokenSymbol:l,isSetApproveForAll:u,userAddress:d}=this.props,{t:p}=this.context,f=(null==r?void 0:r.blockExplorerUrl)||[...w.TEST_CHAINS,w.MAINNET_CHAIN_ID].includes(o);let m=p("token");const h=e?` (#${e})`:"";if(i===N.ERC20||l&&!e&&!u)m=l;else if((i===N.ERC721||i===N.ERC1155||t&&e||l&&e)&&(m=t||l?`${null!=t?t:l}`:p("nft"),f)){var g;const e=(0,c.getTokenTrackerLink)(n,o,null,d,{blockExplorerUrl:null!==(g=null==r?void 0:r.blockExplorerUrl)&&void 0!==g?g:null});return a.default.createElement(a.default.Fragment,null,a.default.createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer",title:n,className:"confirm-approve-content__approval-asset-link"},m),h&&a.default.createElement("span",null,h))}return a.default.createElement(a.default.Fragment,null,a.default.createElement("span",{className:"confirm-approve-content__approval-asset-title",onClick:()=>{(0,s.default)(n)},title:n},m),h&&a.default.createElement("span",null,h))}renderTitle(){const{t:e}=this.context,{isSetApproveForAll:t,setApproveForAllArg:n}=this.props,a=this.getTitleTokenDescription();let r;return t&&(r=e("approveAllTokensTitle",[a]),!1===n&&(r=e("revokeAllTokensTitle",[a]))),r||e("allowSpendToken",[a])}renderDescription(){const{t:e}=this.context,{isContract:t,isSetApproveForAll:n,setApproveForAllArg:a}=this.props,r=t?e("contract").toLowerCase():e("account").toLowerCase();let o=e("trustSiteApprovePermission",[r]);return n&&!1===a&&(o=e("revokeApproveForAllDescription",[r,this.getTitleTokenDescription()])),o}render(){var e;const{t:t}=this.context,{decimals:n,siteImage:r,tokenAmount:u,customTokenAmount:h,origin:E,tokenSymbol:b,showCustomizeGasModal:w,showEditApprovalPermissionModal:P,setCustomAmount:A,tokenBalance:S,useNonceField:C,warning:x,txData:R,fromAddressIsLedger:M,toAddress:I,chainId:D,rpcPrefs:j,isContract:L,assetStandard:F,userAddress:W}=this.props,{showFullTxDetails:U}=this.state;return a.default.createElement("div",{className:(0,o.default)("confirm-approve-content",{"confirm-approve-content--full":U})},x&&a.default.createElement("div",{className:"confirm-approve-content__custom-nonce-warning"},a.default.createElement(T.ConfirmPageContainerWarning,{warning:x})),a.default.createElement(f.default,{display:y.DISPLAY.FLEX,className:"confirm-approve-content__icon-display-content"},a.default.createElement(f.default,{display:y.DISPLAY.FLEX},a.default.createElement(i.default,{className:"confirm-approve-content__siteimage-identicon",fallbackClassName:"confirm-approve-content__siteimage-identicon",name:E,url:r}),a.default.createElement(p.default,{variant:y.TYPOGRAPHY.H6,fontWeight:y.FONT_WEIGHT.NORMAL,color:y.COLORS.TEXT_ALTERNATIVE,boxProps:{marginLeft:1,marginTop:2}},E))),a.default.createElement("div",{className:"confirm-approve-content__title","data-testid":"confirm-approve-title"},this.renderTitle()),a.default.createElement("div",{className:"confirm-approve-content__description"},this.renderDescription()),a.default.createElement(f.default,{className:"confirm-approve-content__address-display-content"},a.default.createElement(f.default,{display:y.DISPLAY.FLEX},a.default.createElement(g.default,{className:"confirm-approve-content__address-identicon",diameter:20,address:I}),a.default.createElement(p.default,{variant:y.TYPOGRAPHY.H6,fontWeight:y.FONT_WEIGHT.NORMAL,color:y.COLORS.TEXT_ALTERNATIVE,boxProps:{marginBottom:0}},(0,d.ellipsify)(I)),a.default.createElement(m.default,{type:"link",className:"confirm-approve-content__copy-address",onClick:()=>{this.setState({copied:!0}),this.copyTimeout=setTimeout((()=>this.setState({copied:!1})),3*v.SECOND),(0,s.default)(I)},title:this.state.copied?t("copiedExclamation"):t("copyToClipboard")},a.default.createElement(_.default,{size:9,color:"var(--color-icon-default)"})),a.default.createElement(m.default,{type:"link",className:"confirm-approve-content__etherscan-link",onClick:()=>{var e,t;const n=L?(0,l.getQRCTokenTrackerLink)((0,c.getTokenTrackerLink)((0,O.stripHexPrefix)(I).toLowerCase(),D,null,null,{blockExplorerUrl:null!==(e=null==j?void 0:j.blockExplorerUrl)&&void 0!==e?e:null})):(0,c.getAccountLink)((0,l.getQtumAddressFromHex)(I,D),D,{blockExplorerUrl:null!==(t=null==j?void 0:j.blockExplorerUrl)&&void 0!==t?t:null},null);global.platform.openTab({url:n})},target:"_blank",rel:"noopener noreferrer",title:t("etherscanView")},a.default.createElement("i",{className:"fa fa-share-square fa-sm",style:{color:"var(--color-icon-default)",fontSize:11},title:t("etherscanView")})))),F===N.ERC20?a.default.createElement("div",{className:"confirm-approve-content__edit-submission-button-container"},a.default.createElement("div",{className:"confirm-approve-content__medium-link-text cursor-pointer",onClick:()=>P({customTokenAmount:h,decimals:n,origin:E,setCustomAmount:A,tokenAmount:u,tokenSymbol:b,tokenBalance:S})},t("editPermission"))):null,a.default.createElement("div",{className:"confirm-approve-content__card-wrapper"},this.renderApproveContentCard({symbol:a.default.createElement("i",{className:"fa fa-tag"}),title:t("transactionFee"),showEdit:!0,showAdvanceGasFeeOptions:!0,onEditClick:w,content:this.renderTransactionDetailsContent(),noBorder:C||!U,footer:!C&&a.default.createElement("div",{className:"confirm-approve-content__view-full-tx-button-wrapper",onClick:()=>this.setState({showFullTxDetails:!this.state.showFullTxDetails})},a.default.createElement("div",{className:"confirm-approve-content__view-full-tx-button cursor-pointer"},a.default.createElement("div",{className:"confirm-approve-content__small-blue-text"},this.state.showFullTxDetails?t("hideFullTransactionDetails"):t("viewFullTransactionDetails")),a.default.createElement("i",{className:(0,o.default)({"fa fa-caret-up":U,"fa fa-caret-down":!U})})))}),C&&this.renderApproveContentCard({showHeader:!1,content:this.renderCustomNonceContent(),useNonceField:C,noBorder:!U,footer:a.default.createElement("div",{className:"confirm-approve-content__view-full-tx-button-wrapper",onClick:()=>this.setState({showFullTxDetails:!this.state.showFullTxDetails})},a.default.createElement("div",{className:"confirm-approve-content__view-full-tx-button cursor-pointer"},a.default.createElement("div",{className:"confirm-approve-content__small-blue-text"},this.state.showFullTxDetails?t("hideFullTransactionDetails"):t("viewFullTransactionDetails")),a.default.createElement("i",{className:(0,o.default)({"fa fa-caret-up":U,"fa fa-caret-down":!U})})))})),M?a.default.createElement("div",{className:"confirm-approve-content__ledger-instruction-wrapper"},a.default.createElement(k.default,{showDataInstruction:Boolean(null===(e=R.txParams)||void 0===e?void 0:e.data)})):null,U?this.renderFullDetails():null)}}n.default=C,S(C,"contextTypes",{t:r.default.func}),S(C,"propTypes",{decimals:r.default.number,tokenAmount:r.default.string,customTokenAmount:r.default.string,tokenSymbol:r.default.string,siteImage:r.default.string,showCustomizeGasModal:r.default.func,showEditApprovalPermissionModal:r.default.func,origin:r.default.string,setCustomAmount:r.default.func,tokenBalance:r.default.string,data:r.default.string,toAddress:r.default.string,currentCurrency:r.default.string,nativeCurrency:r.default.string,fiatTransactionTotal:r.default.string,ethTransactionTotal:r.default.string,useNonceField:r.default.bool,customNonceValue:r.default.string,updateCustomNonce:r.default.func,getNextNonce:r.default.func,nextNonce:r.default.number,showCustomizeNonceModal:r.default.func,warning:r.default.string,txData:r.default.object,fromAddressIsLedger:r.default.bool,chainId:r.default.string,tokenAddress:r.default.string,rpcPrefs:r.default.object,isContract:r.default.bool,hexTransactionTotal:r.default.string,isMultiLayerFeeNetwork:r.default.bool,supportsEIP1559V2:r.default.bool,assetName:r.default.string,tokenId:r.default.string,assetStandard:r.default.string,isSetApproveForAll:r.default.bool,setApproveForAllArg:r.default.bool,userAddress:r.default.string})}}},{package:"$root$"}],[7958,{"./confirm-approve-content.component":7957},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./confirm-approve-content.component"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[7959,{"../../../shared/constants/gas":7318,"../../../shared/constants/transaction":7329,"../../../shared/modules/contract-utils":7331,"../../../shared/modules/transaction.utils":7345,"../../components/app/advanced-gas-fee-popover":7372,"../../components/app/edit-gas-fee-popover":7460,"../../components/app/edit-gas-popover/edit-gas-popover.component":7466,"../../components/ui/loading-screen":7766,"../../contexts/gasFee":7843,"../../contexts/transaction-modal":7846,"../../ducks/metamask/metamask":7859,"../../helpers/utils/token-util":7904,"../../hooks/useApproveTransaction":7918,"../../selectors":8267,"../../store/actions":8273,"../confirm-transaction-base":7982,"./confirm-approve-content":7958,"./confirm-approve.util":7960,"prop-types":5840,react:6817,"react-redux":6775},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=O;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=N(e("prop-types")),o=e("react-redux"),s=N(e("../confirm-transaction-base")),c=e("../../../shared/constants/gas"),i=e("../../store/actions"),l=e("../../helpers/utils/token-util"),u=e("../../../shared/modules/contract-utils"),d=e("../../contexts/gasFee"),p=e("../../contexts/transaction-modal"),f=e("../../ducks/metamask/metamask"),m=e("../../selectors"),h=e("../../hooks/useApproveTransaction"),g=N(e("../../components/app/advanced-gas-fee-popover")),E=N(e("../../components/app/edit-gas-fee-popover")),_=N(e("../../components/app/edit-gas-popover/edit-gas-popover.component")),y=N(e("../../components/ui/loading-screen")),v=e("../../../shared/modules/transaction.utils"),T=e("../../../shared/constants/transaction"),b=e("./confirm-approve.util"),k=N(e("./confirm-approve-content"));function N(e){return e&&e.__esModule?e:{default:e}}function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}function O({assetStandard:e,assetName:t,userBalance:n,tokenSymbol:r,decimals:N,tokenImage:w,tokenAmount:O,tokenId:P,userAddress:A,toAddress:S,tokenAddress:C,transaction:x,ethTransactionTotal:R,fiatTransactionTotal:M,hexTransactionTotal:I,isSetApproveForAll:D}){const j=(0,o.useDispatch)(),{txParams:{data:L}={}}=x,F=(0,o.useSelector)(m.getCurrentCurrency),W=(0,o.useSelector)(f.getNativeCurrency),U=(0,o.useSelector)(m.getSubjectMetadata),$=(0,o.useSelector)(m.getUseNonceField),B=(0,o.useSelector)(m.getNextSuggestedNonce),H=(0,o.useSelector)(m.getCustomNonceValue),G=(0,o.useSelector)(m.getCurrentChainId),q=(0,o.useSelector)(m.getRpcPrefsForCurrentProvider),V=(0,o.useSelector)(m.getIsMultiLayerFeeNetwork),Y=(0,o.useSelector)(m.checkNetworkAndAccountSupports1559),K=(0,o.useSelector)((z=A,e=>(0,f.isAddressLedger)(e,z)));var z;const[Z,X]=(0,a.useState)(""),[Q,J]=(0,a.useState)(""),[ee,te]=(0,a.useState)(!1),ne=(0,o.useSelector)(m.getEIP1559V2Enabled)&&Y,ae=(0,a.useRef)(O),{approveTransaction:re,showCustomizeGasPopover:oe,closeCustomizeGasPopover:se}=(0,h.useApproveTransaction)();(0,a.useEffect)((()=>{Z&&ae.current!==O&&X(O),ae.current=O}),[Z,O]);const ce=(0,a.useRef)(B),ie=(0,a.useRef)(H);(0,a.useEffect)((()=>{ce.current===B&&ie.current===H||J(null!==B&&H>B?`Nonce is higher than suggested nonce of ${B}`:""),ie.current=H,ce.current=B}),[H,B]);const le=(0,a.useCallback)((async()=>{const{isContractAddress:e}=await(0,u.readAddressAsContract)(global.eth,S);te(e)}),[te,S]);(0,a.useEffect)((()=>{le()}),[le]);const{origin:ue}=x,de=ue||"",{iconUrl:pe=""}=U[ue]||{};let fe;e===T.ERC20?fe=`${Number(O)} ${r}`:e!==T.ERC721&&e!==T.ERC1155||(fe=t);const me=n?(0,l.calcTokenAmount)(n,N).toString(10):"",he=Z?(0,b.getCustomTxParamsData)(L,{customPermissionAmount:Z,decimals:N}):null,ge=(0,v.parseStandardTokenTransactionData)(L),Ee=(0,l.getTokenApprovedParam)(ge);return r===undefined&&t===undefined?a.default.createElement(y.default,null):a.default.createElement(d.GasFeeContextProvider,{transaction:x},a.default.createElement(s.default,{toAddress:S,identiconAddress:S,showAccountInHeader:!0,title:fe,customTokenAmount:String(Z),dappProposedTokenAmount:O,currentTokenBalance:me,contentComponent:a.default.createElement(p.TransactionModalContextProvider,null,a.default.createElement(k.default,{userAddress:A,isSetApproveForAll:D,setApproveForAllArg:Ee,decimals:N,siteImage:pe,setCustomAmount:X,customTokenAmount:String(Z),tokenAmount:O,origin:de,tokenSymbol:r,tokenImage:w,tokenBalance:me,tokenId:P,assetName:t,assetStandard:e,tokenAddress:C,showCustomizeGasModal:re,showEditApprovalPermissionModal:({customTokenAmount:t,decimals:n,origin:a,setCustomAmount:r,tokenAmount:o,tokenBalance:s,tokenSymbol:c})=>j((0,i.showModal)({name:"EDIT_APPROVAL_PERMISSION",customTokenAmount:t,decimals:n,origin:a,setCustomAmount:r,tokenAmount:o,tokenBalance:s,tokenSymbol:c,tokenId:P,assetStandard:e})),data:he||L,toAddress:S,currentCurrency:F,nativeCurrency:W,ethTransactionTotal:R,fiatTransactionTotal:M,hexTransactionTotal:I,useNonceField:$,nextNonce:B,customNonceValue:H,updateCustomNonce:e=>{j((0,i.updateCustomNonce)(e))},getNextNonce:()=>j((0,i.getNextNonce)()),showCustomizeNonceModal:({useNonceField:e,nextNonce:t,customNonceValue:n,updateCustomNonce:a,getNextNonce:r})=>j((0,i.showModal)({name:"CUSTOMIZE_NONCE",useNonceField:e,nextNonce:t,customNonceValue:n,updateCustomNonce:a,getNextNonce:r})),warning:Q,txData:x,fromAddressIsLedger:K,chainId:G,rpcPrefs:q,isContract:ee,isMultiLayerFeeNetwork:V,supportsEIP1559V2:ne}),oe&&!ne&&a.default.createElement(_.default,{onClose:se,mode:c.EDIT_GAS_MODES.MODIFY_IN_PLACE,transaction:x}),ne&&a.default.createElement(a.default.Fragment,null,a.default.createElement(E.default,null),a.default.createElement(g.default,null))),hideSenderToRecipient:!0,customTxParamsData:he}))}O.propTypes={assetStandard:r.default.string,assetName:r.default.string,tokenAddress:r.default.string,userBalance:r.default.string,tokenSymbol:r.default.string,decimals:r.default.string,tokenImage:r.default.string,tokenAmount:r.default.string,tokenId:r.default.string,userAddress:r.default.string,toAddress:r.default.string,transaction:r.default.shape({origin:r.default.string,txParams:r.default.shape({data:r.default.string,to:r.default.string,from:r.default.string})}),ethTransactionTotal:r.default.string,fiatTransactionTotal:r.default.string,hexTransactionTotal:r.default.string,isSetApproveForAll:r.default.bool}}}},{package:"$root$"}],[7960,{"../../../shared/constants/transaction":7329,"../../../shared/modules/transaction.utils":7345,"../../helpers/utils/conversions.util":7888,"../../helpers/utils/token-util":7904},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getCustomTxParamsData=function(e,{customPermissionAmount:t,decimals:n}){const c=(0,r.parseStandardTokenTransactionData)(e);if(!c)throw new Error("Invalid data");if(c.name!==a.TRANSACTION_TYPES.TOKEN_METHOD_APPROVE)throw new Error(`Invalid data; should be 'approve' method, but instead is '${c.name}'`);let i=(0,s.getTokenAddressParam)(c);i.startsWith("0x")&&(i=i.substring(2));const[l,u]=e.split(i);if(!l||!u)throw new Error("Invalid data");if(64!==u.length)throw new Error("Invalid token value; should be exactly 64 hex digits long (u256)");let d=(0,o.decimalToHex)((0,s.calcTokenValue)(t,n));if(d.length>64)throw new Error("Custom value is larger than u256");d=d.padStart(u.length,"0");return`${l}${i}${d}`};var a=e("../../../shared/constants/transaction"),r=e("../../../shared/modules/transaction.utils"),o=e("../../helpers/utils/conversions.util"),s=e("../../helpers/utils/token-util")}}},{package:"$root$"}],[7961,{"./confirm-approve":7959},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./confirm-approve"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[7962,{"../../../shared/constants/metametrics":7321,"../../../shared/constants/time":7327,"../../../shared/modules/conversion.utils":7332,"../../components/app/account-list-item":7348,"../../components/ui/button":7686,"../../components/ui/icon/copy-icon.component":7726,"../../components/ui/identicon":7755,"../../components/ui/tooltip":7832,classnames:2484,"copy-to-clipboard":2518,"prop-types":5840,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=h(e("prop-types")),o=h(e("copy-to-clipboard")),s=h(e("classnames")),c=h(e("../../components/app/account-list-item")),i=h(e("../../components/ui/button")),l=h(e("../../components/ui/identicon")),u=h(e("../../components/ui/tooltip")),d=h(e("../../components/ui/icon/copy-icon.component")),p=e("../../../shared/constants/metametrics"),f=e("../../../shared/constants/time"),m=e("../../../shared/modules/conversion.utils");function h(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class _ extends a.Component{constructor(...e){super(...e),E(this,"state",{fromAccount:this.props.fromAccount,copyToClipboardPressed:!1,hasCopied:!1}),E(this,"copyMessage",(()=>{(0,o.default)(this.state.rawMessage),this.context.trackEvent({category:p.EVENT.CATEGORIES.MESSAGES,event:"Copy",properties:{action:"Decrypt Message Copy",legacy_event:!0}}),this.setState({hasCopied:!0}),setTimeout((()=>this.setState({hasCopied:!1})),3*f.SECOND)})),E(this,"renderHeader",(()=>a.default.createElement("div",{className:"request-decrypt-message__header"},a.default.createElement("div",{className:"request-decrypt-message__header-background"}),a.default.createElement("div",{className:"request-decrypt-message__header__text"},this.context.t("decryptRequest")),a.default.createElement("div",{className:"request-decrypt-message__header__tip-container"},a.default.createElement("div",{className:"request-decrypt-message__header__tip"}))))),E(this,"renderAccount",(()=>{const{fromAccount:e}=this.state,{t:t}=this.context;return a.default.createElement("div",{className:"request-decrypt-message__account"},a.default.createElement("div",{className:"request-decrypt-message__account-text"},`${t("account")}:`),a.default.createElement("div",{className:"request-decrypt-message__account-item"},a.default.createElement(c.default,{account:e})))})),E(this,"renderBalance",(()=>{const{conversionRate:e}=this.props,{fromAccount:{balance:t}}=this.state,{t:n}=this.context,r=(0,m.conversionUtil)(t,{fromNumericBase:"hex",toNumericBase:"dec",fromDenomination:"WEI",numberOfDecimals:6,conversionRate:e});return a.default.createElement("div",{className:"request-decrypt-message__balance"},a.default.createElement("div",{className:"request-decrypt-message__balance-text"},`${n("balance")}:`),a.default.createElement("div",{className:"request-decrypt-message__balance-value"},`${r} ETH`))})),E(this,"renderRequestIcon",(()=>{const{requesterAddress:e}=this.props;return a.default.createElement("div",{className:"request-decrypt-message__request-icon"},a.default.createElement(l.default,{diameter:40,address:e}))})),E(this,"renderAccountInfo",(()=>a.default.createElement("div",{className:"request-decrypt-message__account-info"},this.renderAccount(),this.renderRequestIcon(),this.renderBalance()))),E(this,"renderBody",(()=>{const{decryptMessageInline:e,subjectMetadata:t,txData:n}=this.props,{t:r}=this.context,o=t[n.msgParams.origin],c=(null==o?void 0:o.name)||n.msgParams.origin,i=r("decryptMessageNotice",[n.msgParams.origin]),{hasCopied:l,hasDecrypted:p,hasError:f,rawMessage:m,errorMessage:h,copyToClipboardPressed:g}=this.state;return a.default.createElement("div",{className:"request-decrypt-message__body"},this.renderAccountInfo(),a.default.createElement("div",{className:"request-decrypt-message__visual"},a.default.createElement("section",null,null!=o&&o.iconUrl?a.default.createElement("img",{className:"request-decrypt-message__visual-identicon",src:o.iconUrl,alt:""}):a.default.createElement("i",{className:"request-decrypt-message__visual-identicon--default"},c.charAt(0).toUpperCase()),a.default.createElement("div",{className:"request-decrypt-message__notice"},i))),a.default.createElement("div",{className:"request-decrypt-message__message"},a.default.createElement("div",{className:"request-decrypt-message__message-text"},p||f?m:n.msgParams.data,f?h:""),a.default.createElement("div",{className:(0,s.default)("request-decrypt-message__message-cover",{"request-decrypt-message__message-lock--pressed":p||f})}),a.default.createElement("div",{className:(0,s.default)("request-decrypt-message__message-lock",{"request-decrypt-message__message-lock--pressed":p||f}),onClick:t=>{e(n,t).then((e=>{e.error?this.setState({hasError:!0,errorMessage:this.context.t("decryptInlineError",[e.error])}):this.setState({hasDecrypted:!0,rawMessage:e.rawData})}))}},a.default.createElement("div",{className:"request-decrypt-message__message-lock__container"},a.default.createElement("i",{className:"fa fa-lock fa-lg request-decrypt-message__message-lock__container__icon"}),a.default.createElement("div",{className:"request-decrypt-message__message-lock__container__text"},r("decryptMetamask"))))),p?a.default.createElement("div",{className:(0,s.default)({"request-decrypt-message__message-copy":!0,"request-decrypt-message__message-copy--pressed":g}),onClick:()=>this.copyMessage(),onMouseDown:()=>this.setState({copyToClipboardPressed:!0}),onMouseUp:()=>this.setState({copyToClipboardPressed:!1})},a.default.createElement(u.default,{position:"bottom",title:r(l?"copiedExclamation":"copyToClipboard"),wrapperClassName:"request-decrypt-message__message-copy-tooltip",style:{display:"flex",alignItems:"center"}},a.default.createElement("div",{className:"request-decrypt-message__message-copy-text"},r("decryptCopy")),a.default.createElement(d.default,{size:17,color:"var(--color-primary-default)"}))):a.default.createElement("div",null))})),E(this,"renderFooter",(()=>{const{cancelDecryptMessage:e,clearConfirmTransaction:t,decryptMessage:n,history:r,mostRecentOverviewPage:o,txData:s}=this.props,{trackEvent:c,t:l}=this.context;return a.default.createElement("div",{className:"request-decrypt-message__footer"},a.default.createElement(i.default,{type:"secondary",large:!0,className:"request-decrypt-message__footer__cancel-button",onClick:async n=>{await e(s,n),c({category:p.EVENT.CATEGORIES.MESSAGES,event:"Cancel",properties:{action:"Decrypt Message Request",legacy_event:!0}}),t(),r.push(o)}},l("cancel")),a.default.createElement(i.default,{type:"primary",large:!0,className:"request-decrypt-message__footer__sign-button",onClick:async e=>{await n(s,e),c({category:p.EVENT.CATEGORIES.MESSAGES,event:"Confirm",properties:{action:"Decrypt Message Request",legacy_event:!0}}),t(),r.push(o)}},l("decrypt")))})),E(this,"render",(()=>a.default.createElement("div",{className:"request-decrypt-message__container"},this.renderHeader(),this.renderBody(),this.renderFooter())))}}n.default=_,E(_,"contextTypes",{t:r.default.func.isRequired,trackEvent:r.default.func.isRequired}),E(_,"propTypes",{fromAccount:r.default.shape({address:r.default.string.isRequired,balance:r.default.string,name:r.default.string}).isRequired,clearConfirmTransaction:r.default.func.isRequired,cancelDecryptMessage:r.default.func.isRequired,decryptMessage:r.default.func.isRequired,decryptMessageInline:r.default.func.isRequired,conversionRate:r.default.number,history:r.default.object.isRequired,mostRecentOverviewPage:r.default.string.isRequired,requesterAddress:r.default.string,txData:r.default.object,subjectMetadata:r.default.object})}}},{package:"$root$"}],[7963,{"../../ducks/confirm-transaction/confirm-transaction.duck":7852,"../../ducks/history/history":7856,"../../selectors":8267,"../../store/actions":8273,"./confirm-decrypt-message.component":7962,"react-redux":6775,"react-router-dom":6795,redux:6852},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=e("react-redux"),o=e("redux"),s=e("react-router-dom"),c=e("../../store/actions"),i=e("../../selectors"),l=e("../../ducks/confirm-transaction/confirm-transaction.duck"),u=e("../../ducks/history/history"),d=(a=e("./confirm-decrypt-message.component"))&&a.__esModule?a:{default:a};var p=(0,o.compose)(s.withRouter,(0,r.connect)((function(e){const{metamask:{subjectMetadata:t={}}}=e,n=(0,i.unconfirmedTransactionsListSelector)(e)[0],{msgParams:{from:a}}=n;return{txData:n,subjectMetadata:t,fromAccount:(0,i.getTargetAccountWithSendEtherInfo)(e,a),requester:null,requesterAddress:null,conversionRate:(0,i.conversionRateSelector)(e),mostRecentOverviewPage:(0,u.getMostRecentOverviewPage)(e)}}),(function(e){return{goHome:()=>e((0,c.goHome)()),clearConfirmTransaction:()=>e((0,l.clearConfirmTransaction)()),decryptMessage:(t,n)=>{const a=t.msgParams;return a.metamaskId=t.id,n.stopPropagation(n),e((0,c.decryptMsg)(a))},cancelDecryptMessage:(t,n)=>(n.stopPropagation(n),e((0,c.cancelDecryptMsg)(t))),decryptMessageInline:(t,n)=>{const a=t.msgParams;return a.metamaskId=t.id,n.stopPropagation(n),e((0,c.decryptMsgInline)(a))}}})))(d.default);n.default=p}}},{package:"$root$"}],[7964,{"./confirm-decrypt-message.container":7963},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./confirm-decrypt-message.container"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[7965,{"../../../shared/modules/buffer-utils":7330,"../confirm-transaction-base":7982,"prop-types":5840,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=c(e("prop-types")),o=c(e("../confirm-transaction-base")),s=e("../../../shared/modules/buffer-utils");function c(e){return e&&e.__esModule?e:{default:e}}function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class u extends a.Component{renderData(){const{t:e}=this.context,{txData:{origin:t,txParams:{data:n}={}}={}}=this.props;return a.default.createElement("div",{className:"confirm-page-container-content__data"},a.default.createElement("div",{className:"confirm-page-container-content__data-box"},a.default.createElement("div",{className:"confirm-page-container-content__data-field"},a.default.createElement("div",{className:"confirm-page-container-content__data-field-label"},`${e("origin")}:`),a.default.createElement("div",null,t)),a.default.createElement("div",{className:"confirm-page-container-content__data-field"},a.default.createElement("div",{className:"confirm-page-container-content__data-field-label"},`${e("bytes")}:`),a.default.createElement("div",null,(0,s.toBuffer)(n).length))),a.default.createElement("div",{className:"confirm-page-container-content__data-box-label"},`${e("hexData")}:`),a.default.createElement("div",{className:"confirm-page-container-content__data-box"},n))}render(){return a.default.createElement(o.default,{actionKey:"contractDeployment",dataComponent:this.renderData()})}}n.default=u,l(u,"contextTypes",{t:r.default.func}),l(u,"propTypes",{txData:r.default.object})}}},{package:"$root$"}],[7966,{"./confirm-deploy-contract.component":7965,"react-redux":6775},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=e("react-redux"),o=(a=e("./confirm-deploy-contract.component"))&&a.__esModule?a:{default:a};var s=(0,r.connect)((e=>{const{confirmTransaction:{txData:t}={}}=e;return{txData:t}}))(o.default);n.default=s}}},{package:"$root$"}],[7967,{"./confirm-deploy-contract.container":7966},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./confirm-deploy-contract.container"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[7968,{"../../../shared/constants/metametrics":7321,"../../../shared/modules/conversion.utils":7332,"../../components/app/account-list-item":7348,"../../components/ui/button":7686,"../../components/ui/identicon":7755,"../../components/ui/site-origin":7812,"prop-types":5840,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=d(e("prop-types")),o=d(e("../../components/app/account-list-item")),s=d(e("../../components/ui/button")),c=d(e("../../components/ui/identicon")),i=e("../../../shared/constants/metametrics"),l=e("../../../shared/modules/conversion.utils"),u=d(e("../../components/ui/site-origin"));function d(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class m extends a.Component{constructor(...e){super(...e),f(this,"renderHeader",(()=>a.default.createElement("div",{className:"request-encryption-public-key__header"},a.default.createElement("div",{className:"request-encryption-public-key__header-background"}),a.default.createElement("div",{className:"request-encryption-public-key__header__text"},this.context.t("encryptionPublicKeyRequest")),a.default.createElement("div",{className:"request-encryption-public-key__header__tip-container"},a.default.createElement("div",{className:"request-encryption-public-key__header__tip"}))))),f(this,"renderAccount",(()=>{const{fromAccount:e}=this.props,{t:t}=this.context;return a.default.createElement("div",{className:"request-encryption-public-key__account"},a.default.createElement("div",{className:"request-encryption-public-key__account-text"},`${t("account")}:`),a.default.createElement("div",{className:"request-encryption-public-key__account-item"},a.default.createElement(o.default,{account:e})))})),f(this,"renderBalance",(()=>{const{conversionRate:e,nativeCurrency:t,fromAccount:{balance:n}}=this.props,{t:r}=this.context,o=(0,l.conversionUtil)(n,{fromNumericBase:"hex",toNumericBase:"dec",fromDenomination:"WEI",numberOfDecimals:6,conversionRate:e});return a.default.createElement("div",{className:"request-encryption-public-key__balance"},a.default.createElement("div",{className:"request-encryption-public-key__balance-text"},`${r("balance")}:`),a.default.createElement("div",{className:"request-encryption-public-key__balance-value"},`${o} ${t}`))})),f(this,"renderRequestIcon",(()=>{const{requesterAddress:e}=this.props;return a.default.createElement("div",{className:"request-encryption-public-key__request-icon"},a.default.createElement(c.default,{diameter:40,address:e}))})),f(this,"renderAccountInfo",(()=>a.default.createElement("div",{className:"request-encryption-public-key__account-info"},this.renderAccount(),this.renderRequestIcon(),this.renderBalance()))),f(this,"renderBody",(()=>{const{subjectMetadata:e,txData:t}=this.props,{t:n}=this.context,r=e[t.origin],o=n("encryptionPublicKeyNotice",[a.default.createElement(u.default,{siteOrigin:t.origin,key:t.origin})]),s=(null==r?void 0:r.hostname)||t.origin;return a.default.createElement("div",{className:"request-encryption-public-key__body"},this.renderAccountInfo(),a.default.createElement("div",{className:"request-encryption-public-key__visual"},a.default.createElement("section",null,null!=r&&r.iconUrl?a.default.createElement("img",{className:"request-encryption-public-key__visual-identicon",src:r.iconUrl,alt:""}):a.default.createElement("i",{className:"request-encryption-public-key__visual-identicon--default"},s.charAt(0).toUpperCase()),a.default.createElement("div",{className:"request-encryption-public-key__notice"},o))))})),f(this,"renderFooter",(()=>{const{cancelEncryptionPublicKey:e,clearConfirmTransaction:t,encryptionPublicKey:n,history:r,mostRecentOverviewPage:o,txData:c}=this.props,{t:l,trackEvent:u}=this.context;return a.default.createElement("div",{className:"request-encryption-public-key__footer"},a.default.createElement(s.default,{type:"secondary",large:!0,className:"request-encryption-public-key__footer__cancel-button",onClick:async n=>{await e(c,n),u({category:i.EVENT.CATEGORIES.MESSAGES,event:"Cancel",properties:{action:"Encryption public key Request",legacy_event:!0}}),t(),r.push(o)}},this.context.t("cancel")),a.default.createElement(s.default,{type:"primary",large:!0,className:"request-encryption-public-key__footer__sign-button",onClick:async e=>{await n(c,e),this.context.trackEvent({category:i.EVENT.CATEGORIES.MESSAGES,event:"Confirm",properties:{action:"Encryption public key Request",legacy_event:!0}}),t(),r.push(o)}},l("provide")))})),f(this,"render",(()=>a.default.createElement("div",{className:"request-encryption-public-key__container"},this.renderHeader(),this.renderBody(),this.renderFooter())))}}n.default=m,f(m,"contextTypes",{t:r.default.func.isRequired,trackEvent:r.default.func.isRequired}),f(m,"propTypes",{fromAccount:r.default.shape({address:r.default.string.isRequired,balance:r.default.string,name:r.default.string}).isRequired,clearConfirmTransaction:r.default.func.isRequired,cancelEncryptionPublicKey:r.default.func.isRequired,encryptionPublicKey:r.default.func.isRequired,conversionRate:r.default.number,history:r.default.object.isRequired,requesterAddress:r.default.string,txData:r.default.object,subjectMetadata:r.default.object,mostRecentOverviewPage:r.default.string.isRequired,nativeCurrency:r.default.string.isRequired})}}},{package:"$root$"}],[7969,{"../../ducks/confirm-transaction/confirm-transaction.duck":7852,"../../ducks/history/history":7856,"../../ducks/metamask/metamask":7859,"../../selectors":8267,"../../store/actions":8273,"./confirm-encryption-public-key.component":7968,"react-redux":6775,"react-router-dom":6795,redux:6852},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=e("react-redux"),o=e("redux"),s=e("react-router-dom"),c=e("../../store/actions"),i=e("../../selectors"),l=e("../../ducks/confirm-transaction/confirm-transaction.duck"),u=e("../../ducks/history/history"),d=e("../../ducks/metamask/metamask"),p=(a=e("./confirm-encryption-public-key.component"))&&a.__esModule?a:{default:a};var f=(0,o.compose)(s.withRouter,(0,r.connect)((function(e){const{metamask:{subjectMetadata:t={}}}=e,n=(0,i.unconfirmedTransactionsListSelector)(e)[0],{msgParams:a}=n;return{txData:n,subjectMetadata:t,fromAccount:(0,i.getTargetAccountWithSendEtherInfo)(e,a),requester:null,requesterAddress:null,conversionRate:(0,i.conversionRateSelector)(e),mostRecentOverviewPage:(0,u.getMostRecentOverviewPage)(e),nativeCurrency:(0,d.getNativeCurrency)(e)}}),(function(e){return{goHome:()=>e((0,c.goHome)()),clearConfirmTransaction:()=>e((0,l.clearConfirmTransaction)()),encryptionPublicKey:(t,n)=>{const a={data:t.msgParams,metamaskId:t.id};return n.stopPropagation(),e((0,c.encryptionPublicKeyMsg)(a))},cancelEncryptionPublicKey:(t,n)=>(n.stopPropagation(),e((0,c.cancelEncryptionPublicKeyMsg)(t)))}})))(p.default);n.default=f}}},{package:"$root$"}],[7970,{"./confirm-encryption-public-key.container":7969},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./confirm-encryption-public-key.container"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[7971,{"../../../shared/constants/metametrics":7321,"../../../shared/constants/transaction":7329,"../../components/ui/button":7686,"../../components/ui/identicon":7755,"../../components/ui/token-balance":7827,"../../contexts/i18n":7844,"../../contexts/metametrics":7845,"../../ducks/history/history":7856,"../../ducks/metamask/metamask":7859,"../../helpers/constants/routes":7872,"../../store/actions":8273,react:6817,"react-redux":6775,"react-router-dom":6795},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=_(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=e("react-redux"),o=e("react-router-dom"),s=e("../../helpers/constants/routes"),c=E(e("../../components/ui/button")),i=E(e("../../components/ui/identicon")),l=E(e("../../components/ui/token-balance")),u=e("../../contexts/i18n"),d=e("../../contexts/metametrics"),p=e("../../ducks/history/history"),f=e("../../ducks/metamask/metamask"),m=e("../../store/actions"),h=e("../../../shared/constants/metametrics"),g=e("../../../shared/constants/transaction");function E(e){return e&&e.__esModule?e:{default:e}}function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_=function(e){return e?n:t})(e)}var y=()=>{const e=(0,a.useContext)(u.I18nContext),t=(0,r.useDispatch)(),n=(0,o.useHistory)(),E=(0,a.useContext)(d.MetaMetricsContext),_=(0,r.useSelector)(p.getMostRecentOverviewPage),y=(0,r.useSelector)(f.getPendingTokens),v=(0,a.useCallback)((async()=>{var e;await t((0,m.addTokens)(y));const a=Object.values(y),r=null==a||null===(e=a[0].address)||void 0===e?void 0:e.toLowerCase();a.forEach((e=>{E({event:h.EVENT_NAMES.TOKEN_ADDED,category:h.EVENT.CATEGORIES.WALLET,sensitiveProperties:{token_symbol:e.symbol,token_contract_address:e.address,token_decimal_precision:e.decimals,unlisted:e.unlisted,source:e.isCustom?h.EVENT.SOURCE.TOKEN.CUSTOM:h.EVENT.SOURCE.TOKEN.LIST,token_standard:g.TOKEN_STANDARDS.ERC20,asset_type:g.ASSET_TYPES.TOKEN}})})),t((0,m.clearPendingTokens)()),r?n.push(`${s.ASSET_ROUTE}/${r}`):n.push(_)}),[t,n,_,y,E]);return(0,a.useEffect)((()=>{0===Object.keys(y).length&&n.push(_)}),[]),a.default.createElement("div",{className:"page-container"},a.default.createElement("div",{className:"page-container__header"},a.default.createElement("div",{className:"page-container__title"},e("importTokensCamelCase")),a.default.createElement("div",{className:"page-container__subtitle"},e("likeToImportTokens"))),a.default.createElement("div",{className:"page-container__content"},a.default.createElement("div",{className:"confirm-import-token"},a.default.createElement("div",{className:"confirm-import-token__header"},a.default.createElement("div",{className:"confirm-import-token__token"},e("token")),a.default.createElement("div",{className:"confirm-import-token__balance"},e("balance"))),a.default.createElement("div",{className:"confirm-import-token__token-list"},Object.entries(y).map((([e,t])=>{const{name:n,symbol:r}=t;return a.default.createElement("div",{className:"confirm-import-token__token-list-item",key:e},a.default.createElement("div",{className:"confirm-import-token__token confirm-import-token__data"},a.default.createElement(i.default,{className:"confirm-import-token__token-icon",diameter:48,address:e}),a.default.createElement("div",{className:"confirm-import-token__name"},((e,t)=>e===undefined?t:`${e} (${t})`)(n,r))),a.default.createElement("div",{className:"confirm-import-token__balance"},a.default.createElement(l.default,{token:t})))}))))),a.default.createElement("div",{className:"page-container__footer"},a.default.createElement("footer",null,a.default.createElement(c.default,{type:"secondary",large:!0,className:"page-container__footer-button",onClick:()=>{t((0,m.clearPendingTokens)()),n.push(s.IMPORT_TOKEN_ROUTE)},rounded:!1},e("back")),a.default.createElement(c.default,{type:"primary",large:!0,className:"page-container__footer-button",onClick:v,rounded:!1},e("importTokensCamelCase")))))};n.default=y}}},{package:"$root$"}],[7972,{"./confirm-import-token":7971},function(){with(this)return function(){"use strict";return function(e,t,n){var a;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=((a=e("./confirm-import-token"))&&a.__esModule?a:{default:a}).default;n.default=r}}},{package:"$root$"}],[7973,{"../../helpers/constants/routes":7872,"../confirm-transaction-base":7982,"prop-types":5840,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=c(e("prop-types")),o=c(e("../confirm-transaction-base")),s=e("../../helpers/constants/routes");function c(e){return e&&e.__esModule?e:{default:e}}function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class u extends a.Component{handleEdit({txData:e}){const{editTransaction:t,history:n}=this.props;t(e).then((()=>{n.push(s.SEND_ROUTE)}))}shouldHideData(){const{txParams:e={}}=this.props;return!e.data}render(){const e=this.shouldHideData();return a.default.createElement(o.default,{actionKey:"confirm",hideData:e,onEdit:e=>this.handleEdit(e)})}}n.default=u,l(u,"contextTypes",{t:r.default.func}),l(u,"propTypes",{editTransaction:r.default.func,history:r.default.object,txParams:r.default.object})}}},{package:"$root$"}],[7974,{"../../../shared/constants/transaction":7329,"../../ducks/confirm-transaction/confirm-transaction.duck":7852,"../../ducks/send":7861,"./confirm-send-ether.component":7973,"react-redux":6775,"react-router-dom":6795,redux:6852},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=e("react-redux"),o=e("redux"),s=e("react-router-dom"),c=e("../../ducks/send"),i=e("../../ducks/confirm-transaction/confirm-transaction.duck"),l=e("../../../shared/constants/transaction"),u=(a=e("./confirm-send-ether.component"))&&a.__esModule?a:{default:a};var d=(0,o.compose)(s.withRouter,(0,r.connect)((e=>{const{confirmTransaction:{txData:{txParams:t}={}}}=e;return{txParams:t}}),(e=>({editTransaction:async t=>{const{id:n}=t;await e((0,c.editExistingTransaction)(l.ASSET_TYPES.NATIVE,n.toString())),e((0,i.clearConfirmTransaction)())}}))))(u.default);n.default=d}}},{package:"$root$"}],[7975,{"./confirm-send-ether.container":7974},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./confirm-send-ether.container"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[7976,{"../../../shared/constants/transaction":7329,"../../ducks/confirm-transaction/confirm-transaction.duck":7852,"../../ducks/metamask/metamask":7859,"../../ducks/send":7861,"../../helpers/constants/routes":7872,"../../selectors":8267,"../../store/actions":8273,"../confirm-token-transaction-base/confirm-token-transaction-base":7978,"prop-types":5840,react:6817,"react-redux":6775,"react-router-dom":6795},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=g;var a=h(e("react")),r=h(e("prop-types")),o=e("react-redux"),s=e("react-router-dom"),c=h(e("../confirm-token-transaction-base/confirm-token-transaction-base")),i=e("../../helpers/constants/routes"),l=e("../../ducks/send"),u=e("../../selectors"),d=e("../../ducks/metamask/metamask"),p=e("../../ducks/confirm-transaction/confirm-transaction.duck"),f=e("../../store/actions"),m=e("../../../shared/constants/transaction");function h(e){return e&&e.__esModule?e:{default:e}}function g({assetStandard:e,toAddress:t,tokenAddress:n,assetName:r,tokenSymbol:h,tokenAmount:g,tokenId:E,transaction:_,image:y,ethTransactionTotal:v,fiatTransactionTotal:T,hexMaximumTransactionFee:b}){const k=(0,o.useDispatch)(),N=(0,s.useHistory)(),w=(0,o.useSelector)(d.getConversionRate),O=(0,o.useSelector)(d.getNativeCurrency),P=(0,o.useSelector)(u.getCurrentCurrency),A=(0,o.useSelector)(u.contractExchangeRateSelector);let S,C;return e===m.ERC721?(S=r,C=`#${E}`):e===m.ERC20&&(S=`${g} ${h}`),a.default.createElement(c.default,{onEdit:e=>{(async({txData:e})=>{const{id:t}=e;await k((0,l.editExistingTransaction)(m.ASSET_TYPES.TOKEN,t.toString())),k((0,p.clearConfirmTransaction)()),k((0,f.showSendTokenPage)())})(e).then((()=>{N.push(i.SEND_ROUTE)}))},conversionRate:w,currentCurrency:P,nativeCurrency:O,contractExchangeRate:A,title:S,subtitle:C,assetStandard:e,assetName:r,tokenSymbol:h,tokenAmount:g,tokenId:E,transaction:_,image:y,toAddress:t,tokenAddress:n,ethTransactionTotal:v,fiatTransactionTotal:T,hexMaximumTransactionFee:b})}g.propTypes={tokenAmount:r.default.string,assetStandard:r.default.string,assetName:r.default.string,tokenSymbol:r.default.string,image:r.default.string,tokenId:r.default.string,toAddress:r.default.string,tokenAddress:r.default.string,transaction:r.default.shape({origin:r.default.string,txParams:r.default.shape({data:r.default.string,to:r.default.string,from:r.default.string})}),ethTransactionTotal:r.default.string,fiatTransactionTotal:r.default.string,hexMaximumTransactionFee:r.default.string}}}},{package:"$root$"}],[7977,{"./confirm-send-token":7976},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./confirm-send-token"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[7978,{"../../../shared/constants/transaction":7329,"../../components/app/user-preferenced-currency-display":7661,"../../contexts/i18n":7844,"../../ducks/metamask/metamask":7859,"../../helpers/constants/common":7865,"../../helpers/utils/confirm-tx.util":7887,"../../helpers/utils/conversions.util":7888,"../../selectors":8267,"../confirm-transaction-base":7982,"bignumber.js":2283,"prop-types":5840,react:6817,"react-redux":6775},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=_;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=g(e("prop-types")),o=g(e("bignumber.js")),s=e("react-redux"),c=e("../../contexts/i18n"),i=g(e("../confirm-transaction-base")),l=g(e("../../components/app/user-preferenced-currency-display")),u=e("../../helpers/utils/confirm-tx.util"),d=e("../../helpers/utils/conversions.util"),p=e("../../helpers/constants/common"),f=e("../../selectors"),m=e("../../ducks/metamask/metamask"),h=e("../../../shared/constants/transaction");function g(e){return e&&e.__esModule?e:{default:e}}function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}function _({image:e="",assetName:t,toAddress:n,tokenAddress:r,tokenAmount:g="0",tokenSymbol:E,tokenId:_,assetStandard:y,onEdit:v,ethTransactionTotal:T,fiatTransactionTotal:b,hexMaximumTransactionFee:k}){const N=(0,a.useContext)(c.I18nContext),w=(0,s.useSelector)(f.contractExchangeRateSelector),O=(0,s.useSelector)(m.getNativeCurrency),P=(0,s.useSelector)(f.getCurrentCurrency),A=(0,s.useSelector)(m.getConversionRate),S=Number((0,d.hexWEIToDecETH)(k));let C,x;y===h.ERC721||y===h.ERC1155?(C=t,x=`#${_}`):y===h.ERC20&&(C=`${g} ${E}`);const R=(0,a.useMemo)((()=>{if("0"===g||!w)return"0";const e=new o.default(g).times(new o.default(w?String(w):0)).toFixed();return(0,d.getWeiHexFromDecimalValue)({value:e,fromCurrency:p.ETH,fromDenomination:p.ETH})}),[g,w]),M=(0,a.useMemo)((()=>{if(void 0===w)return(0,u.formatCurrency)(b,P);const e=(0,u.convertTokenToFiat)({value:g,toCurrency:P,conversionRate:A,contractExchangeRate:w}),t=(0,u.addFiat)(e,b),n=(0,u.roundExponential)(t);return(0,u.formatCurrency)(n,P)}),[P,A,w,b,g]);return a.default.createElement(i.default,{toAddress:n,image:e,onEdit:v,tokenAddress:r,title:C,subtitleComponent:w===undefined&&x===undefined?a.default.createElement("span",null,N("noConversionRateAvailable")):x?a.default.createElement("span",null,x):a.default.createElement(l.default,{value:R,type:p.PRIMARY,showEthLogo:!0,hideLabel:!0}),primaryTotalTextOverride:`${C} + ${T} ${O}`,primaryTotalTextOverrideMaxAmount:`${C} + ${S} ${O}`,secondaryTotalTextOverride:M})}_.propTypes={image:r.default.string,assetName:r.default.string,toAddress:r.default.string,tokenAddress:r.default.string,tokenAmount:r.default.string,tokenSymbol:r.default.string,tokenId:r.default.string,assetStandard:r.default.string,onEdit:r.default.func,ethTransactionTotal:r.default.string,fiatTransactionTotal:r.default.string,hexMaximumTransactionFee:r.default.string}}}},{package:"$root$"}],[7979,{"./confirm-token-transaction-base":7978},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./confirm-token-transaction-base"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[7980,{"../../../shared/constants/metametrics":7321,"../../../shared/constants/network":7322,"../../../shared/constants/transaction":7329,"../../../shared/modules/buffer-utils":7330,"../../components/app/confirm-page-container":7419,"../../components/app/gas-details-item":7483,"../../components/app/gas-timing/gas-timing.component":7484,"../../components/app/ledger-instruction-field":7490,"../../components/app/multilayer-fee-message":7562,"../../components/app/transaction-decoding":7644,"../../components/app/transaction-decoding/components/ui/copy-raw-data":7642,"../../components/app/transaction-detail-item/transaction-detail-item.component":7647,"../../components/app/transaction-detail/transaction-detail.component":7648,"../../components/app/user-preferenced-currency-display":7661,"../../components/ui/actionable-message":7679,"../../components/ui/disclosure":7706,"../../components/ui/info-tooltip/info-tooltip":7758,"../../components/ui/loading-heartbeat":7763,"../../components/ui/text-field":7822,"../../components/ui/typography/typography":7837,"../../contexts/transaction-modal":7846,"../../helpers/constants/common":7865,"../../helpers/constants/design-system":7868,"../../helpers/constants/error-keys":7869,"../../helpers/constants/routes":7872,"../../helpers/utils/conversions.util":7888,"../../helpers/utils/metrics":7897,"../../helpers/utils/transactions.util":7905,"../../store/actions":8273,"../send/send.constants":8143,"../send/send.utils":8145,"./transaction-alerts":7983,"prop-types":5840,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=F(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=L(e("prop-types")),o=L(e("../../components/app/confirm-page-container")),s=L(e("../../components/app/transaction-decoding")),c=e("../send/send.utils"),i=e("../../helpers/utils/conversions.util"),l=e("../../helpers/constants/routes"),u=e("../../helpers/constants/error-keys"),d=L(e("../../components/app/user-preferenced-currency-display")),p=L(e("../../components/app/transaction-decoding/components/ui/copy-raw-data")),f=e("../../helpers/constants/common"),m=L(e("../../components/ui/text-field")),h=L(e("../../components/ui/actionable-message")),g=L(e("../../components/ui/disclosure")),E=e("../../../shared/constants/metametrics"),_=e("../../../shared/constants/transaction"),y=e("../../helpers/utils/metrics"),v=e("../../helpers/utils/transactions.util"),T=e("../../../shared/modules/buffer-utils"),b=e("../../contexts/transaction-modal"),k=L(e("../../components/app/transaction-detail/transaction-detail.component")),N=L(e("../../components/app/transaction-detail-item/transaction-detail-item.component")),w=L(e("../../components/ui/info-tooltip/info-tooltip")),O=L(e("../../components/ui/loading-heartbeat")),P=L(e("../../components/app/gas-details-item")),A=L(e("../../components/app/gas-timing/gas-timing.component")),S=L(e("../../components/app/ledger-instruction-field")),C=L(e("../../components/app/multilayer-fee-message")),x=e("../../helpers/constants/design-system"),R=e("../../store/actions"),M=L(e("../../components/ui/typography/typography")),I=e("../send/send.constants"),D=e("../../../shared/constants/network"),j=L(e("./transaction-alerts"));function L(e){return e&&e.__esModule?e:{default:e}}function F(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(F=function(e){return e?n:t})(e)}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const U=()=>a.default.createElement(O.default,null);class $ extends a.Component{constructor(...e){super(...e),W(this,"state",{submitting:!1,submitError:null,submitWarning:"",ethGasPriceWarning:"",editingGas:!1,userAcknowledgedGasMissing:!1}),W(this,"_beforeUnloadForGasPolling",(()=>{this._isMounted=!1,this.state.pollingToken&&((0,R.disconnectGasFeeEstimatePoller)(this.state.pollingToken),(0,R.removePollingTokenFromAppState)(this.state.pollingToken))})),W(this,"_removeBeforeUnload",(()=>{window.removeEventListener("beforeunload",this._beforeUnloadForGasPolling)})),W(this,"supportsEIP1559V2",this.props.eip1559V2Enabled&&this.props.supportsEIP1559&&!(0,v.isLegacyTransaction)(this.props.txData))}componentDidUpdate(e){const{transactionStatus:t,showTransactionConfirmedModal:n,history:a,clearConfirmTransaction:r,nextNonce:o,customNonceValue:s,toAddress:c,tryReverseResolveAddress:i,isEthGasPrice:d,setDefaultHomeActiveTabName:p}=this.props,{customNonceValue:f,nextNonce:m,toAddress:h,transactionStatus:g,isEthGasPrice:E}=e,y=t!==g,v=t===_.TRANSACTION_STATUSES.DROPPED||t===_.TRANSACTION_STATUSES.CONFIRMED;o===m&&s===f||(null!==o&&s>o?this.setState({submitWarning:this.context.t("nextNonceWarning",[o])}):this.setState({submitWarning:""})),y&&v&&n({onSubmit:()=>{r(),p("Activity").then((()=>{a.push(l.DEFAULT_ROUTE)}))}}),c&&c!==h&&i(c),d!==E&&(d?this.setState({ethGasPriceWarning:this.context.t(u.ETH_GAS_PRICE_FETCH_WARNING_KEY)}):this.setState({ethGasPriceWarning:""}))}getErrorKey(){const{balance:e,conversionRate:t,hexMaximumTransactionFee:n,txData:{txParams:{value:a}={}}={},customGas:r,noGasPrice:o,gasFeeIsCustom:s}=this.props;return e&&!(0,c.isBalanceSufficient)({amount:a,gasTotal:n||"0x0",balance:e,conversionRate:t})?{valid:!1,errorKey:u.INSUFFICIENT_FUNDS_ERROR_KEY}:(0,i.hexToDecimal)(r.gasLimit)<Number(I.MIN_GAS_LIMIT_DEC)?{valid:!1,errorKey:u.GAS_LIMIT_TOO_LOW_ERROR_KEY}:o&&!s?{valid:!1,errorKey:u.GAS_PRICE_FETCH_FAILURE_ERROR_KEY}:{valid:!0}}handleEditGas(){const{actionKey:e,txData:{origin:t},methodData:n={}}=this.props;this.context.trackEvent({category:E.EVENT.CATEGORIES.TRANSACTIONS,event:'User clicks "Edit" on gas',properties:{action:"Confirm Screen",legacy_event:!0,recipientKnown:null,functionType:e||(0,y.getMethodName)(n.name)||_.TRANSACTION_TYPES.CONTRACT_INTERACTION,origin:t}}),this.setState({editingGas:!0})}handleCloseEditGas(){this.setState({editingGas:!1})}setUserAcknowledgedGasMissing(){this.setState({userAcknowledgedGasMissing:!0})}renderDetails(){var e,t;const{primaryTotalTextOverride:n,secondaryTotalTextOverride:r,hexMinimumTransactionFee:o,hexMaximumTransactionFee:s,hexTransactionTotal:c,useNonceField:l,customNonceValue:u,updateCustomNonce:p,nextNonce:g,getNextNonce:E,txData:_,useNativeCurrencyAsPrimaryCurrency:y,primaryTotalTextOverrideMaxAmount:v,maxFeePerGas:T,maxPriorityFeePerGas:b,isMainnet:R,showLedgerSteps:I,supportsEIP1559:L,isMultiLayerFeeNetwork:F,nativeCurrency:W,showBuyModal:$,isBuyableChain:B}=this.props,{t:H}=this.context,{userAcknowledgedGasMissing:G}=this.state,{valid:q}=this.getErrorKey(),V=Boolean(_.simulationFails)&&!G,Y=D.NETWORK_TO_NAME_MAP[_.chainId],K=l?a.default.createElement("div",null,a.default.createElement("div",{className:"confirm-detail-row"},a.default.createElement("div",{className:"confirm-detail-row__label"},H("nonceFieldHeading")),a.default.createElement("div",{className:"custom-nonce-input"},a.default.createElement(m.default,{type:"number",min:0,placeholder:"number"==typeof g?g.toString():null,onChange:({target:{value:e}})=>{!e.length||Number(e)<0?p(""):p(String(Math.floor(e))),E()},fullWidth:!0,margin:"dense",value:u||""})))):null;return a.default.createElement("div",{className:"confirm-page-container-content__details"},a.default.createElement(j.default,{setUserAcknowledgedGasMissing:()=>this.setUserAcknowledgedGasMissing(),userAcknowledgedGasMissing:G,nativeCurrency:W,networkName:Y,showBuyModal:$,type:_.type,isBuyableChain:B}),a.default.createElement(k.default,{disabled:!G&&!q,userAcknowledgedGasMissing:G,onEdit:V||F?null:()=>this.handleEditGas(),rows:[V&&!this.supportsEIP1559V2&&(()=>a.default.createElement("div",{className:"confirm-page-container-content__error-container"},a.default.createElement(h.default,{message:H("simulationErrorMessageV2"),useIcon:!0,iconFillColor:"var(--color-error-default)",type:"danger",primaryActionV2:!0===G?undefined:{label:H("proceedWithTransaction"),onClick:()=>this.setUserAcknowledgedGasMissing()}})))(),!V&&!F&&(()=>this.supportsEIP1559V2?a.default.createElement(P.default,{key:"gas_details",userAcknowledgedGasMissing:G}):a.default.createElement(N.default,{key:"gas-item",boldHeadings:!1,detailTitle:_.dappSuggestedGasFees?a.default.createElement(a.default.Fragment,null,H("transactionDetailGasHeading"),a.default.createElement(w.default,{contentText:H("transactionDetailDappGasTooltip"),position:"top"},a.default.createElement("i",{className:"far fa-info-circle"}))):a.default.createElement(a.default.Fragment,null,H("transactionDetailGasHeading"),a.default.createElement(w.default,{contentText:a.default.createElement(a.default.Fragment,null,a.default.createElement("p",null,H("transactionDetailGasTooltipIntro",[R?H("networkNameEthereum"):""])),a.default.createElement("p",null,H("transactionDetailGasTooltipExplanation")),a.default.createElement("p",null,a.default.createElement("a",{href:"https://www.qtum.org/about/gas",target:"_blank",rel:"noopener noreferrer"},H("transactionDetailGasTooltipConversion")))),position:"top"},a.default.createElement("i",{className:"far fa-info-circle"}))),detailText:a.default.createElement("div",{className:"confirm-page-container-content__currency-container test"},U(),a.default.createElement(d.default,{type:f.SECONDARY,value:o,hideLabel:Boolean(y)})),detailTotal:a.default.createElement("div",{className:"confirm-page-container-content__currency-container"},U(),a.default.createElement(d.default,{type:f.PRIMARY,value:o,hideLabel:!y,numberOfDecimals:6})),subText:!F&&a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{key:"editGasSubTextFeeLabel"},H("editGasSubTextFeeLabel")),a.default.createElement("div",{key:"editGasSubTextFeeValue",className:"confirm-page-container-content__currency-container"},U(),a.default.createElement(d.default,{key:"editGasSubTextFeeAmount",type:f.PRIMARY,value:s,hideLabel:!y}))),subTitle:a.default.createElement(a.default.Fragment,null,_.dappSuggestedGasFees?a.default.createElement(M.default,{variant:x.TYPOGRAPHY.H7,fontStyle:x.FONT_STYLE.ITALIC,color:x.COLORS.TEXT_ALTERNATIVE},H("transactionDetailDappGasMoreInfo")):"",L&&a.default.createElement(A.default,{maxPriorityFeePerGas:(0,i.hexWEIToDecGWEI)(b||_.txParams.maxPriorityFeePerGas).toString(),maxFeePerGas:(0,i.hexWEIToDecGWEI)(T||_.txParams.maxFeePerGas).toString()}))}))(),!V&&F&&a.default.createElement(C.default,{transaction:_,layer2fee:o,nativeCurrency:W}),!F&&a.default.createElement(N.default,{key:"total-item",detailTitle:H("total"),detailText:(()=>{var e;return n===undefined&&r===undefined?a.default.createElement("div",{className:"confirm-page-container-content__total-value"},a.default.createElement(O.default,{estimateUsed:null===(e=this.props.txData)||void 0===e?void 0:e.userFeeLevel}),a.default.createElement(d.default,{type:f.SECONDARY,key:"total-detail-text",value:c,hideLabel:Boolean(y)})):y?r:n})(),detailTotal:(()=>{var e;return n===undefined&&r===undefined?a.default.createElement("div",{className:"confirm-page-container-content__total-value"},a.default.createElement(O.default,{estimateUsed:null===(e=this.props.txData)||void 0===e?void 0:e.userFeeLevel}),a.default.createElement(d.default,{type:f.PRIMARY,key:"total-detail-value",value:c,hideLabel:!y})):y?n:r})(),subTitle:H("transactionDetailGasTotalSubtitle"),subText:a.default.createElement("div",{className:"confirm-page-container-content__total-amount"},a.default.createElement(O.default,{estimateUsed:null===(e=this.props.txData)||void 0===e?void 0:e.userFeeLevel}),a.default.createElement("strong",{key:"editGasSubTextAmountLabel"},H("editGasSubTextAmountLabel"))," ",v===undefined&&r===undefined?a.default.createElement(d.default,{type:f.PRIMARY,key:"total-max-amount",value:(0,i.addHexes)(_.txParams.value,s),hideLabel:!y}):y?v:r)})]}),K,I?a.default.createElement(S.default,{showDataInstruction:Boolean(null===(t=_.txParams)||void 0===t?void 0:t.data)}):null)}renderData(e){const{t:t}=this.context,{txData:{txParams:n}={},methodData:{params:r}={},hideData:o,dataComponent:c}=this.props;if(o)return null;const i=null!=r&&r.length?`(${r.map((({type:e})=>e)).join(", ")})`:"";return c||a.default.createElement("div",{className:"confirm-page-container-content__data"},a.default.createElement("div",{className:"confirm-page-container-content__data-box-label"},`${t("functionType")}:`,a.default.createElement("span",{className:"confirm-page-container-content__function-type"},`${e} ${i}`)),a.default.createElement(g.default,null,a.default.createElement(s.default,{to:null==n?void 0:n.to,inputData:null==n?void 0:n.data})))}renderDataHex(e){const{t:t}=this.context,{txData:{txParams:n}={},methodData:{params:r}={},hideData:o,dataHexComponent:s}=this.props;if(o||!n.to)return null;const c=null!=r&&r.length?`(${r.map((({type:e})=>e)).join(", ")})`:"";return s||a.default.createElement("div",{className:"confirm-page-container-content__data"},a.default.createElement("div",{className:"confirm-page-container-content__data-box-label"},`${t("functionType")}:`,a.default.createElement("span",{className:"confirm-page-container-content__function-type"},`${e} ${c}`)),r&&a.default.createElement("div",{className:"confirm-page-container-content__data-box"},a.default.createElement("div",{className:"confirm-page-container-content__data-field-label"},`${t("parameters")}:`),a.default.createElement("div",null,a.default.createElement("pre",null,JSON.stringify(r,null,2)))),a.default.createElement("div",{className:"confirm-page-container-content__data-box-label"},`${t("hexData")}: ${(0,T.toBuffer)(null==n?void 0:n.data).length} bytes`),a.default.createElement("div",{className:"confirm-page-container-content__data-box"},null==n?void 0:n.data),a.default.createElement(p.default,{data:null==n?void 0:n.data}))}handleEdit(){const{txData:e,tokenData:t,tokenProps:n,onEdit:a,actionKey:r,txData:{origin:o},methodData:s={}}=this.props;this.context.trackEvent({category:E.EVENT.CATEGORIES.TRANSACTIONS,event:"Edit Transaction",properties:{action:"Confirm Screen",legacy_event:!0,recipientKnown:null,functionType:r||(0,y.getMethodName)(s.name)||_.TRANSACTION_TYPES.CONTRACT_INTERACTION,origin:o}}),a({txData:e,tokenData:t,tokenProps:n})}handleCancelAll(){const{cancelAllTransactions:e,clearConfirmTransaction:t,history:n,mostRecentOverviewPage:a,showRejectTransactionsConfirmationModal:r,unapprovedTxCount:o}=this.props;r({unapprovedTxCount:o,onSubmit:async()=>{this._removeBeforeUnload(),await e(),t(),n.push(a)}})}handleCancel(){const{txData:e,cancelTransaction:t,history:n,mostRecentOverviewPage:a,clearConfirmTransaction:r,updateCustomNonce:o}=this.props;this._removeBeforeUnload(),o(""),t(e).then((()=>{r(),n.push(a)}))}handleSubmit(){const{sendTransaction:e,clearConfirmTransaction:t,txData:n,history:a,mostRecentOverviewPage:r,updateCustomNonce:o,maxFeePerGas:s,customTokenAmount:c,dappProposedTokenAmount:l,currentTokenBalance:u,maxPriorityFeePerGas:d,baseFeePerGas:p,methodData:f}=this.props,{submitting:m}=this.state,{name:h}=f;m||(p&&(n.estimatedBaseFee=p),h&&(n.contractMethodName=h),l&&(n.dappProposedTokenAmount=l,n.originalApprovalAmount=l),c?(n.customTokenAmount=c,n.finalApprovalAmount=c):l!==undefined&&(n.finalApprovalAmount=l),u&&(n.currentTokenBalance=u),s&&(n.txParams={...n.txParams,maxFeePerGas:s}),d&&(n.txParams={...n.txParams,maxPriorityFeePerGas:d}),this.setState({submitting:!0,submitError:null},(()=>{this._removeBeforeUnload();const s=(0,i.getHexFromWeiHex)({value:n.txParams.value,fromCurrency:"ETH",toCurrency:"ETH",toDenomination:"SATOSHI"});n.txParams.value=s,e(n).then((()=>{t(),this.setState({submitting:!1},(()=>{a.push(r),o("")}))})).catch((e=>{this.setState({submitting:!1,submitError:e.message}),o("")}))})))}renderTitleComponent(){const{title:e,hexTransactionAmount:t,txData:n}=this.props;if(e)return null;const r=n.type===_.TRANSACTION_TYPES.CONTRACT_INTERACTION;return a.default.createElement(d.default,{value:t,type:f.PRIMARY,showEthLogo:!0,ethLogoHeight:24,hideLabel:!r,showCurrencySuffix:r})}renderSubtitleComponent(){const{subtitleComponent:e,hexTransactionAmount:t}=this.props;return e||a.default.createElement(d.default,{value:t,type:f.SECONDARY,showEthLogo:!0,hideLabel:!0})}handleNextTx(e){const{history:t,clearConfirmTransaction:n}=this.props;e&&(n(),t.push(`${l.CONFIRM_TRANSACTION_ROUTE}/${e}`))}getNavigateTxData(){const{currentNetworkUnapprovedTxs:e,txData:{id:t}={}}=this.props,n=Object.keys(e),a=n.indexOf(t?t.toString():"");return{totalTx:n.length,positionOfCurrentTx:a+1,nextTxId:n[a+1],prevTxId:n[a-1],showNavigation:n.length>1,firstTx:n[0],lastTx:n[n.length-1],ofText:this.context.t("ofTextNofM"),requestsWaitingText:this.context.t("requestsAwaitingAcknowledgement")}}componentDidMount(){this._isMounted=!0;const{toAddress:e,txData:{origin:t}={},getNextNonce:n,tryReverseResolveAddress:a}=this.props,{trackEvent:r}=this.context;r({category:E.EVENT.CATEGORIES.TRANSACTIONS,event:"Confirm: Started",properties:{action:"Confirm Screen",legacy_event:!0,origin:t}}),n(),e&&a(e),(0,R.getGasFeeEstimatesAndStartPolling)().then((e=>{this._isMounted?((0,R.addPollingTokenToAppState)(e),this.setState({pollingToken:e})):((0,R.disconnectGasFeeEstimatePoller)(e),(0,R.removePollingTokenFromAppState)(this.state.pollingToken))})),window.addEventListener("beforeunload",this._beforeUnloadForGasPolling)}componentWillUnmount(){this._beforeUnloadForGasPolling(),this._removeBeforeUnload()}render(){const{t:e}=this.context,{fromName:t,fromAddress:n,toName:r,toAddress:s,toEns:c,toNickname:i,methodData:l,title:u,hideSubtitle:d,tokenAddress:p,contentComponent:f,onEdit:m,nonce:h,customNonceValue:g,unapprovedTxCount:E,type:T,hideSenderToRecipient:k,showAccountInHeader:N,txData:w,gasIsLoading:O,gasFeeIsCustom:P,nativeCurrency:A,hardwareWalletRequiresConnection:S,image:C}=this.props,{submitting:x,submitError:R,submitWarning:M,ethGasPriceWarning:I,editingGas:D,userAcknowledgedGasMissing:j}=this.state,{name:L}=l,{valid:F,errorKey:W}=this.getErrorKey(),U=Boolean(w.simulationFails),$=U&&!j,{totalTx:B,positionOfCurrentTx:H,nextTxId:G,prevTxId:q,showNavigation:V,firstTx:Y,lastTx:K,ofText:z,requestsWaitingText:Z}=this.getNavigateTxData();let X;return w.type===_.TRANSACTION_TYPES.CONTRACT_INTERACTION&&"metamask"!==w.origin&&(X=(0,y.getMethodName)(L)),X||(X=T?(0,v.getTransactionTypeTitle)(e,T,A):e("contractInteraction")),a.default.createElement(b.TransactionModalContextProvider,null,a.default.createElement(o.default,{fromName:t,fromAddress:n,showAccountInHeader:N,toName:r,toAddress:s,toEns:c,toNickname:i,showEdit:Boolean(m),action:X,title:u,image:C,titleComponent:this.renderTitleComponent(),subtitleComponent:this.renderSubtitleComponent(),hideSubtitle:d,detailsComponent:this.renderDetails(),dataComponent:this.renderData(X),dataHexComponent:this.renderDataHex(X),contentComponent:f,nonce:g||h,unapprovedTxCount:E,tokenAddress:p,errorMessage:R,errorKey:W,hasSimulationError:U,warning:M,totalTx:B,positionOfCurrentTx:H,nextTxId:G,prevTxId:q,showNavigation:V,onNextTx:e=>this.handleNextTx(e),firstTx:Y,lastTx:K,ofText:z,requestsWaitingText:Z,disabled:$||!F||x||S||O&&!P,onEdit:()=>this.handleEdit(),onCancelAll:()=>this.handleCancelAll(),onCancel:()=>this.handleCancel(),onSubmit:()=>this.handleSubmit(),hideSenderToRecipient:k,origin:w.origin,ethGasPriceWarning:I,editingGas:D,handleCloseEditGas:()=>this.handleCloseEditGas(),currentTransaction:w,supportsEIP1559V2:this.supportsEIP1559V2,nativeCurrency:A}))}}n.default=$,W($,"contextTypes",{t:r.default.func,trackEvent:r.default.func}),W($,"propTypes",{history:r.default.object,balance:r.default.string,cancelTransaction:r.default.func,cancelAllTransactions:r.default.func,clearConfirmTransaction:r.default.func,conversionRate:r.default.number,fromAddress:r.default.string,fromName:r.default.string,hexTransactionAmount:r.default.string,hexMinimumTransactionFee:r.default.string,hexMaximumTransactionFee:r.default.string,hexTransactionTotal:r.default.string,methodData:r.default.object,nonce:r.default.string,useNonceField:r.default.bool,customNonceValue:r.default.string,updateCustomNonce:r.default.func,sendTransaction:r.default.func,showTransactionConfirmedModal:r.default.func,showRejectTransactionsConfirmationModal:r.default.func,toAddress:r.default.string,tokenData:r.default.object,tokenProps:r.default.object,toName:r.default.string,toEns:r.default.string,toNickname:r.default.string,transactionStatus:r.default.string,txData:r.default.object,unapprovedTxCount:r.default.number,currentNetworkUnapprovedTxs:r.default.object,customGas:r.default.object,actionKey:r.default.string,contentComponent:r.default.node,dataComponent:r.default.node,dataHexComponent:r.default.node,hideData:r.default.bool,hideSubtitle:r.default.bool,tokenAddress:r.default.string,customTokenAmount:r.default.string,dappProposedTokenAmount:r.default.string,currentTokenBalance:r.default.string,onEdit:r.default.func,subtitleComponent:r.default.node,title:r.default.string,image:r.default.string,type:r.default.string,getNextNonce:r.default.func,nextNonce:r.default.number,tryReverseResolveAddress:r.default.func.isRequired,hideSenderToRecipient:r.default.bool,showAccountInHeader:r.default.bool,mostRecentOverviewPage:r.default.string.isRequired,isEthGasPrice:r.default.bool,noGasPrice:r.default.bool,setDefaultHomeActiveTabName:r.default.func,primaryTotalTextOverride:r.default.string,secondaryTotalTextOverride:r.default.string,gasIsLoading:r.default.bool,primaryTotalTextOverrideMaxAmount:r.default.string,useNativeCurrencyAsPrimaryCurrency:r.default.bool,maxFeePerGas:r.default.string,maxPriorityFeePerGas:r.default.string,baseFeePerGas:r.default.string,isMainnet:r.default.bool,gasFeeIsCustom:r.default.bool,showLedgerSteps:r.default.bool.isRequired,nativeCurrency:r.default.string,supportsEIP1559:r.default.bool,hardwareWalletRequiresConnection:r.default.bool,isMultiLayerFeeNetwork:r.default.bool,eip1559V2Enabled:r.default.bool,showBuyModal:r.default.func,isBuyableChain:r.default.bool})}}},{package:"$root$"}],[7981,{"../../../shared/constants/gas":7318,"../../../shared/constants/transaction":7329,"../../../shared/modules/hexstring-utils":7336,"../../../shared/modules/string-utils":7343,"../../../shared/modules/transaction.utils":7345,"../../ducks/app/app":7851,"../../ducks/confirm-transaction/confirm-transaction.duck":7852,"../../ducks/history/history":7856,"../../ducks/metamask/metamask":7859,"../../helpers/utils/token-util":7904,"../../helpers/utils/transactions.util":7905,"../../helpers/utils/util":7907,"../../selectors":8267,"../../store/actions":8273,"../send/send.utils":8145,"./confirm-transaction-base.component":7980,"react-redux":6775,"react-router-dom":6795,redux:6852},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.mapDispatchToProps=n.default=void 0;var a,r=e("react-redux"),o=e("redux"),s=e("react-router-dom"),c=e("../../ducks/confirm-transaction/confirm-transaction.duck"),i=e("../../store/actions"),l=e("../send/send.utils"),u=e("../../helpers/utils/util"),d=e("../../selectors"),p=e("../../ducks/history/history"),f=e("../../ducks/metamask/metamask"),m=e("../../../shared/modules/transaction.utils"),h=e("../../../shared/modules/hexstring-utils"),g=e("../../ducks/app/app"),E=e("../../helpers/utils/transactions.util"),_=e("../../../shared/constants/gas"),y=e("../../../shared/constants/transaction"),v=e("../../../shared/modules/string-utils"),T=e("../../helpers/utils/token-util"),b=(a=e("./confirm-transaction-base.component"))&&a.__esModule?a:{default:a};let k="";const N=e=>({tryReverseResolveAddress:t=>e((0,i.tryReverseResolveAddress)(t)),updateCustomNonce:t=>{k=t,e((0,i.updateCustomNonce)(t))},clearConfirmTransaction:()=>e((0,c.clearConfirmTransaction)()),showTransactionConfirmedModal:({onSubmit:t})=>e((0,i.showModal)({name:"TRANSACTION_CONFIRMED",onSubmit:t})),showRejectTransactionsConfirmationModal:({onSubmit:t,unapprovedTxCount:n})=>e((0,i.showModal)({name:"REJECT_TRANSACTIONS",onSubmit:t,unapprovedTxCount:n})),cancelTransaction:({id:t})=>e((0,i.cancelTx)({id:t})),cancelAllTransactions:t=>e((0,i.cancelTxs)(t)),sendTransaction:t=>e((0,i.updateAndApproveTx)((e=>k?{...e,customNonceValue:k}:e)(t))),getNextNonce:()=>e((0,i.getNextNonce)()),setDefaultHomeActiveTabName:t=>e((0,i.setDefaultHomeActiveTabName)(t)),updateTransactionGasFees:t=>{e((0,f.updateGasFees)({...t,expectHexWei:!0}))},showBuyModal:()=>e((0,i.showModal)({name:"DEPOSIT_ETHER"}))});n.mapDispatchToProps=N;var w=(0,o.compose)(s.withRouter,(0,r.connect)(((e,t)=>{var n,a,r,o,s;const{toAddress:c,customTxParamsData:i,match:{params:b={}}}=t,{id:N}=b,w=(0,d.getIsMainnet)(e),O=(0,f.getIsGasEstimatesLoading)(e),P=(0,g.getGasLoadingAnimationIsShowing)(e),A=(0,d.getIsBuyableChain)(e),{confirmTransaction:S,metamask:C}=e,{conversionRate:x,identities:R,addressBook:M,network:I,unapprovedTxs:D,nextNonce:j,allCollectibleContracts:L,selectedAddress:F,provider:{chainId:W}}=C,{tokenData:U,txData:$,tokenProps:B,nonce:H}=S,{txParams:G={},id:q,type:V}=$,Y=Object.values(D).find((({id:e})=>e===(q||Number(N))))||{},{from:K,to:z,gasPrice:Z,gas:X,value:Q,data:J}=Y&&Y.txParams||G,ee=(0,d.getMetaMaskAccounts)(e),te=(0,m.parseStandardTokenTransactionData)(J),ne=(0,T.getTokenAddressParam)(te),{balance:ae}=ee[K],{name:re}=R[K];let oe=z;V!==y.TRANSACTION_TYPES.SIMPLE_SEND&&(oe=c||ne||z);const se=(0,d.getTokenList)(e),ce=(null===(n=R[oe])||void 0===n?void 0:n.name)||(null===(a=se[null===(r=oe)||void 0===r?void 0:r.toLowerCase()])||void 0===a?void 0:a.name)||(0,u.shortenAddress)((0,h.toChecksumHexAddress)(oe)),ie=(0,h.toChecksumHexAddress)(oe),le=M&&M[W]&&M[W][ie],ue=(0,d.getEnsResolutionByAddress)(e,ie),de=le?le.name:"",pe=Y?Y.status:"",fe=(0,d.checkNetworkAndAccountSupports1559)(e)&&!(0,E.isLegacyTransaction)(G),{hexTransactionAmount:me,hexMinimumTransactionFee:he,hexMaximumTransactionFee:ge,hexTransactionTotal:Ee,gasEstimationObject:_e}=(0,d.transactionFeeSelector)(e,Y);Y&&Y.simulationFails&&($.simulationFails=Y.simulationFails);const ye=Object.keys(D).filter((e=>(0,m.transactionMatchesNetwork)(D[e],W,I))).reduce(((e,t)=>({...e,[t]:D[t]})),{}),ve=(0,u.valuesFor)(ye).length,Te=!(0,l.isBalanceSufficient)({amount:Q,gasTotal:(0,l.calcGasTotal)(X,Z),balance:ae,conversionRate:x}),be=(0,d.getKnownMethodData)(e,J)||{};let ke={...$,...Y};i&&(ke={...ke,txParams:{...ke.txParams,data:i}});const Ne=Boolean(null==L||null===(o=L[F])||void 0===o||null===(s=o[W])||void 0===s?void 0:s.find((e=>(0,v.isEqualCaseInsensitive)(e.address,ke.txParams.to))));k=(0,d.getCustomNonceValue)(e);const we=(0,d.getIsEthGasPriceFetched)(e),Oe=!fe&&(0,d.getNoGasPriceFetched)(e),{useNativeCurrencyAsPrimaryCurrency:Pe}=(0,d.getPreferences)(e),Ae=ke.userFeeLevel===_.CUSTOM_GAS_ESTIMATE||(0,m.txParamsAreDappSuggested)(ke),Se=(0,f.isAddressLedger)(e,K),Ce=(0,f.getNativeCurrency)(e),xe=(0,d.doesAddressRequireLedgerHidConnection)(e,K),Re=(0,d.getIsMultiLayerFeeNetwork)(e),Me=(0,d.getEIP1559V2Enabled)(e);return{balance:ae,fromAddress:K,fromName:re,toAddress:oe,toEns:ue,toName:ce,toNickname:de,hexTransactionAmount:me,hexMinimumTransactionFee:he,hexMaximumTransactionFee:ge,hexTransactionTotal:Ee,txData:ke,tokenData:U,methodData:be,tokenProps:B,conversionRate:x,transactionStatus:pe,nonce:H,unapprovedTxs:D,unapprovedTxCount:ve,currentNetworkUnapprovedTxs:ye,customGas:{gasLimit:X,gasPrice:Z},advancedInlineGasShown:(0,d.getAdvancedInlineGasShown)(e),useNonceField:(0,d.getUseNonceField)(e),customNonceValue:k,insufficientBalance:Te,hideSubtitle:!(0,d.getShouldShowFiat)(e)&&!Ne,hideFiatConversion:!(0,d.getShouldShowFiat)(e),type:V,nextNonce:j,mostRecentOverviewPage:(0,p.getMostRecentOverviewPage)(e),isMainnet:w,isEthGasPrice:we,noGasPrice:Oe,supportsEIP1559:fe,gasIsLoading:O||P,useNativeCurrencyAsPrimaryCurrency:Pe,maxFeePerGas:_e.maxFeePerGas,maxPriorityFeePerGas:_e.maxPriorityFeePerGas,baseFeePerGas:_e.baseFeePerGas,gasFeeIsCustom:Ae,showLedgerSteps:Se,nativeCurrency:Ce,hardwareWalletRequiresConnection:xe,isMultiLayerFeeNetwork:Re,chainId:W,eip1559V2Enabled:Me,isBuyableChain:A}}),N,((e,t,n)=>{const{txData:a,unapprovedTxs:r}=e,{cancelAllTransactions:o,updateTransactionGasFees:s,...c}=t;return{...e,...c,...n,cancelAllTransactions:()=>o((0,u.valuesFor)(r)),updateGasAndCalculate:({gasLimit:e,gasPrice:t})=>{s({gasLimit:e,gasPrice:t,transaction:a})}}})))(b.default);n.default=w}}},{package:"$root$"}],[7982,{"./confirm-transaction-base.container":7981},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./confirm-transaction-base.container"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[7983,{"./transaction-alerts":7984},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./transaction-alerts"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[7984,{"../../../../shared/constants/gas":7318,"../../../../shared/constants/transaction":7329,"../../../components/ui/actionable-message/actionable-message":7678,"../../../components/ui/button":7686,"../../../components/ui/typography":7836,"../../../contexts/gasFee":7843,"../../../helpers/constants/design-system":7868,"../../../helpers/constants/zendesk-url":7875,"../../../hooks/useI18nContext":7927,"../../../selectors/transactions":8271,"prop-types":5840,react:6817,"react-redux":6775},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=g(e("react")),r=g(e("prop-types")),o=e("react-redux"),s=e("../../../../shared/constants/gas"),c=e("../../../selectors/transactions"),i=e("../../../contexts/gasFee"),l=e("../../../hooks/useI18nContext"),u=g(e("../../../components/ui/actionable-message/actionable-message")),d=g(e("../../../components/ui/button")),p=g(e("../../../components/ui/typography")),f=e("../../../helpers/constants/design-system"),m=e("../../../../shared/constants/transaction"),h=g(e("../../../helpers/constants/zendesk-url"));function g(e){return e&&e.__esModule?e:{default:e}}const E=({userAcknowledgedGasMissing:e,setUserAcknowledgedGasMissing:t,isBuyableChain:n,nativeCurrency:r,networkName:g,showBuyModal:E,type:_})=>{const{balanceError:y,estimateUsed:v,hasSimulationError:T,supportsEIP1559V2:b,isNetworkBusy:k}=(0,i.useGasFeeContext)(),N=(0,o.useSelector)(c.submittedPendingTransactionsSelector),w=(0,l.useI18nContext)();return b?a.default.createElement("div",{className:"transaction-alerts"},T&&a.default.createElement(u.default,{message:w("simulationErrorMessageV2"),useIcon:!0,iconFillColor:"var(--color-error-default)",type:"danger",primaryActionV2:!0===e?undefined:{label:w("proceedWithTransaction"),onClick:t}}),(null==N?void 0:N.length)>0&&a.default.createElement(u.default,{message:a.default.createElement(p.default,{align:"left",className:"transaction-alerts__pending-transactions",margin:0,tag:f.TYPOGRAPHY.Paragraph,variant:f.TYPOGRAPHY.H7},a.default.createElement("strong",null,1===(null==N?void 0:N.length)?w("pendingTransactionSingle",[null==N?void 0:N.length]):w("pendingTransactionMultiple",[null==N?void 0:N.length]))," ",w("pendingTransactionInfo"),w("learnCancelSpeeedup",[a.default.createElement("a",{key:"cancelSpeedUpInfo",href:h.default.SPEEDUP_CANCEL,rel:"noopener noreferrer",target:"_blank"},w("cancelSpeedUp"))])),useIcon:!0,iconFillColor:"var(--color-warning-default)",type:"warning"}),y&&_===m.TRANSACTION_TYPES.DEPLOY_CONTRACT?a.default.createElement(u.default,{className:"actionable-message--warning",message:n?a.default.createElement(p.default,{variant:f.TYPOGRAPHY.H7,align:"left"},w("insufficientCurrencyBuyOrDeposit",[r,g,a.default.createElement(d.default,{type:"inline",className:"confirm-page-container-content__link",onClick:E,key:`${r}-buy-button`},w("buyAsset",[r]))])):a.default.createElement(p.default,{variant:f.TYPOGRAPHY.H7,align:"left"},w("insufficientCurrencyDeposit",[r,g])),useIcon:!0,iconFillColor:"var(--color-error-default)",type:"danger"}):null,v===s.PRIORITY_LEVELS.LOW&&a.default.createElement(u.default,{dataTestId:"low-gas-fee-alert",message:a.default.createElement(p.default,{align:"left",margin:0,tag:f.TYPOGRAPHY.Paragraph,variant:f.TYPOGRAPHY.H7},w("lowPriorityMessage")),useIcon:!0,iconFillColor:"var(--color-warning-default)",type:"warning"}),k?a.default.createElement(u.default,{message:a.default.createElement(p.default,{align:"left",margin:0,tag:f.TYPOGRAPHY.Paragraph,variant:f.TYPOGRAPHY.H7},w("networkIsBusy")),iconFillColor:"var(--color-warning-default)",type:"warning",useIcon:!0}):null):null};E.propTypes={userAcknowledgedGasMissing:r.default.bool,setUserAcknowledgedGasMissing:r.default.func,nativeCurrency:r.default.string,networkName:r.default.string,showBuyModal:r.default.func,type:r.default.string,isBuyableChain:r.default.bool};var _=E;n.default=_}}},{package:"$root$"}],[7985,{"../../../shared/constants/app":7316,"../../../shared/constants/transaction":7329,"../../components/ui/loading-screen":7766,"../../helpers/constants/routes":7872,"prop-types":5840,react:6817,"react-router-dom":6795},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r,o,s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),c=f(e("prop-types")),i=e("react-router-dom"),l=f(e("../../components/ui/loading-screen")),u=e("../../helpers/constants/routes"),d=e("../../../shared/constants/app"),p=e("../../../shared/constants/transaction");function f(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}class h extends s.Component{redirectToTransaction(){const{txData:e}=this.props,{id:t,txParams:{data:n}={},type:a}=e;if(a===p.TRANSACTION_TYPES.DEPLOY_CONTRACT){const e=`${u.CONFIRM_TRANSACTION_ROUTE}/${t}${u.CONFIRM_DEPLOY_CONTRACT_PATH}`;return s.default.createElement(i.Redirect,{to:{pathname:e}})}if(a===p.TRANSACTION_TYPES.SIMPLE_SEND){const e=`${u.CONFIRM_TRANSACTION_ROUTE}/${t}${u.CONFIRM_SEND_ETHER_PATH}`;return s.default.createElement(i.Redirect,{to:{pathname:e}})}if(n)switch(a){case p.TRANSACTION_TYPES.TOKEN_METHOD_TRANSFER:{const e=`${u.CONFIRM_TRANSACTION_ROUTE}/${t}${u.CONFIRM_SEND_TOKEN_PATH}`;return s.default.createElement(i.Redirect,{to:{pathname:e}})}case p.TRANSACTION_TYPES.TOKEN_METHOD_APPROVE:{const e=`${u.CONFIRM_TRANSACTION_ROUTE}/${t}${u.CONFIRM_APPROVE_PATH}`;return s.default.createElement(i.Redirect,{to:{pathname:e}})}case p.TRANSACTION_TYPES.TOKEN_METHOD_SET_APPROVAL_FOR_ALL:{const e=`${u.CONFIRM_TRANSACTION_ROUTE}/${t}${u.CONFIRM_SET_APPROVAL_FOR_ALL_PATH}`;return s.default.createElement(i.Redirect,{to:{pathname:e}})}case p.TRANSACTION_TYPES.TOKEN_METHOD_TRANSFER_FROM:{const e=`${u.CONFIRM_TRANSACTION_ROUTE}/${t}${u.CONFIRM_TRANSFER_FROM_PATH}`;return s.default.createElement(i.Redirect,{to:{pathname:e}})}case p.TRANSACTION_TYPES.TOKEN_METHOD_SAFE_TRANSFER_FROM:{const e=`${u.CONFIRM_TRANSACTION_ROUTE}/${t}${u.CONFIRM_SAFE_TRANSFER_FROM_PATH}`;return s.default.createElement(i.Redirect,{to:{pathname:e}})}default:{const e=`${u.CONFIRM_TRANSACTION_ROUTE}/${t}${u.CONFIRM_TOKEN_METHOD_PATH}`;return s.default.createElement(i.Redirect,{to:{pathname:e}})}}const r=`${u.CONFIRM_TRANSACTION_ROUTE}/${t}${u.CONFIRM_SEND_ETHER_PATH}`;return s.default.createElement(i.Redirect,{to:{pathname:r}})}render(){const{txData:e}=this.props;if(e.txParams)return this.redirectToTransaction();if(e.msgParams){let t=`${u.CONFIRM_TRANSACTION_ROUTE}/${e.id}${u.SIGNATURE_REQUEST_PATH}`;return e.type===d.MESSAGE_TYPE.ETH_DECRYPT?t=`${u.CONFIRM_TRANSACTION_ROUTE}/${e.id}${u.DECRYPT_MESSAGE_REQUEST_PATH}`:e.type===d.MESSAGE_TYPE.ETH_GET_ENCRYPTION_PUBLIC_KEY&&(t=`${u.CONFIRM_TRANSACTION_ROUTE}/${e.id}${u.ENCRYPTION_PUBLIC_KEY_REQUEST_PATH}`),s.default.createElement(i.Redirect,{to:{pathname:t}})}return s.default.createElement(l.default,null)}}n.default=h,a=h,r="propTypes",o={txData:c.default.object},r in a?Object.defineProperty(a,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):a[r]=o}}},{package:"$root$"}],[7986,{"../../selectors":8267,"./confirm-transaction-switch.component":7985,"react-redux":6775},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=e("react-redux"),o=e("../../selectors"),s=(a=e("./confirm-transaction-switch.component"))&&a.__esModule?a:{default:a};var c=(0,r.connect)(((e,t)=>{const{metamask:{unapprovedTxs:n}}=e,{match:{params:a={},url:r}}=t,s=(null==r?void 0:r.match(/\d+/u))&&(null==r?void 0:r.match(/\d+/u)[0]),{id:c}=a,i=c||s,l=(0,o.unconfirmedTransactionsListSelector)(e);return{txData:l.length?n[i]||l[0]:{}}}))(s.default);n.default=c}}},{package:"$root$"}],[7987,{"./confirm-transaction-switch.container":7986},function(){with(this)return function(){"use strict";return function(e,t,n){var a;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=((a=e("./confirm-transaction-switch.container"))&&a.__esModule?a:{default:a}).default;n.default=r}}},{package:"$root$"}],[7988,{"../../../shared/constants/app":7316,"../../../shared/constants/transaction":7329,"../../components/app/signature-request":7603,"../../components/app/signature-request-original":7594,"../../components/app/signature-request-siwe":7597,"../../components/ui/loading-screen":7766,"../../ducks/history/history":7856,"../../ducks/send":7861,"../../helpers/utils/tx-helper":7906,"../../store/actions":8273,loglevel:5597,"prop-types":5840,react:6817,"react-redux":6775,"react-router-dom":6795,redux:6852},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r,o,s=k(e("prop-types")),c=b(e("react")),i=e("react-redux"),l=e("react-router-dom"),u=e("redux"),d=k(e("loglevel")),p=b(e("../../store/actions")),f=k(e("../../helpers/utils/tx-helper")),m=k(e("../../components/app/signature-request")),h=(k(e("../../components/app/signature-request-siwe")),k(e("../../components/app/signature-request-original"))),g=k(e("../../components/ui/loading-screen")),E=e("../../ducks/history/history"),_=e("../../../shared/constants/app"),y=e("../../../shared/constants/transaction"),v=e("../../ducks/send");function T(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(T=function(e){return e?n:t})(e)}function b(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=T(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}function k(e){return e&&e.__esModule?e:{default:e}}class N extends c.Component{getUnapprovedMessagesTotal(){const{unapprovedMsgCount:e=0,unapprovedPersonalMsgCount:t=0,unapprovedTypedMessagesCount:n=0}=this.props;return n+e+t}getTxData(){const{network:e,index:t,unapprovedTxs:n,unapprovedMsgs:a,unapprovedPersonalMsgs:r,unapprovedTypedMessages:o,match:{params:{id:s}={}},chainId:c}=this.props,i=(0,f.default)(n,a,r,o,e,c);return d.default.info(`rendering a combined ${i.length} unconf msgs & txs`),s?i.find((({id:e})=>`${e}`===s)):i[t]}signatureSelect(e){const{type:t,msgParams:{version:n,siwe:a}}=e;return t!==_.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA||"V3"!==n&&"V4"!==n?h.default:m.default}signMessage(e,t){d.default.info("conf-tx.js: signing message");const n=e.msgParams;return n.metamaskId=e.id,this.stopPropagation(t),this.props.dispatch(p.signMsg(n))}signBtcMessage(e,t){d.default.info("conf-tx.js: signing btc message");const n=e.msgParams;return n.metamaskId=e.id,this.stopPropagation(t),this.props.dispatch(p.signMsg(n))}stopPropagation(e){null!=e&&e.stopPropagation&&e.stopPropagation()}signPersonalMessage(e,t){d.default.info("conf-tx.js: signing personal message");const n=e.msgParams;return n.metamaskId=e.id,this.stopPropagation(t),this.props.dispatch(p.signPersonalMsg(n))}signTypedMessage(e,t){d.default.info("conf-tx.js: signing typed message");const n=e.msgParams;return n.metamaskId=e.id,this.stopPropagation(t),this.props.dispatch(p.signTypedMsg(n))}cancelMessage(e,t){return d.default.info("canceling message"),this.stopPropagation(t),this.props.dispatch(p.cancelMsg(e))}cancelPersonalMessage(e,t){return d.default.info("canceling personal message"),this.stopPropagation(t),this.props.dispatch(p.cancelPersonalMsg(e))}cancelTypedMessage(e,t){return d.default.info("canceling typed message"),this.stopPropagation(t),this.props.dispatch(p.cancelTypedMsg(e))}componentDidMount(){const{unapprovedTxs:e={},history:t,mostRecentOverviewPage:n,network:a,chainId:r,sendTo:o}=this.props;0!==(0,f.default)(e,{},{},{},a,r).length||o||0!==this.getUnapprovedMessagesTotal()||t.push(n)}componentDidUpdate(e){const{unapprovedTxs:t={},network:n,chainId:a,currentNetworkTxList:r,sendTo:o,history:s,match:{params:{id:c}={}},mostRecentOverviewPage:i}=this.props;let l;if(c)l=r.find((({id:e})=>`${e}`===c));else{const{index:t,unapprovedTxs:o}=e,s=(0,f.default)(o,{},{},{},n,a)[t]||{};l=r.find((({id:e})=>e===s.id))||{}}const u=(0,f.default)(t,{},{},{},n,a);l&&l.status===y.TRANSACTION_STATUSES.DROPPED?this.props.dispatch(p.showModal({name:"TRANSACTION_CONFIRMED",onSubmit:()=>s.push(i)})):0!==u.length||o||0!==this.getUnapprovedMessagesTotal()||this.props.history.push(i)}render(){const{currentCurrency:e,blockGasLimit:t}=this.props,n=this.getTxData()||{},{msgParams:a}=n;if(d.default.debug("msgParams detected, rendering pending msg"),!a)return c.default.createElement(g.default,null);const r=this.signatureSelect(n);return c.default.createElement(r,{txData:n,key:n.id,identities:this.props.identities,currentCurrency:e,blockGasLimit:t,signMessage:this.signMessage.bind(this,n),signPersonalMessage:this.signPersonalMessage.bind(this,n),signTypedMessage:this.signTypedMessage.bind(this,n),cancelMessage:this.cancelMessage.bind(this,n),cancelPersonalMessage:this.cancelPersonalMessage.bind(this,n),cancelTypedMessage:this.cancelTypedMessage.bind(this,n)})}}a=N,r="propTypes",o={mostRecentOverviewPage:s.default.string.isRequired,unapprovedMsgCount:s.default.number,unapprovedPersonalMsgCount:s.default.number,unapprovedTypedMessagesCount:s.default.number,network:s.default.string,chainId:s.default.string,index:s.default.number,unapprovedTxs:s.default.object,unapprovedMsgs:s.default.object,unapprovedPersonalMsgs:s.default.object,unapprovedTypedMessages:s.default.object,match:s.default.shape({params:s.default.shape({id:s.default.string})}),currentNetworkTxList:s.default.array,currentCurrency:s.default.string,blockGasLimit:s.default.string,history:s.default.object,identities:s.default.object,dispatch:s.default.func.isRequired,sendTo:s.default.string},r in a?Object.defineProperty(a,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):a[r]=o;var w=(0,u.compose)(l.withRouter,(0,i.connect)((function(e){const{metamask:t,appState:n}=e,{unapprovedMsgCount:a,unapprovedPersonalMsgCount:r,unapprovedTypedMessagesCount:o}=t,{txId:s}=n;return{identities:e.metamask.identities,mostRecentOverviewPage:(0,E.getMostRecentOverviewPage)(e),unapprovedTxs:e.metamask.unapprovedTxs,unapprovedMsgs:e.metamask.unapprovedMsgs,unapprovedPersonalMsgs:e.metamask.unapprovedPersonalMsgs,unapprovedTypedMessages:e.metamask.unapprovedTypedMessages,index:s,warning:e.appState.warning,network:e.metamask.network,chainId:e.metamask.provider.chainId,currentCurrency:e.metamask.currentCurrency,blockGasLimit:e.metamask.currentBlockGasLimit,unapprovedMsgCount:a,unapprovedPersonalMsgCount:r,unapprovedTypedMessagesCount:o,sendTo:(0,v.getSendTo)(e),currentNetworkTxList:e.metamask.currentNetworkTxList}})))(N);n.default=w}}},{package:"$root$"}],[7989,{"../../helpers/constants/routes":7872,"../../hooks/useAssetDetails":7919,"../../selectors":8267,"../confirm-approve":7961,"../confirm-send-token":7977,"../confirm-token-transaction-base":7979,"../confirm-transaction-switch":7987,"prop-types":5840,react:6817,"react-redux":6775,"react-router-dom":6795},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=h;var a=m(e("react")),r=m(e("prop-types")),o=e("react-redux"),s=e("react-router-dom"),c=e("../../helpers/constants/routes"),i=e("../../selectors"),l=m(e("../confirm-approve")),u=m(e("../confirm-send-token")),d=m(e("../confirm-token-transaction-base")),p=m(e("../confirm-transaction-switch")),f=e("../../hooks/useAssetDetails");function m(e){return e&&e.__esModule?e:{default:e}}function h({transaction:e}){const{txParams:{data:t,to:n,from:r}={}}=e,{assetStandard:m,assetName:h,userBalance:g,tokenSymbol:E,decimals:_,tokenImage:y,tokenAmount:v,tokenId:T,toAddress:b}=(0,f.useAssetDetails)(n,r,t),{ethTransactionTotal:k,fiatTransactionTotal:N,hexTransactionTotal:w,hexMaximumTransactionFee:O}=(0,o.useSelector)((t=>(0,i.transactionFeeSelector)(t,e)));return a.default.createElement(s.Switch,null,a.default.createElement(s.Route,{exact:!0,path:`${c.CONFIRM_TRANSACTION_ROUTE}/:id?${c.CONFIRM_APPROVE_PATH}`,render:()=>a.default.createElement(l.default,{assetStandard:m,assetName:h,userBalance:g,tokenSymbol:E,decimals:_,tokenImage:y,tokenAmount:v,tokenId:T,userAddress:r,tokenAddress:n,toAddress:b,transaction:e,ethTransactionTotal:k,fiatTransactionTotal:N,hexTransactionTotal:w})}),a.default.createElement(s.Route,{exact:!0,path:`${c.CONFIRM_TRANSACTION_ROUTE}/:id?${c.CONFIRM_SET_APPROVAL_FOR_ALL_PATH}`,render:()=>a.default.createElement(l.default,{isSetApproveForAll:!0,assetStandard:m,assetName:h,userBalance:g,tokenSymbol:E,decimals:_,tokenImage:y,tokenAmount:v,tokenId:T,userAddress:r,tokenAddress:n,toAddress:b,transaction:e,ethTransactionTotal:k,fiatTransactionTotal:N,hexTransactionTotal:w})}),a.default.createElement(s.Route,{exact:!0,path:`${c.CONFIRM_TRANSACTION_ROUTE}/:id?${c.CONFIRM_TRANSFER_FROM_PATH}`,render:()=>a.default.createElement(d.default,{assetStandard:m,assetName:h,userBalance:g,tokenSymbol:E,decimals:_,image:y,tokenAddress:n,toAddress:b,tokenAmount:v,tokenId:T,userAddress:r,transaction:e,ethTransactionTotal:k,fiatTransactionTotal:N,hexMaximumTransactionFee:O})}),a.default.createElement(s.Route,{exact:!0,path:`${c.CONFIRM_TRANSACTION_ROUTE}/:id?${c.CONFIRM_SAFE_TRANSFER_FROM_PATH}`,render:()=>a.default.createElement(d.default,{assetStandard:m,assetName:h,userBalance:g,tokenSymbol:E,decimals:_,image:y,tokenAddress:n,toAddress:b,tokenAmount:v,tokenId:T,userAddress:r,transaction:e,ethTransactionTotal:k,fiatTransactionTotal:N,hexMaximumTransactionFee:O})}),a.default.createElement(s.Route,{exact:!0,path:`${c.CONFIRM_TRANSACTION_ROUTE}/:id?${c.CONFIRM_SEND_TOKEN_PATH}`,render:()=>a.default.createElement(u.default,{assetStandard:m,assetName:h,tokenSymbol:E,image:y,tokenAddress:n,toAddress:b,tokenAmount:v,tokenId:T,transaction:e,ethTransactionTotal:k,fiatTransactionTotal:N,hexMaximumTransactionFee:O})}),a.default.createElement(s.Route,{path:"*",component:p.default}))}h.propTypes={transaction:r.default.shape({origin:r.default.string,txParams:r.default.shape({data:r.default.string,to:r.default.string,from:r.default.string})})}}}},{package:"$root$"}],[7990,{"../../components/ui/loading-screen":7766,"../../helpers/constants/routes":7872,"../../store/actions":8273,"../confirm-decrypt-message":7964,"../confirm-deploy-contract":7967,"../confirm-encryption-public-key":7970,"../confirm-send-ether":7975,"../confirm-transaction-base":7982,"../confirm-transaction-switch":7987,"./conf-tx":7988,"./confirm-token-transaction-switch":7989,"prop-types":5840,react:6817,"react-router-dom":6795},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=_(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=E(e("prop-types")),o=e("react-router-dom"),s=E(e("../../components/ui/loading-screen")),c=E(e("../confirm-transaction-switch")),i=E(e("../confirm-transaction-base")),l=E(e("../confirm-send-ether")),u=E(e("../confirm-deploy-contract")),d=E(e("../confirm-decrypt-message")),p=E(e("../confirm-encryption-public-key")),f=e("../../helpers/constants/routes"),m=e("../../store/actions"),h=E(e("./confirm-token-transaction-switch")),g=E(e("./conf-tx"));function E(e){return e&&e.__esModule?e:{default:e}}function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_=function(e){return e?n:t})(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class v extends a.Component{constructor(e){super(e),y(this,"_beforeUnload",(()=>{this._isMounted=!1,this.state.pollingToken&&((0,m.disconnectGasFeeEstimatePoller)(this.state.pollingToken),(0,m.removePollingTokenFromAppState)(this.state.pollingToken))})),this.state={}}componentDidMount(){this._isMounted=!0;const{totalUnapprovedCount:e=0,sendTo:t,history:n,mostRecentOverviewPage:a,transaction:{txParams:{data:r}={},origin:o}={},getContractMethodData:s,transactionId:c,paramsTransactionId:i}=this.props;if((0,m.getGasFeeEstimatesAndStartPolling)().then((e=>{this._isMounted?(this.setState({pollingToken:e}),(0,m.addPollingTokenToAppState)(e)):((0,m.disconnectGasFeeEstimatePoller)(e),(0,m.removePollingTokenFromAppState)(e))})),window.addEventListener("beforeunload",this._beforeUnload),!e&&!t)return void n.replace(a);"metamask"!==o&&s(r);const l=c||i;l&&this.props.setTransactionToConfirm(l)}componentWillUnmount(){this._beforeUnload(),window.removeEventListener("beforeunload",this._beforeUnload)}componentDidUpdate(e){const{setTransactionToConfirm:t,transaction:{txData:{txParams:{data:n}={},origin:a}={}},clearConfirmTransaction:r,getContractMethodData:o,paramsTransactionId:s,transactionId:c,history:i,mostRecentOverviewPage:l,totalUnapprovedCount:u,setDefaultHomeActiveTabName:d}=this.props;s&&c&&e.paramsTransactionId!==s?(r(),t(s),"metamask"!==a&&o(n)):!e.transactionId||c||u?e.transactionId&&c&&e.transactionId!==c&&i.replace(l):d("Activity").then((()=>{i.replace(f.DEFAULT_ROUTE)}))}render(){const{transactionId:e,paramsTransactionId:t,isTokenMethodAction:n,transaction:r}=this.props,m=e&&(!t||t===e);return n&&m?a.default.createElement(h.default,{transaction:r}):m?a.default.createElement(o.Switch,null,a.default.createElement(o.Route,{exact:!0,path:`${f.CONFIRM_TRANSACTION_ROUTE}/:id?${f.CONFIRM_DEPLOY_CONTRACT_PATH}`,component:u.default}),a.default.createElement(o.Route,{exact:!0,path:`${f.CONFIRM_TRANSACTION_ROUTE}/:id?${f.CONFIRM_SEND_ETHER_PATH}`,component:l.default}),a.default.createElement(o.Route,{exact:!0,path:`${f.CONFIRM_TRANSACTION_ROUTE}/:id?${f.CONFIRM_TOKEN_METHOD_PATH}`,component:i.default}),a.default.createElement(o.Route,{exact:!0,path:`${f.CONFIRM_TRANSACTION_ROUTE}/:id?${f.SIGNATURE_REQUEST_PATH}`,component:g.default}),a.default.createElement(o.Route,{exact:!0,path:`${f.CONFIRM_TRANSACTION_ROUTE}/:id?${f.DECRYPT_MESSAGE_REQUEST_PATH}`,component:d.default}),a.default.createElement(o.Route,{exact:!0,path:`${f.CONFIRM_TRANSACTION_ROUTE}/:id?${f.ENCRYPTION_PUBLIC_KEY_REQUEST_PATH}`,component:p.default}),a.default.createElement(o.Route,{path:"*",component:c.default})):a.default.createElement(s.default,null)}}n.default=v,y(v,"contextTypes",{metricsEvent:r.default.func}),y(v,"propTypes",{history:r.default.object.isRequired,totalUnapprovedCount:r.default.number.isRequired,sendTo:r.default.string,setTransactionToConfirm:r.default.func,clearConfirmTransaction:r.default.func,mostRecentOverviewPage:r.default.string.isRequired,transaction:r.default.object,getContractMethodData:r.default.func,transactionId:r.default.string,paramsTransactionId:r.default.string,isTokenMethodAction:r.default.bool,setDefaultHomeActiveTabName:r.default.func})}}},{package:"$root$"}],[7991,{"../../ducks/confirm-transaction/confirm-transaction.duck":7852,"../../ducks/history/history":7856,"../../ducks/send":7861,"../../helpers/utils/transactions.util":7905,"../../selectors":8267,"../../store/actions":8273,"./confirm-transaction.component":7990,"react-redux":6775,"react-router-dom":6795,redux:6852},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=e("react-redux"),o=e("redux"),s=e("react-router-dom"),c=e("../../ducks/confirm-transaction/confirm-transaction.duck"),i=e("../../helpers/utils/transactions.util"),l=e("../../store/actions"),u=e("../../selectors"),d=e("../../ducks/history/history"),p=e("../../ducks/send"),f=(a=e("./confirm-transaction.component"))&&a.__esModule?a:{default:a};var m=(0,o.compose)(s.withRouter,(0,r.connect)(((e,t)=>{const{metamask:{unapprovedTxs:n}}=e,{match:{params:a={}}}=t,{id:r}=a,o=(0,p.getSendTo)(e),s=(0,u.unconfirmedTransactionsListSelector)(e),c=s.length,l=c?n[r]||s[0]:{},{id:f,type:m}=l;return{totalUnapprovedCount:c,sendTo:o,unapprovedTxs:n,id:r,mostRecentOverviewPage:(0,d.getMostRecentOverviewPage)(e),paramsTransactionId:r&&String(r),transactionId:f&&String(f),transaction:l,isTokenMethodAction:(0,i.isTokenMethodAction)(m)}}),(e=>({setTransactionToConfirm:t=>{e((0,c.setTransactionToConfirm)(t))},clearConfirmTransaction:()=>e((0,c.clearConfirmTransaction)()),getContractMethodData:t=>e((0,l.getContractMethodData)(t)),setDefaultHomeActiveTabName:t=>e((0,l.setDefaultHomeActiveTabName)(t))}))))(f.default);n.default=m}}},{package:"$root$"}],[7992,{"./confirm-transaction.container":7991},function(){with(this)return function(){"use strict";return function(e,t,n){var a;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=((a=e("./confirm-transaction.container"))&&a.__esModule?a:{default:a}).default;n.default=r}}},{package:"$root$"}],[7993,{"../../../../components/ui/button":7686,"prop-types":5840,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=c;var a=s(e("react")),r=s(e("prop-types")),o=s(e("../../../../components/ui/button"));function s(e){return e&&e.__esModule?e:{default:e}}function c({onApprove:e,onCancel:t,approveText:n,cancelText:r,alerts:s}){return a.default.createElement("div",{className:"confirmation-footer"},s,a.default.createElement("div",{className:"confirmation-footer__actions"},a.default.createElement(o.default,{type:"secondary",onClick:t},r),a.default.createElement(o.default,{type:"primary",onClick:e},n)))}c.propTypes={alerts:r.default.node,onApprove:r.default.func.isRequired,onCancel:r.default.func.isRequired,approveText:r.default.string.isRequired,cancelText:r.default.string.isRequired}}}},{package:"$root$"}],[7994,{"./confirmation-footer":7993},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./confirmation-footer"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[7995,{"../../../../../shared/constants/network":7322,"../../../../components/ui/box":7682,"../../../../components/ui/site-icon":7810,"../../../../components/ui/typography/typography":7837,"../../../../helpers/constants/design-system":7868,"prop-types":5840,react:6817,"react-redux":6775},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=p;var a=d(e("react")),r=d(e("prop-types")),o=e("react-redux"),s=d(e("../../../../components/ui/box")),c=d(e("../../../../components/ui/site-icon")),i=d(e("../../../../components/ui/typography/typography")),l=e("../../../../helpers/constants/design-system"),u=e("../../../../../shared/constants/network");function d(e){return e&&e.__esModule?e:{default:e}}function p({newNetwork:e}){const t=(0,o.useSelector)((e=>({nickname:e.metamask.provider.nickname,type:e.metamask.provider.type,chainId:e.metamask.provider.chainId})));return a.default.createElement(s.default,{className:"confirmation-network-switch",display:l.DISPLAY.FLEX,height:l.BLOCK_SIZES.FULL,justifyContent:l.JUSTIFY_CONTENT.CENTER,marginTop:8},a.default.createElement(s.default,{className:"confirmation-network-switch__icon",display:l.DISPLAY.BLOCK},t.chainId in u.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP?a.default.createElement(c.default,{icon:u.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP[t.chainId],name:t.nickname,size:64}):a.default.createElement("div",{className:"confirmation-network-switch__unknown-icon"},a.default.createElement("i",{className:"fa fa-question fa-2x"})),a.default.createElement(i.default,{color:l.COLORS.TEXT_DEFAULT,variant:l.TYPOGRAPHY.H6,fontWeight:l.FONT_WEIGHT.NORMAL,align:l.TEXT_ALIGN.CENTER,boxProps:{display:l.DISPLAY.FLEX,justifyContent:l.JUSTIFY_CONTENT.CENTER}},t.nickname||u.NETWORK_TO_NAME_MAP[t.type])),a.default.createElement(s.default,{className:"confirmation-network-switch__center-icon",display:l.DISPLAY.FLEX,alignItems:l.ALIGN_ITEMS.CENTER,justifyContent:l.JUSTIFY_CONTENT.CENTER},a.default.createElement("i",{className:"fa fa-angle-right fa-lg confirmation-network-switch__check"}),a.default.createElement("div",{className:"confirmation-network-switch__dashed-line"})),a.default.createElement(s.default,{className:"confirmation-network-switch__icon",display:l.DISPLAY.BLOCK},e.chainId in u.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP?a.default.createElement(c.default,{icon:u.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP[e.chainId],name:e.name,size:64}):a.default.createElement("div",{className:"confirmation-network-switch__unknown-icon"},a.default.createElement("i",{className:"fa fa-question fa-2x"})),a.default.createElement(i.default,{color:l.COLORS.TEXT_DEFAULT,variant:l.TYPOGRAPHY.H6,fontWeight:l.FONT_WEIGHT.NORMAL,align:l.TEXT_ALIGN.CENTER,boxProps:{display:l.DISPLAY.FLEX,justifyContent:l.JUSTIFY_CONTENT.CENTER}},e.name)))}p.propTypes={newNetwork:r.default.shape({chainId:r.default.string.isRequired,name:r.default.string.isRequired})}}}},{package:"$root$"}],[7996,{"./confirmation-network-switch":7995},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./confirmation-network-switch"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[7997,{"../../components/app/metamask-template-renderer":7499,"../../components/app/network-display/network-display":7567,"../../components/ui/box":7682,"../../components/ui/callout":7688,"../../components/ui/site-origin":7812,"../../helpers/constants/design-system":7868,"../../helpers/constants/routes":7872,"../../hooks/useI18nContext":7927,"../../hooks/useOriginMetadata":7929,"../../selectors":8267,"./components/confirmation-footer":7994,"./templates":8e3,immer:4839,lodash:5584,"prop-types":5840,react:6817,"react-redux":6775,"react-router-dom":6795},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=N;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=T(e("prop-types")),o=e("react-redux"),s=e("react-router-dom"),c=e("lodash"),i=e("immer"),l=T(e("../../components/ui/box")),u=T(e("../../components/app/metamask-template-renderer")),d=e("../../helpers/constants/routes"),p=e("../../helpers/constants/design-system"),f=e("../../hooks/useI18nContext"),m=e("../../hooks/useOriginMetadata"),h=e("../../selectors"),g=T(e("../../components/app/network-display/network-display")),E=T(e("../../components/ui/callout")),_=T(e("../../components/ui/site-origin")),y=T(e("./components/confirmation-footer")),v=e("./templates");function T(e){return e&&e.__esModule?e:{default:e}}function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}const k=(0,i.produce)(((e,t)=>{var n;switch(t.type){case"dismiss":null!=e&&null!==(n=e[t.confirmationId])&&void 0!==n&&n[t.alertId]&&(e[t.confirmationId][t.alertId].dismissed=!0);break;case"set":e[t.confirmationId]||(e[t.confirmationId]={}),t.alerts.forEach((n=>{e[t.confirmationId][n.id]={...n,dismissed:!1}}));break;default:throw new Error("You must provide a type when dispatching an action for alertState")}}));function N({redirectToHomeOnZeroConfirmations:e=!0}){const t=(0,f.useI18nContext)(),n=(0,o.useDispatch)(),r=(0,s.useHistory)(),i=(0,o.useSelector)(h.getUnapprovedTemplatedConfirmations,c.isEqual),[T,b]=(0,a.useState)(0),N=i[T],w=(0,m.useOriginMetadata)(null==N?void 0:N.origin)||{},[O,P]=function(e){const[t,n]=(0,a.useReducer)(k,{});return(0,a.useEffect)((()=>{let t=!0;return e&&(0,v.getTemplateAlerts)(e).then((a=>{t&&a.length>0&&n({type:"set",confirmationId:e.id,alerts:a})})),()=>{t=!1}}),[e]),[t,(0,a.useCallback)((t=>{n({type:"dismiss",confirmationId:e.id,alertId:t})}),[e])]}(N),A=(0,a.useMemo)((()=>N?(0,v.getTemplateValues)(N,t,n,r):{}),[N,t,n,r]);return(0,a.useEffect)((()=>{0===i.length&&e?r.push(d.DEFAULT_ROUTE):i.length<=T&&b(i.length-1)}),[i,r,T,e]),N?a.default.createElement("div",{className:"confirmation-page"},i.length>1&&a.default.createElement("div",{className:"confirmation-page__navigation"},a.default.createElement("p",null,t("xOfYPending",[T+1,i.length])),T>0&&a.default.createElement("button",{className:"confirmation-page__navigation-button",onClick:()=>b(T-1)},a.default.createElement("i",{className:"fas fa-chevron-left"})),a.default.createElement("button",{className:"confirmation-page__navigation-button",disabled:T+1===i.length,onClick:()=>b(T+1)},a.default.createElement("i",{className:"fas fa-chevron-right"}))),a.default.createElement("div",{className:"confirmation-page__content"},A.networkDisplay?a.default.createElement(l.default,{justifyContent:"center",marginTop:2},a.default.createElement(g.default,{indicatorSize:p.SIZES.XS,labelProps:{color:p.COLORS.TEXT_DEFAULT}})):null,"metamask"===N.origin?null:a.default.createElement(l.default,{alignItems:"center",marginTop:1,paddingTop:1,paddingRight:4,paddingLeft:4,paddingBottom:4,flexDirection:p.FLEX_DIRECTION.COLUMN},a.default.createElement(_.default,{chip:!0,siteOrigin:w.origin,title:w.origin,iconSrc:w.iconUrl,iconName:w.hostname})),a.default.createElement(u.default,{sections:A.content})),a.default.createElement(y.default,{alerts:O[N.id]&&Object.values(O[N.id]).filter((e=>!1===e.dismissed)).map(((e,t,n)=>a.default.createElement(E.default,{key:e.id,severity:e.severity,dismiss:()=>P(e.id),isFirst:0===t,isLast:t===n.length-1,isMultiple:n.length>1},a.default.createElement(u.default,{sections:e.content})))),onApprove:A.onApprove,onCancel:A.onCancel,approveText:A.approvalText,cancelText:A.cancelText})):null}N.propTypes={redirectToHomeOnZeroConfirmations:r.default.bool}}}},{package:"$root$"}],[7998,{"./confirmation":7997},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./confirmation"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[8002,{"../../components/app/connected-accounts-list":7425,"../../components/app/connected-accounts-permissions":7427,"../../components/ui/popover":7798,"../../helpers/utils/util":7907,"prop-types":5840,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=u(e("prop-types")),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),o=u(e("../../components/ui/popover")),s=u(e("../../components/app/connected-accounts-list")),c=u(e("../../components/app/connected-accounts-permissions")),i=e("../../helpers/utils/util");function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class p extends r.PureComponent{render(){const{accountToConnect:e,activeTabOrigin:t,isActiveTabExtension:n,connectAccount:a,connectedAccounts:l,history:u,mostRecentOverviewPage:d,permissions:p,selectedAddress:f,removePermittedAccount:m,setSelectedAddress:h}=this.props,{t:g}=this.context,E=l.length>1?g("connectedAccountsDescriptionPlural",[l.length]):g("connectedAccountsDescriptionSingular");return r.default.createElement(o.default,{title:n?g("currentExtension"):(0,i.getURLHost)(t),subtitle:l.length?E:g("connectedAccountsEmptyDescription"),onClose:()=>u.push(d),footerClassName:"connected-accounts__footer",footer:r.default.createElement(c.default,{permissions:p})},r.default.createElement(s.default,{accountToConnect:e,connectAccount:a,connectedAccounts:l,selectedAddress:f,removePermittedAccount:m,setSelectedAddress:h,shouldRenderListOptions:!0}))}}n.default=p,d(p,"contextTypes",{t:a.default.func.isRequired}),d(p,"defaultProps",{accountToConnect:null,permissions:undefined}),d(p,"propTypes",{accountToConnect:a.default.object,activeTabOrigin:a.default.string.isRequired,connectAccount:a.default.func.isRequired,connectedAccounts:a.default.array.isRequired,mostRecentOverviewPage:a.default.string.isRequired,permissions:a.default.array,isActiveTabExtension:a.default.bool.isRequired,selectedAddress:a.default.string.isRequired,removePermittedAccount:a.default.func.isRequired,setSelectedAddress:a.default.func.isRequired,history:a.default.object.isRequired})}}},{package:"$root$"}],[8003,{"../../ducks/history/history":7856,"../../helpers/utils/util":7907,"../../selectors":8267,"../../store/actions":8273,"./connected-accounts.component":8002,"react-redux":6775},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=e("react-redux"),o=e("../../selectors"),s=e("../../helpers/utils/util"),c=e("../../store/actions"),i=e("../../ducks/history/history"),l=(a=e("./connected-accounts.component"))&&a.__esModule?a:{default:a};var u=(0,r.connect)((e=>{const{activeTab:t}=e,n=(0,o.getAccountToConnectToActiveTab)(e),a=(0,o.getOrderedConnectedAccountsForActiveTab)(e),r=(0,o.getPermissionsForActiveTab)(e),c=(0,o.getSelectedAddress)(e);return{accountToConnect:n,isActiveTabExtension:(0,s.isExtensionUrl)(t),activeTabOrigin:t.origin,connectedAccounts:a,mostRecentOverviewPage:(0,i.getMostRecentOverviewPage)(e),permissions:r,selectedAddress:c}}),(e=>({addPermittedAccount:(t,n)=>e((0,c.addPermittedAccount)(t,n)),removePermittedAccount:(t,n)=>e((0,c.removePermittedAccount)(t,n)),setSelectedAddress:t=>e((0,c.setSelectedAddress)(t))})),((e,t,n)=>{const{activeTabOrigin:a}=e;return{...n,...e,...t,connectAccount:e=>t.addPermittedAccount(a,e),removePermittedAccount:e=>t.removePermittedAccount(a,e)}}))(l.default);n.default=u}}},{package:"$root$"}],[8004,{"./connected-accounts.container":8003},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./connected-accounts.container"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[8005,{"../../components/app/connected-sites-list":7429,"../../components/ui/button":7686,"../../components/ui/popover/popover.component":7799,"prop-types":5840,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=l(e("prop-types")),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),o=l(e("../../components/app/connected-sites-list")),s=l(e("../../components/ui/popover/popover.component")),c=l(e("../../components/ui/button"));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class d extends r.Component{constructor(...e){super(...e),u(this,"state",{sitePendingDisconnect:null}),u(this,"setPendingDisconnect",(e=>{this.setState({sitePendingDisconnect:{subjectKey:e}})})),u(this,"clearPendingDisconnect",(()=>{this.setState({sitePendingDisconnect:null})})),u(this,"disconnectAccount",(()=>{const{disconnectAccount:e}=this.props,{sitePendingDisconnect:t}=this.state;e(t.subjectKey),this.clearPendingDisconnect()})),u(this,"disconnectAllAccounts",(()=>{const{disconnectAllAccounts:e}=this.props,{sitePendingDisconnect:t}=this.state;e(t.subjectKey),this.clearPendingDisconnect()}))}componentDidMount(){const{getOpenMetamaskTabsIds:e}=this.props;e()}renderConnectedSitesList(){return r.default.createElement(o.default,{connectedSubjects:this.props.connectedSubjects,onDisconnect:this.setPendingDisconnect})}renderConnectedSitesPopover(){const{accountLabel:e,closePopover:t,connectedSubjects:n,tabToConnect:a,requestAccountsPermission:o}=this.props,{t:c}=this.context;return r.default.createElement(s.default,{className:"connected-sites",title:c("connectedSites"),subtitle:n.length?c("connectedSitesDescription",[e]):c("connectedSitesEmptyDescription",[e]),onClose:t,footer:a?r.default.createElement("a",{className:"connected-sites__text-button",onClick:o},c("connectManually")):null,footerClassName:"connected-sites__add-site-manually"},this.renderConnectedSitesList())}renderDisconnectPopover(){const{closePopover:e,permittedAccountsByOrigin:t}=this.props,{t:n}=this.context,{sitePendingDisconnect:{subjectKey:a}}=this.state,o=t[a].length;return r.default.createElement(s.default,{className:"connected-sites",title:n("disconnectPrompt",[a]),subtitle:n("disconnectAllAccountsConfirmationDescription"),onClose:e,footer:r.default.createElement(r.default.Fragment,null,r.default.createElement("div",{className:"connected-sites__footer-row"},r.default.createElement(c.default,{type:"secondary",onClick:this.clearPendingDisconnect},n("cancel")),r.default.createElement(c.default,{type:"primary",onClick:this.disconnectAccount},n("disconnect"))),o>1?r.default.createElement("div",{className:"connected-sites__footer-row"},r.default.createElement("a",{className:"connected-sites__text-button",onClick:this.disconnectAllAccounts},n("disconnectAllAccounts"))):null),footerClassName:"connected-sites__confirmation"})}render(){const{sitePendingDisconnect:e}=this.state;return e?this.renderDisconnectPopover():this.renderConnectedSitesPopover()}}n.default=d,u(d,"contextTypes",{t:a.default.func}),u(d,"defaultProps",{tabToConnect:null}),u(d,"propTypes",{accountLabel:a.default.string.isRequired,closePopover:a.default.func.isRequired,connectedSubjects:a.default.arrayOf(a.default.object).isRequired,disconnectAllAccounts:a.default.func.isRequired,disconnectAccount:a.default.func.isRequired,getOpenMetamaskTabsIds:a.default.func.isRequired,permittedAccountsByOrigin:a.default.objectOf(a.default.arrayOf(a.default.string)).isRequired,tabToConnect:a.default.object,requestAccountsPermission:a.default.func.isRequired})}}},{package:"$root$"}],[8006,{"../../ducks/history/history":7856,"../../helpers/constants/routes":7872,"../../selectors":8267,"../../store/actions":8273,"./connected-sites.component":8005,"react-redux":6775},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=e("react-redux"),o=e("../../store/actions"),s=e("../../selectors"),c=e("../../helpers/constants/routes"),i=e("../../ducks/history/history"),l=(a=e("./connected-sites.component"))&&a.__esModule?a:{default:a};var u=(0,r.connect)((e=>{var t;const{openMetaMaskTabs:n}=e.appState,{id:a}=e.activeTab,r=(0,s.getConnectedSubjectsForSelectedAddress)(e),o=(0,s.getOriginOfCurrentTab)(e),c=(0,s.getPermittedAccountsByOrigin)(e),l=(0,s.getSelectedAddress)(e),u=!(null!==(t=c[o])&&void 0!==t&&t.length);let d;return o&&u&&!n[a]&&(d={origin:o}),{accountLabel:(0,s.getCurrentAccountWithSendEtherInfo)(e).name,connectedSubjects:r,subjects:(0,s.getPermissionSubjects)(e),mostRecentOverviewPage:(0,i.getMostRecentOverviewPage)(e),permittedAccountsByOrigin:c,selectedAddress:l,tabToConnect:d}}),(e=>({getOpenMetamaskTabsIds:()=>e((0,o.getOpenMetamaskTabsIds)()),disconnectAccount:(t,n)=>{e((0,o.removePermittedAccount)(t,n))},disconnectAllAccounts:(t,n)=>{const a=Object.values(n.permissions).map((({parentCapability:e})=>e));e((0,o.removePermissionsFor)({[t]:a}))},requestAccountsPermissionWithId:t=>e((0,o.requestAccountsPermissionWithId)(t))})),((e,t,n)=>{const{connectedSubjects:a,subjects:r,mostRecentOverviewPage:o,selectedAddress:s,tabToConnect:i}=e,{disconnectAccount:l,disconnectAllAccounts:u,requestAccountsPermissionWithId:d}=t,{history:p}=n,f=()=>p.push(o);return{...n,...e,...t,closePopover:f,disconnectAccount:e=>{l(e,s),1===a.length&&f()},disconnectAllAccounts:e=>{u(e,r[e]),1===a.length&&f()},requestAccountsPermission:async()=>{const e=await d(i.origin);p.push(`${c.CONNECT_ROUTE}/${e}`)}}}))(l.default);n.default=u}}},{package:"$root$"}],[8007,{"./connected-sites.container":8006},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./connected-sites.container"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[8008,{"../../../../shared/constants/hardware-wallets":7319,"../../../../shared/constants/metametrics":7321,"../../../components/ui/button":7686,"../../../components/ui/check-box":7692,"../../../components/ui/dropdown":7708,"../../../helpers/utils/util":7907,"@metamask/etherscan-link":1562,"prop-types":5840,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=f(e("prop-types")),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),o=e("@metamask/etherscan-link"),s=f(e("../../../components/ui/button")),c=f(e("../../../components/ui/check-box")),i=f(e("../../../components/ui/dropdown")),l=e("../../../helpers/utils/util"),u=e("../../../../shared/constants/hardware-wallets"),d=e("../../../../shared/constants/metametrics");function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function f(e){return e&&e.__esModule?e:{default:e}}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class h extends r.Component{constructor(...e){super(...e),m(this,"state",{pathValue:null}),m(this,"goToNextPage",(()=>{5===this.props.accounts.length?this.props.getPage(this.props.device,1,this.props.selectedPath):this.props.onAccountRestriction()})),m(this,"goToPreviousPage",(()=>{this.props.getPage(this.props.device,-1,this.props.selectedPath)}))}setPath(e){this.setState({pathValue:e})}renderHdPathSelector(){const{device:e,selectedPath:t,hdPaths:n,onPathChange:a}=this.props,{pathValue:o}=this.state;return r.default.createElement("div",null,r.default.createElement("h3",{className:"hw-connect__hdPath__title"},this.context.t("selectHdPath")),r.default.createElement("p",{className:"hw-connect__msg"},this.context.t("selectPathHelp")),r.default.createElement("div",{className:"hw-connect__hdPath"},r.default.createElement(i.default,{className:"hw-connect__hdPath__select",options:n[e.toLowerCase()],selectedOption:o||t,onChange:e=>{this.setPath(e),a(e)}})))}capitalizeDevice(e){return e.slice(0,1).toUpperCase()+e.slice(1)}renderHeader(){const{device:e}=this.props,t=[u.DEVICE_NAMES.LEDGER,u.DEVICE_NAMES.LATTICE,u.DEVICE_NAMES.TREZOR].includes(e.toLowerCase());return r.default.createElement("div",{className:"hw-connect"},r.default.createElement("h3",{className:"hw-connect__unlock-title"},this.context.t("selectAnAccount")),t?this.renderHdPathSelector():null,r.default.createElement("h3",{className:"hw-connect__hdPath__title"},this.context.t("selectAnAccount")))}renderAccounts(){const{accounts:e,connectedAccounts:t,rpcPrefs:n,chainId:a}=this.props;return r.default.createElement("div",{className:"hw-account-list"},e.map(((e,s)=>{const i=t.includes(e.address.toLowerCase()),u=e.index,p=this.props.selectedAccounts.includes(e.index)||i;return r.default.createElement("div",{className:"hw-account-list__item",key:e.address,title:i?this.context.t("selectAnAccountAlreadyConnected"):""},r.default.createElement("div",{className:"hw-account-list__item__checkbox"},r.default.createElement(c.default,{id:`address-${s}`,checked:p,disabled:i,onClick:()=>{this.props.onAccountChange(u)}}),r.default.createElement("label",{className:"hw-account-list__item__label",htmlFor:`address-${s}`},r.default.createElement("span",{className:"hw-account-list__item__index"},e.index+1),`${e.address.slice(0,4)}...${e.address.slice(-4)}`,r.default.createElement("span",{className:"hw-account-list__item__balance"},`${e.balance}`))),r.default.createElement("a",{className:"hw-account-list__item__link",onClick:()=>{const t=(0,o.getAccountLink)((0,l.getQtumAddressFromHex)(e.address,a),a,n);this.context.trackEvent({category:d.EVENT.CATEGORIES.ACCOUNTS,event:"Clicked Block Explorer Link",properties:{actions:"Hardware Connect",link_type:"Account Tracker",block_explorer_domain:(0,l.getURLHostName)(t)}}),global.platform.openTab({url:t})},target:"_blank",rel:"noopener noreferrer",title:this.context.t("etherscanView")},r.default.createElement("i",{className:"fa fa-share-square",style:{color:"var(--color-icon-default)"}})))})))}renderPagination(){return r.default.createElement("div",{className:"hw-list-pagination"},r.default.createElement("button",{className:"hw-list-pagination__button",onClick:this.goToPreviousPage},`< ${this.context.t("prev")}`),r.default.createElement("button",{className:"hw-list-pagination__button",onClick:this.goToNextPage},`${this.context.t("next")} >`))}renderButtons(){const e=0===this.props.selectedAccounts.length;return e&&({}.disabled=!0),r.default.createElement("div",{className:"new-external-account-form__buttons"},r.default.createElement(s.default,{type:"secondary",large:!0,className:"new-external-account-form__button",onClick:this.props.onCancel.bind(this)},this.context.t("cancel")),r.default.createElement(s.default,{type:"primary",large:!0,className:"new-external-account-form__button unlock",disabled:e,onClick:this.props.onUnlockAccounts.bind(this,this.props.device,this.props.selectedPath)},this.context.t("unlock")))}renderForgetDevice(){return r.default.createElement("div",{className:"hw-forget-device-container"},r.default.createElement("a",{onClick:this.props.onForgetDevice.bind(this,this.props.device)},this.context.t("forgetDevice")))}render(){return r.default.createElement("div",{className:"new-external-account-form account-list"},this.renderHeader(),this.renderAccounts(),this.renderPagination(),this.renderButtons(),this.renderForgetDevice())}}h.propTypes={onPathChange:a.default.func.isRequired,selectedPath:a.default.string.isRequired,device:a.default.string.isRequired,accounts:a.default.array.isRequired,connectedAccounts:a.default.array.isRequired,onAccountChange:a.default.func.isRequired,onForgetDevice:a.default.func.isRequired,getPage:a.default.func.isRequired,chainId:a.default.string,rpcPrefs:a.default.object,selectedAccounts:a.default.array.isRequired,onUnlockAccounts:a.default.func,onCancel:a.default.func,onAccountRestriction:a.default.func,hdPaths:a.default.array.isRequired},h.contextTypes={t:a.default.func,trackEvent:a.default.func};var g=h;n.default=g}}},{package:"$root$"}],[8009,{"../../../../shared/constants/hardware-wallets":7319,"../../../../shared/constants/metametrics":7321,"../../../../shared/constants/time":7327,"../../../ducks/history/history":7856,"../../../helpers/constants/zendesk-url":7875,"../../../helpers/utils/util":7907,"../../../selectors":8267,"../../../store/actions":8273,"./account-list":8008,"./select-hardware":8010,"prop-types":5840,react:6817,"react-redux":6775},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=_(e("react")),r=g(e("prop-types")),o=e("react-redux"),s=_(e("../../../store/actions")),c=e("../../../selectors"),i=e("../../../helpers/utils/util"),l=e("../../../ducks/history/history"),u=e("../../../../shared/constants/metametrics"),d=e("../../../../shared/constants/time"),p=e("../../../../shared/constants/hardware-wallets"),f=g(e("../../../helpers/constants/zendesk-url")),m=g(e("./select-hardware")),h=g(e("./account-list"));function g(e){return e&&e.__esModule?e:{default:e}}function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}function _(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const v="U2F",T="m/44'/60'/0'",b="m/44'/60'/0'/0",k="m/44'/60'/0'/0/x",N="m/44'/60'/x'/0/0",w="m/44'/60'/0'/x",O={ledger:[{name:"Ledger Live",value:"m/44'/60'/0'/0/0"},{name:"Legacy (MEW / MyCrypto)",value:T},{name:"BIP44 Standard (e.g. MetaMask, Trezor)",value:b}],lattice:[{name:"Standard (m/44'/60'/0'/0/x)",value:k},{name:"Ledger Live (m/44'/60'/x'/0/0)",value:N},{name:"Ledger Legacy (m/44'/60'/0'/x)",value:w}],trezor:[{name:"BIP44 Standard (e.g. MetaMask, Trezor)",value:b},{name:"Trezor Testnets",value:"m/44'/1'/0'/0"}]};class P extends a.Component{constructor(...e){super(...e),y(this,"state",{error:null,selectedAccounts:[],accounts:[],browserSupported:!0,unlocked:!1,device:null}),y(this,"connectToHardwareWallet",(e=>{this.setState({device:e}),this.state.accounts.length||this.getPage(e,0,this.props.defaultHdPaths[e])})),y(this,"onPathChange",(e=>{this.props.setHardwareWalletDefaultHdPath({device:this.state.device,path:e}),this.setState({selectedAccounts:[]}),this.getPage(this.state.device,0,e)})),y(this,"onAccountChange",(e=>{let{selectedAccounts:t}=this.state;t.includes(e)?t=t.filter((t=>e!==t)):t.push(e),this.setState({selectedAccounts:t,error:null})})),y(this,"onAccountRestriction",(()=>{this.setState({error:this.context.t("ledgerAccountRestriction")})})),y(this,"getPage",((e,t,n)=>{this.props.connectHardware(e,t,n,this.context.t).then((t=>{if(t.length){0!==this.state.accounts.length||this.state.unlocked||this.showTemporaryAlert();const n=t.map((e=>{var t;const n=e.address.toLowerCase(),a=(null===(t=this.props.accounts[n])||void 0===t?void 0:t.balance)||null;return e.balance=a?(0,i.formatBalance)(a,6):"...",e}));this.setState({accounts:n,unlocked:!0,device:e,error:null})}})).catch((e=>{const t="string"==typeof e?e:e.message;"Window blocked"===t?this.setState({browserSupported:!1,error:null}):t.includes(v)?this.setState({error:v}):"LEDGER_LOCKED"===t||"LEDGER_WRONG_APP"===t?this.setState({error:this.context.t("ledgerLocked")}):t.includes("timeout")?this.setState({error:this.context.t("ledgerTimeout")}):t.toLowerCase().includes("KeystoneError#pubkey_account.no_expected_account".toLowerCase())?this.setState({error:this.context.t("QRHardwarePubkeyAccountOutOfRange")}):"Window closed"!==t&&"Popup closed"!==t&&!1===t.toLowerCase().includes("KeystoneError#sync_cancel".toLowerCase())&&this.setState({error:t})}))})),y(this,"onForgetDevice",(e=>{this.props.forgetDevice(e).then((e=>{this.setState({error:null,selectedAccounts:[],accounts:[],unlocked:!1})})).catch((e=>{this.setState({error:e.message})}))})),y(this,"onUnlockAccounts",((e,t)=>{const{history:n,mostRecentOverviewPage:a,unlockHardwareWalletAccounts:r}=this.props,{selectedAccounts:o}=this.state;0===o.length&&this.setState({error:this.context.t("accountSelectionRequired")});const s=T===t?this.context.t("hardwareWalletLegacyDescription"):"";return r(o,e,t||null,s).then((t=>{this.context.trackEvent({category:u.EVENT.CATEGORIES.ACCOUNTS,event:u.EVENT_NAMES.ACCOUNT_ADDED,properties:{account_type:u.EVENT.ACCOUNT_TYPES.HARDWARE,account_hardware_type:e}}),n.push(a)})).catch((t=>{this.context.trackEvent({category:u.EVENT.CATEGORIES.ACCOUNTS,event:u.EVENT_NAMES.ACCOUNT_ADD_FAILED,properties:{account_type:u.EVENT.ACCOUNT_TYPES.HARDWARE,account_hardware_type:e,error:t.message}}),this.setState({error:t.message})}))})),y(this,"onCancel",(()=>{const{history:e,mostRecentOverviewPage:t}=this.props;e.push(t)}))}UNSAFE_componentWillReceiveProps(e){const{accounts:t}=e,n=this.state.accounts.map((e=>{var n;const a=e.address.toLowerCase(),r=(null===(n=t[a])||void 0===n?void 0:n.balance)||null;return e.balance=r?(0,i.formatBalance)(r,6):"...",e}));this.setState({accounts:n})}componentDidMount(){this.checkIfUnlocked()}async checkIfUnlocked(){for(const e of[p.DEVICE_NAMES.TREZOR,p.DEVICE_NAMES.LEDGER,p.DEVICE_NAMES.LATTICE]){const t=this.props.defaultHdPaths[e];await this.props.checkHardwareStatus(e,t)&&(this.setState({unlocked:!0}),this.getPage(e,0,t))}}showTemporaryAlert(){this.props.showAlert(this.context.t("hardwareWalletConnected")),setTimeout((e=>{this.props.hideAlert()}),5*d.SECOND)}renderError(){return this.state.error===v?a.default.createElement("p",{className:"hw-connect__error"},this.context.t("troubleConnectingToWallet",[this.state.device,a.default.createElement("a",{href:f.default.HARDWARE_CONNECTION,key:"hardware-connection-guide",target:"_blank",rel:"noopener noreferrer",className:"hw-connect__link",style:{marginLeft:"5px",marginRight:"5px"}},this.context.t("walletConnectionGuide"))])):this.state.error?a.default.createElement("span",{className:"hw-connect__error"},this.state.error):null}renderContent(){return this.state.accounts.length?a.default.createElement(h.default,{onPathChange:this.onPathChange,selectedPath:this.props.defaultHdPaths[this.state.device],device:this.state.device,accounts:this.state.accounts,connectedAccounts:this.props.connectedAccounts,selectedAccounts:this.state.selectedAccounts,onAccountChange:this.onAccountChange,chainId:this.props.chainId,rpcPrefs:this.props.rpcPrefs,getPage:this.getPage,onUnlockAccounts:this.onUnlockAccounts,onForgetDevice:this.onForgetDevice,onCancel:this.onCancel,onAccountRestriction:this.onAccountRestriction,hdPaths:O}):a.default.createElement(m.default,{connectToHardwareWallet:this.connectToHardwareWallet,browserSupported:this.state.browserSupported,ledgerTransportType:this.props.ledgerTransportType})}render(){return a.default.createElement(a.default.Fragment,null,this.renderError(),this.renderContent())}}y(P,"contextTypes",{t:r.default.func}),P.propTypes={connectHardware:r.default.func,checkHardwareStatus:r.default.func,forgetDevice:r.default.func,showAlert:r.default.func,hideAlert:r.default.func,unlockHardwareWalletAccounts:r.default.func,setHardwareWalletDefaultHdPath:r.default.func,history:r.default.object,chainId:r.default.string,rpcPrefs:r.default.object,accounts:r.default.object,connectedAccounts:r.default.array.isRequired,defaultHdPaths:r.default.object,mostRecentOverviewPage:r.default.string.isRequired,ledgerTransportType:r.default.oneOf(Object.values(p.LEDGER_TRANSPORT_TYPES))};P.contextTypes={t:r.default.func,trackEvent:r.default.func};var A=(0,o.connect)((e=>({chainId:(0,c.getCurrentChainId)(e),rpcPrefs:(0,c.getRpcPrefsForCurrentProvider)(e),accounts:(0,c.getMetaMaskAccounts)(e),connectedAccounts:(0,c.getMetaMaskAccountsConnected)(e),defaultHdPaths:e.appState.defaultHdPaths,mostRecentOverviewPage:(0,l.getMostRecentOverviewPage)(e),ledgerTransportType:e.metamask.ledgerTransportType})),(e=>({setHardwareWalletDefaultHdPath:({device:t,path:n})=>e(s.setHardwareWalletDefaultHdPath({device:t,path:n})),connectHardware:(t,n,a,r)=>e(s.connectHardware(t,n,a,r)),checkHardwareStatus:(t,n)=>e(s.checkHardwareStatus(t,n)),forgetDevice:t=>e(s.forgetDevice(t)),unlockHardwareWalletAccounts:(t,n,a,r)=>e(s.unlockHardwareWalletAccounts(t,n,a,r)),showAlert:t=>e(s.showAlert(t)),hideAlert:()=>e(s.hideAlert())})))(P);n.default=A}}},{package:"$root$"}],[8010,{"../../../../shared/constants/hardware-wallets":7319,"../../../components/ui/button":7686,"../../../components/ui/logo/logo-lattice":7772,"../../../components/ui/logo/logo-ledger":7773,"../../../components/ui/logo/logo-qr-based":7775,"../../../components/ui/logo/logo-trezor":7777,"../../../helpers/constants/zendesk-url":7875,classnames:2484,"prop-types":5840,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=m(e("classnames")),r=m(e("prop-types")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),s=m(e("../../../components/ui/button")),c=m(e("../../../components/ui/logo/logo-ledger")),i=m(e("../../../components/ui/logo/logo-qr-based")),l=m(e("../../../components/ui/logo/logo-trezor")),u=m(e("../../../components/ui/logo/logo-lattice")),d=e("../../../../shared/constants/hardware-wallets"),p=m(e("../../../helpers/constants/zendesk-url"));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function m(e){return e&&e.__esModule?e:{default:e}}function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},h.apply(this,arguments)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class E extends o.Component{constructor(...e){super(...e),g(this,"state",{selectedDevice:null}),g(this,"connect",(()=>(this.state.selectedDevice&&this.props.connectToHardwareWallet(this.state.selectedDevice),null)))}renderConnectToTrezorButton(){return o.default.createElement("button",{className:(0,a.default)("hw-connect__btn",{selected:this.state.selectedDevice===d.DEVICE_NAMES.TREZOR}),onClick:e=>this.setState({selectedDevice:d.DEVICE_NAMES.TREZOR})},o.default.createElement(l.default,{className:"hw-connect__btn__img",ariaLabel:"Trezor"}))}renderConnectToLatticeButton(){return o.default.createElement("button",{className:(0,a.default)("hw-connect__btn",{selected:this.state.selectedDevice===d.DEVICE_NAMES.LATTICE}),onClick:e=>this.setState({selectedDevice:d.DEVICE_NAMES.LATTICE})},o.default.createElement(u.default,{className:"hw-connect__btn__img",ariaLabel:"Lattice"}))}renderConnectToLedgerButton(){return o.default.createElement("button",{className:(0,a.default)("hw-connect__btn",{selected:this.state.selectedDevice===d.DEVICE_NAMES.LEDGER}),onClick:e=>this.setState({selectedDevice:d.DEVICE_NAMES.LEDGER})},o.default.createElement(c.default,{className:"hw-connect__btn__img",ariaLabel:"Ledger"}))}renderConnectToQRButton(){return o.default.createElement("button",{className:(0,a.default)("hw-connect__btn",{selected:this.state.selectedDevice===d.DEVICE_NAMES.QR}),onClick:e=>this.setState({selectedDevice:d.DEVICE_NAMES.QR})},o.default.createElement(i.default,{className:"hw-connect__btn__img",ariaLabel:"QRCode"}))}renderButtons(){return o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{className:"hw-connect__btn-wrapper"},this.renderConnectToLedgerButton(),this.renderConnectToTrezorButton()),o.default.createElement("div",{className:"hw-connect__btn-wrapper",style:{margin:"10px 0 0 0"}},this.renderConnectToLatticeButton(),this.renderConnectToQRButton()))}renderContinueButton(){return o.default.createElement(s.default,{type:"primary",large:!0,className:"hw-connect__connect-btn",onClick:this.connect,disabled:!this.state.selectedDevice},this.context.t("continue"))}renderUnsupportedBrowser(){return o.default.createElement("div",{className:"new-external-account-form unsupported-browser"},o.default.createElement("div",{className:"hw-connect"},o.default.createElement("h3",{className:"hw-connect__title"},this.context.t("browserNotSupported")),o.default.createElement("p",{className:"hw-connect__msg"},this.context.t("chromeRequiredForHardwareWallets"))),o.default.createElement(s.default,{type:"primary",large:!0,onClick:()=>global.platform.openTab({url:"https://google.com/chrome"})},this.context.t("downloadGoogleChrome")))}renderHeader(){return o.default.createElement("div",{className:"hw-connect__header"},o.default.createElement("h3",{className:"hw-connect__header__title"},this.context.t("hardwareWallets")),o.default.createElement("p",{className:"hw-connect__header__msg"},this.context.t("hardwareWalletsMsg")))}renderTutorialsteps(){switch(this.state.selectedDevice){case d.DEVICE_NAMES.LEDGER:return this.renderLedgerTutorialSteps();case d.DEVICE_NAMES.TREZOR:return this.renderTrezorTutorialSteps();case d.DEVICE_NAMES.LATTICE:return this.renderLatticeTutorialSteps();case d.DEVICE_NAMES.QR:return this.renderQRHardwareWalletSteps();default:return""}}renderLedgerTutorialSteps(){const e=[];return this.props.ledgerTransportType===d.LEDGER_TRANSPORT_TYPES.LIVE&&e.push({title:this.context.t("step1LedgerWallet"),message:this.context.t("step1LedgerWalletMsg",[o.default.createElement("a",{className:"hw-connect__msg-link",href:"https://www.ledger.com/ledger-live",rel:"noopener noreferrer",target:"_blank",key:"ledger-live-app-link"},this.context.t("ledgerLiveApp"))])}),e.push({asset:"plug-in-wallet",dimensions:{width:"225px",height:"75px"},title:this.context.t("step2LedgerWallet"),message:this.context.t("step2LedgerWalletMsg",[o.default.createElement("a",{className:"hw-connect__msg-link",href:p.default.HARDWARE_CONNECTION,rel:"noopener noreferrer",target:"_blank",key:"ledger-support-link"},this.context.t("hardwareWalletSupportLinkConversion"))])}),o.default.createElement("div",{className:"hw-tutorial"},e.map(((e,t)=>o.default.createElement("div",{className:"hw-connect",key:t},o.default.createElement("h3",{className:"hw-connect__title"},e.title),o.default.createElement("p",{className:"hw-connect__msg"},e.message),e.asset&&o.default.createElement("img",h({className:"hw-connect__step-asset",src:`images/${e.asset}.svg`},e.dimensions,{alt:""}))))))}renderLatticeTutorialSteps(){const e=[{asset:"connect-lattice",dimensions:{width:"225px",height:"75px"},title:this.context.t("step1LatticeWallet"),message:this.context.t("step1LatticeWalletMsg",[o.default.createElement("a",{className:"hw-connect__msg-link",href:p.default.HARDWARE_CONNECTION,rel:"noopener noreferrer",target:"_blank",key:"lattice-setup-link"},this.context.t("hardwareWalletSupportLinkConversion"))])}];return o.default.createElement("div",{className:"hw-tutorial"},e.map(((e,t)=>o.default.createElement("div",{className:"hw-connect",key:t},o.default.createElement("h3",{className:"hw-connect__title"},e.title),o.default.createElement("p",{className:"hw-connect__msg"},e.message),e.asset&&o.default.createElement("img",h({className:"hw-connect__step-asset",src:`images/${e.asset}.svg`},e.dimensions,{alt:""}))))))}renderTrezorTutorialSteps(){const e=[{asset:"plug-in-wallet",dimensions:{width:"225px",height:"75px"},title:this.context.t("step1TrezorWallet"),message:this.context.t("step1TrezorWalletMsg",[o.default.createElement("a",{className:"hw-connect__msg-link",href:p.default.HARDWARE_CONNECTION,rel:"noopener noreferrer",target:"_blank",key:"trezor-support-link"},this.context.t("hardwareWalletSupportLinkConversion"))])}];return o.default.createElement("div",{className:"hw-tutorial"},e.map(((e,t)=>o.default.createElement("div",{className:"hw-connect",key:t},o.default.createElement("h3",{className:"hw-connect__title"},e.title),o.default.createElement("p",{className:"hw-connect__msg"},e.message),e.asset&&o.default.createElement("img",h({className:"hw-connect__step-asset",src:`images/${e.asset}.svg`},e.dimensions,{alt:""}))))))}renderQRHardwareWalletSteps(){const e=[];return e.push({title:this.context.t("QRHardwareWalletSteps1Title"),message:this.context.t("QRHardwareWalletSteps1Description")},{message:o.default.createElement(o.default.Fragment,null,o.default.createElement("a",{className:"hw-connect__msg-link",href:"https://keyst.one",rel:"noopener noreferrer",target:"_blank",key:"keystone-support-link"},this.context.t("keystone")),o.default.createElement("a",{className:"hw-connect__msg-link",href:"https://keyst.one/mm",rel:"noopener noreferrer",target:"_blank",key:"keystone-tutorial-link"},this.context.t("keystoneTutorial")))},{message:o.default.createElement(o.default.Fragment,null,o.default.createElement("a",{className:"hw-connect__msg-link",href:"https://airgap.it/metamask",rel:"noopener noreferrer",target:"_blank",key:"airgap-vault-support-link"},this.context.t("airgapVault")),o.default.createElement("a",{className:"hw-connect__msg-link",href:"https://support.airgap.it/guides/metamask",rel:"noopener noreferrer",target:"_blank",key:"airgap-vault-tutorial-link"},this.context.t("airgapVaultTutorial")))},{message:this.context.t("QRHardwareWalletSteps2Description")},{asset:"qrcode-wallet-demo",dimensions:{width:"225px",height:"75px"}}),o.default.createElement("div",{className:"hw-tutorial"},e.map(((e,t)=>o.default.createElement("div",{className:"hw-connect",key:t},e.title&&o.default.createElement("h3",{className:"hw-connect__title"},e.title),o.default.createElement("p",{className:"hw-connect__msg"},e.message),e.asset&&o.default.createElement("img",h({className:"hw-connect__step-asset",src:`images/${e.asset}.svg`},e.dimensions,{alt:""}))))))}renderConnectScreen(){return o.default.createElement("div",{className:"new-external-account-form"},this.renderHeader(),this.renderButtons(),this.state.selectedDevice?this.renderTutorialsteps():null,this.renderContinueButton())}render(){return this.props.browserSupported?this.renderConnectScreen():this.renderUnsupportedBrowser()}}n.default=E,g(E,"contextTypes",{t:r.default.func}),g(E,"propTypes",{connectToHardwareWallet:r.default.func.isRequired,browserSupported:r.default.bool.isRequired,ledgerTransportType:r.default.oneOf(Object.values(d.LEDGER_TRANSPORT_TYPES))})}}},{package:"$root$"}],[8011,{"../../helpers/constants/routes":7872,"./connect-hardware":8009,"./import-account":8012,"./new-account.container":8017,react:6817,"react-router-dom":6795},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=e("react-router-dom"),o=e("../../helpers/constants/routes"),s=l(e("./new-account.container")),c=l(e("./import-account")),i=l(e("./connect-hardware"));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}class d extends a.Component{render(){return a.default.createElement("div",{className:"new-account"},a.default.createElement("div",{className:"new-account__form"},a.default.createElement(r.Switch,null,a.default.createElement(r.Route,{exact:!0,path:o.NEW_ACCOUNT_ROUTE,component:s.default}),a.default.createElement(r.Route,{exact:!0,path:o.IMPORT_ACCOUNT_ROUTE,component:c.default}),a.default.createElement(r.Route,{exact:!0,path:o.CONNECT_HARDWARE_ROUTE,component:i.default}))))}}n.default=d}}},{package:"$root$"}],[8012,{"../../../components/ui/dropdown":7708,"../../../helpers/constants/zendesk-url":7875,"./json":8013,"./private-key":8014,"prop-types":5840,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=l(e("prop-types")),o=l(e("../../../components/ui/dropdown")),s=l(e("../../../helpers/constants/zendesk-url")),c=l(e("./json")),i=l(e("./private-key"));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class p extends a.Component{constructor(...e){super(...e),d(this,"state",{})}getMenuItemTexts(){return[this.context.t("privateKey"),this.context.t("jsonFile")]}renderImportView(){const{type:e}=this.state,t=this.getMenuItemTexts();switch(e||t[0]){case this.context.t("privateKey"):return a.default.createElement(i.default,null);case this.context.t("jsonFile"):default:return a.default.createElement(c.default,null)}}render(){const e=this.getMenuItemTexts(),{type:t}=this.state,{t:n}=this.context;return a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{className:"page-container__header"},a.default.createElement("div",{className:"page-container__title"},n("importAccount")),a.default.createElement("div",{className:"page-container__subtitle"},n("importAccountMsg"),a.default.createElement("span",{className:"new-account-info-link",onClick:()=>{global.platform.openTab({url:s.default.IMPORTED_ACCOUNTS})}},n("here")))),a.default.createElement("div",{className:"new-account-import-form"},a.default.createElement("div",{className:"new-account-import-form__select-section"},a.default.createElement("div",{className:"new-account-import-form__select-label"},n("selectType")),a.default.createElement(o.default,{className:"new-account-import-form__select",options:e.map((e=>({value:e}))),selectedOption:t||e[0],onChange:e=>{this.setState({type:e})}})),this.renderImportView()))}}n.default=p,d(p,"contextTypes",{t:r.default.func})}}},{package:"$root$"}],[8013,{"../../../../shared/constants/metametrics":7321,"../../../components/ui/button":7686,"../../../ducks/history/history":7856,"../../../helpers/constants/zendesk-url":7875,"../../../selectors":8267,"../../../store/actions":8273,"prop-types":5840,react:6817,"react-redux":6775,"react-router-dom":6795,"react-simple-file-input":6805,redux:6852},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=E(e("react")),r=h(e("prop-types")),o=e("react-router-dom"),s=e("redux"),c=e("react-redux"),i=h(e("react-simple-file-input")),l=E(e("../../../store/actions")),u=e("../../../selectors"),d=h(e("../../../components/ui/button")),p=e("../../../../shared/constants/metametrics"),f=e("../../../ducks/history/history"),m=h(e("../../../helpers/constants/zendesk-url"));function h(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function E(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class y extends a.Component{constructor(...e){super(...e),_(this,"state",{fileContents:"",maybeElectrumWallet:!1,isEmpty:!0}),_(this,"inputRef",a.default.createRef())}render(){const{error:e,history:t,mostRecentOverviewPage:n}=this.props,r=this.state.maybeElectrumWallet||!this.state.isEmpty&&""!==this.state.fileContents;return a.default.createElement("div",{className:"new-account-import-form__json"},a.default.createElement("p",null,this.context.t("usedByClients")),a.default.createElement("a",{className:"new-account-import-form__help-link",href:m.default.IMPORTED_ACCOUNTS,target:"_blank",rel:"noopener noreferrer"},this.context.t("fileImportFail")),a.default.createElement(i.default,{readAs:"text",onLoad:this.onLoad.bind(this),style:{padding:"20px 0px 12px 15%",fontSize:"15px",display:"flex",justifyContent:"center",width:"100%"}}),this.state.maybeElectrumWallet?a.default.createElement(a.default.Fragment,null):a.default.createElement("input",{className:"new-account-import-form__input-password",type:"password",placeholder:this.context.t("enterPassword"),id:"json-password-box",onKeyPress:this.createKeyringOnEnter.bind(this),onChange:()=>this.checkInputEmpty(),ref:this.inputRef}),a.default.createElement("div",{className:"new-account-create-form__buttons"},a.default.createElement(d.default,{type:"secondary",large:!0,className:"new-account-create-form__button",onClick:()=>t.push(n)},this.context.t("cancel")),a.default.createElement(d.default,{type:"primary",large:!0,className:"new-account-create-form__button",onClick:()=>this.createNewKeychain(),disabled:!r},this.context.t("import"))),e?a.default.createElement("span",{className:"error"},e):null)}onLoad(e){let t=!1;try{JSON.parse(e.target.result).address||(t=!0)}catch(e){}this.setState({fileContents:e.target.result,maybeElectrumWallet:t})}createKeyringOnEnter(e){"Enter"===e.key&&(e.preventDefault(),this.createNewKeychain())}createNewKeychain(){var e;const{firstAddress:t,displayWarning:n,history:a,importNewJsonAccount:r,mostRecentOverviewPage:o,setSelectedAddress:s}=this.props,{fileContents:c}=this.state,{t:i}=this.context;if(!c){const e=i("needImportFile");return void n(e)}r([c,(null===(e=this.inputRef.current)||void 0===e?void 0:e.value)||""]).then((({selectedAddress:e})=>{e?(a.push(o),this.context.trackEvent({category:p.EVENT.CATEGORIES.ACCOUNTS,event:p.EVENT_NAMES.ACCOUNT_ADDED,properties:{account_type:p.EVENT.ACCOUNT_TYPES.IMPORTED,account_import_type:p.EVENT.ACCOUNT_IMPORT_TYPES.JSON}}),n(null)):(n(i("importAccountError")),this.context.trackEvent({category:p.EVENT.CATEGORIES.ACCOUNTS,event:p.EVENT_NAMES.ACCOUNT_ADD_FAILED,properties:{account_type:p.EVENT.ACCOUNT_TYPES.IMPORTED,account_import_type:p.EVENT.ACCOUNT_IMPORT_TYPES.JSON}}),s(t))})).catch((e=>e&&n(e.message||e)))}checkInputEmpty(){let e=!0;""!==this.inputRef.current.value&&(e=!1),this.setState({isEmpty:e})}}y.propTypes={error:r.default.string,displayWarning:r.default.func,firstAddress:r.default.string,importNewJsonAccount:r.default.func,history:r.default.object,setSelectedAddress:r.default.func,mostRecentOverviewPage:r.default.string.isRequired};y.contextTypes={t:r.default.func,trackEvent:r.default.func};var v=(0,s.compose)(o.withRouter,(0,c.connect)((e=>({error:e.appState.warning,firstAddress:Object.keys((0,u.getMetaMaskAccounts)(e))[0],mostRecentOverviewPage:(0,f.getMostRecentOverviewPage)(e)})),(e=>({displayWarning:t=>e(l.displayWarning(t)),importNewJsonAccount:t=>e(l.importNewAccount("JSON File",t)),setSelectedAddress:t=>e(l.setSelectedAddress(t))}))))(y);n.default=v}}},{package:"$root$"}],[8014,{"../../../../shared/constants/metametrics":7321,"../../../components/ui/button":7686,"../../../ducks/history/history":7856,"../../../selectors":8267,"../../../store/actions":8273,"prop-types":5840,react:6817,"react-redux":6775,"react-router-dom":6795,redux:6852},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=h(e("react")),r=e("react-router-dom"),o=e("redux"),s=f(e("prop-types")),c=e("react-redux"),i=h(e("../../../store/actions")),l=e("../../../selectors"),u=f(e("../../../components/ui/button")),d=e("../../../ducks/history/history"),p=e("../../../../shared/constants/metametrics");function f(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class E extends a.Component{constructor(...e){super(...e),g(this,"inputRef",a.default.createRef()),g(this,"state",{isEmpty:!0}),g(this,"createKeyringOnEnter",(e=>{"Enter"===e.key&&(e.preventDefault(),this.createNewKeychain())}))}createNewKeychain(){const e=this.inputRef.current.value,{importNewAccount:t,history:n,displayWarning:a,mostRecentOverviewPage:r,setSelectedAddress:o,firstAddress:s}=this.props,{t:c}=this.context;t("Private Key",[e]).then((({selectedAddress:e})=>{e?(this.context.trackEvent({category:p.EVENT.CATEGORIES.ACCOUNTS,event:p.EVENT_NAMES.ACCOUNT_ADDED,properties:{account_type:p.EVENT.ACCOUNT_TYPES.IMPORTED,account_import_type:p.EVENT.ACCOUNT_IMPORT_TYPES.PRIVATE_KEY}}),n.push(r),a(null)):(a(c("importAccountError")),this.context.trackEvent({category:p.EVENT.CATEGORIES.ACCOUNTS,event:p.EVENT_NAMES.ACCOUNT_ADD_FAILED,properties:{account_type:p.EVENT.ACCOUNT_TYPES.IMPORTED,account_import_type:p.EVENT.ACCOUNT_IMPORT_TYPES.PRIVATE_KEY}}),o(s))})).catch((e=>e&&a(e.message||e)))}checkInputEmpty(){let e=!0;""!==this.inputRef.current.value&&(e=!1),this.setState({isEmpty:e})}render(){const{error:e,displayWarning:t}=this.props;return a.default.createElement("div",{className:"new-account-import-form__private-key"},a.default.createElement("span",{className:"new-account-import-form__instruction"},this.context.t("pastePrivateKey")),a.default.createElement("div",{className:"new-account-import-form__private-key-password-container"},a.default.createElement("input",{className:"new-account-import-form__input-password",type:"password",id:"private-key-box",onKeyPress:e=>this.createKeyringOnEnter(e),onChange:()=>this.checkInputEmpty(),ref:this.inputRef,autoFocus:!0})),a.default.createElement("div",{className:"new-account-import-form__buttons"},a.default.createElement(u.default,{type:"secondary",large:!0,className:"new-account-create-form__button",onClick:()=>{const{history:e,mostRecentOverviewPage:n}=this.props;t(null),e.push(n)}},this.context.t("cancel")),a.default.createElement(u.default,{type:"primary",large:!0,className:"new-account-create-form__button",onClick:()=>this.createNewKeychain(),disabled:this.state.isEmpty},this.context.t("import"))),e?a.default.createElement("span",{className:"error"},e):null)}}g(E,"contextTypes",{t:s.default.func,trackEvent:s.default.func}),g(E,"propTypes",{importNewAccount:s.default.func.isRequired,history:s.default.object.isRequired,displayWarning:s.default.func.isRequired,setSelectedAddress:s.default.func.isRequired,firstAddress:s.default.string.isRequired,error:s.default.node,mostRecentOverviewPage:s.default.string.isRequired});var _=(0,o.compose)(r.withRouter,(0,c.connect)((function(e){return{error:e.appState.warning,firstAddress:Object.keys((0,l.getMetaMaskAccounts)(e))[0],mostRecentOverviewPage:(0,d.getMostRecentOverviewPage)(e)}}),(function(e){return{importNewAccount:(t,[n])=>e(i.importNewAccount(t,[n])),displayWarning:t=>e(i.displayWarning(t||null)),setSelectedAddress:t=>e(i.setSelectedAddress(t))}})))(E);n.default=_}}},{package:"$root$"}],[8015,{"./create-account.component":8011},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./create-account.component"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[8016,{"../../../shared/constants/metametrics":7321,"../../components/ui/button":7686,classnames:2484,"prop-types":5840,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=i(e("prop-types")),o=i(e("classnames")),s=i(e("../../components/ui/button")),c=e("../../../shared/constants/metametrics");function i(e){return e&&e.__esModule?e:{default:e}}function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class d extends a.Component{constructor(...e){super(...e),u(this,"state",{newAccountName:"",defaultAccountName:this.context.t("newAccountNumberName",[this.props.newAccountNumber])})}render(){const{newAccountName:e,defaultAccountName:t}=this.state,{history:n,createAccount:r,mostRecentOverviewPage:i,accounts:l}=this.props,u=(d=e,l.map((e=>e.name)).includes(d));var d;return a.default.createElement("div",{className:"new-account-create-form"},a.default.createElement("div",{className:"new-account-create-form__input-label"},this.context.t("accountName")),a.default.createElement("div",null,a.default.createElement("input",{className:(0,o.default)("new-account-create-form__input",{"new-account-create-form__input__error":u}),value:e,placeholder:t,onChange:e=>this.setState({newAccountName:e.target.value}),autoFocus:!0}),u?a.default.createElement("div",{className:(0,o.default)(" new-account-create-form__error"," new-account-create-form__error-amount")},this.context.t("accountNameDuplicate")):null,a.default.createElement("div",{className:"new-account-create-form__buttons"},a.default.createElement(s.default,{type:"secondary",large:!0,className:"new-account-create-form__button",onClick:()=>n.push(i)},this.context.t("cancel")),a.default.createElement(s.default,{type:"primary",large:!0,className:"new-account-create-form__button",onClick:a=>{r(e||t).then((()=>{this.context.trackEvent({category:c.EVENT.CATEGORIES.ACCOUNTS,event:c.EVENT_NAMES.ACCOUNT_ADDED,properties:{account_type:c.EVENT.ACCOUNT_TYPES.DEFAULT}}),n.push(i)})).catch((e=>{this.context.trackEvent({category:c.EVENT.CATEGORIES.ACCOUNTS,event:c.EVENT_NAMES.ACCOUNT_ADD_FAILED,properties:{account_type:c.EVENT.ACCOUNT_TYPES.DEFAULT,error:e.message}})}))},disabled:u},this.context.t("create")))))}}n.default=d,u(d,"defaultProps",{newAccountNumber:0}),d.propTypes={createAccount:r.default.func,newAccountNumber:r.default.number,history:r.default.object,mostRecentOverviewPage:r.default.string.isRequired,accounts:r.default.array},d.contextTypes={t:r.default.func,trackEvent:r.default.func}}}},{package:"$root$"}],[8017,{"../../ducks/history/history":7856,"../../selectors":8267,"../../store/actions":8273,"./new-account.component":8016,"react-redux":6775},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=e("react-redux"),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("../../store/actions")),s=e("../../ducks/history/history"),c=e("../../selectors"),i=(a=e("./new-account.component"))&&a.__esModule?a:{default:a};function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}var u=(0,r.connect)((e=>{const{metamask:{identities:t={}}}=e;return{newAccountNumber:Object.keys(t).length+1,mostRecentOverviewPage:(0,s.getMostRecentOverviewPage)(e),accounts:(0,c.getMetaMaskAccountsOrdered)(e)}}),(e=>({createAccount:t=>e(o.addNewAccount()).then((n=>{t&&e(o.setAccountLabel(n,t))}))})))(i.default);n.default=u}}},{package:"$root$"}],[8018,{"../../../app/scripts/lib/util":88,"../../../shared/constants/app":7316,"../../../shared/constants/metametrics":7321,"../../helpers/constants/common":7865,"prop-types":5840,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),o=(a=e("prop-types"))&&a.__esModule?a:{default:a},s=e("../../../app/scripts/lib/util"),c=e("../../../shared/constants/app"),i=e("../../helpers/constants/common"),l=e("../../../shared/constants/metametrics");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class p extends r.PureComponent{renderErrorDetail(e){return r.default.createElement("li",null,r.default.createElement("p",null,e))}renderErrorStack(e,t){return r.default.createElement("li",null,r.default.createElement("span",null,e),r.default.createElement("pre",{className:"error-page__stack"},t))}render(){const{error:e}=this.props,{t:t}=this.context,n=(0,s.getEnvironmentType)()===c.ENVIRONMENT_TYPE_POPUP,a=r.default.createElement("a",{target:"_blank",key:"metamaskSupportLink",rel:"noopener noreferrer",href:i.SUPPORT_REQUEST_LINK,onClick:()=>{this.context.trackEvent({category:l.EVENT.CATEGORIES.ERROR,event:l.EVENT_NAMES.SUPPORT_LINK_CLICKED,properties:{url:i.SUPPORT_REQUEST_LINK}},{contextPropsIntoEventProperties:[l.CONTEXT_PROPS.PAGE_TITLE]})}},r.default.createElement("span",{className:"error-page__link-text"},this.context.t("here"))),o=t(n?"errorPagePopupMessage":"errorPageMessage",[a]);return r.default.createElement("section",{className:"error-page"},r.default.createElement("h1",{className:"error-page__header"},t("errorPageTitle")),r.default.createElement("h2",{className:"error-page__subheader"},o),r.default.createElement("section",{className:"error-page__details"},r.default.createElement("details",null,r.default.createElement("summary",null,t("errorDetails")),r.default.createElement("ul",null,e.message?this.renderErrorDetail(t("errorMessage",[e.message])):null,e.code?this.renderErrorDetail(t("errorCode",[e.code])):null,e.name?this.renderErrorDetail(t("errorName",[e.name])):null,e.stack?this.renderErrorStack(t("errorStack"),e.stack):null))))}}d(p,"contextTypes",{t:o.default.func.isRequired,trackEvent:o.default.func}),d(p,"propTypes",{error:o.default.object.isRequired});var f=p;n.default=f}}},{package:"$root$"}],[8019,{"./error.component":8018},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./error.component"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[8020,{"../../../components/ui/metafox-logo":7785,"../../../helpers/constants/routes":7872,"./import-with-seed-phrase":8024,"./new-account":8026,"prop-types":5840,react:6817,"react-router-dom":6795},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r,o,s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),c=f(e("prop-types")),i=e("react-router-dom"),l=f(e("../../../components/ui/metafox-logo")),u=e("../../../helpers/constants/routes"),d=f(e("./new-account")),p=f(e("./import-with-seed-phrase"));function f(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},h.apply(this,arguments)}class g extends s.PureComponent{componentDidMount(){const{isInitialized:e,history:t}=this.props;e&&t.push(u.INITIALIZE_SEED_PHRASE_INTRO_ROUTE)}render(){const{onCreateNewAccount:e,onCreateNewAccountFromSeed:t}=this.props;return s.default.createElement("div",{className:"first-time-flow__wrapper"},s.default.createElement(l.default,null),s.default.createElement(i.Switch,null,s.default.createElement(i.Route,{exact:!0,path:u.INITIALIZE_IMPORT_WITH_SEED_PHRASE_ROUTE,render:e=>s.default.createElement(p.default,h({},e,{onSubmit:t}))}),s.default.createElement(i.Route,{exact:!0,path:u.INITIALIZE_CREATE_PASSWORD_ROUTE,render:t=>s.default.createElement(d.default,h({},t,{onSubmit:e}))})))}}n.default=g,a=g,r="propTypes",o={history:c.default.object,isInitialized:c.default.bool,onCreateNewAccount:c.default.func,onCreateNewAccountFromSeed:c.default.func},r in a?Object.defineProperty(a,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):a[r]=o}}},{package:"$root$"}],[8021,{"./create-password.component":8020,"react-redux":6775},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=e("react-redux"),o=(a=e("./create-password.component"))&&a.__esModule?a:{default:a};var s=(0,r.connect)((e=>{const{metamask:{isInitialized:t}}=e;return{isInitialized:t}}))(o.default);n.default=s}}},{package:"$root$"}],[8022,{"../../../../../shared/constants/metametrics":7321,"../../../../components/app/create-new-vault":7436,"../../../../helpers/constants/routes":7872,"prop-types":5840,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=i(e("prop-types")),o=e("../../../../helpers/constants/routes"),s=i(e("../../../../components/app/create-new-vault")),c=e("../../../../../shared/constants/metametrics");function i(e){return e&&e.__esModule?e:{default:e}}function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class d extends a.PureComponent{constructor(...e){super(...e),u(this,"handleImport",(async(e,t)=>{const{history:n,onSubmit:a,setSeedPhraseBackedUp:r,initializeThreeBox:s}=this.props;await a(e,t),this.context.trackEvent({category:c.EVENT.CATEGORIES.ONBOARDING,event:c.EVENT_NAMES.WALLET_CREATED,properties:{account_type:c.EVENT.ACCOUNT_TYPES.IMPORTED,account_import_type:c.EVENT.ACCOUNT_IMPORT_TYPES.SRP}}),await r(!0),s(),n.replace(o.INITIALIZE_END_OF_FLOW_ROUTE)}))}UNSAFE_componentWillMount(){this._onBeforeUnload=()=>this.context.trackEvent({category:c.EVENT.CATEGORIES.ONBOARDING,event:c.EVENT_NAMES.WALLET_SETUP_FAILED,properties:{account_type:c.EVENT.ACCOUNT_TYPES.IMPORTED,account_import_type:c.EVENT.ACCOUNT_IMPORT_TYPES.SRP,reason:"Seed Phrase Error",error:this.state.seedPhraseError}}),window.addEventListener("beforeunload",this._onBeforeUnload)}componentWillUnmount(){window.removeEventListener("beforeunload",this._onBeforeUnload)}render(){const{t:e}=this.context;return a.default.createElement("div",{className:"first-time-flow__import"},a.default.createElement("div",{className:"first-time-flow__create-back"},a.default.createElement("div",{className:"first-time-flow__create-back-wrapper"},a.default.createElement("a",{onClick:e=>{e.preventDefault(),this.context.trackEvent({category:c.EVENT.CATEGORIES.ONBOARDING,event:c.EVENT_NAMES.WALLET_SETUP_CANCELED,properties:{account_type:c.EVENT.ACCOUNT_TYPES.IMPORTED,account_import_type:c.EVENT.ACCOUNT_IMPORT_TYPES.SRP,text:"Back"}}),this.props.history.push(o.INITIALIZE_SELECT_ACTION_ROUTE)},href:"#"},`< ${e("back")}`),e("importAccountSeedPhrase"))),a.default.createElement("div",{className:"first-time-flow__form-content"},a.default.createElement("div",{className:"first-time-flow__text-block"},e("secretPhrase")),a.default.createElement(s.default,{includeTerms:!0,onSubmit:this.handleImport,submitText:e("import")})))}}n.default=d,u(d,"contextTypes",{t:r.default.func,trackEvent:r.default.func}),u(d,"propTypes",{history:r.default.object,onSubmit:r.default.func.isRequired,setSeedPhraseBackedUp:r.default.func,initializeThreeBox:r.default.func})}}},{package:"$root$"}],[8023,{"../../../../store/actions":8273,"./import-with-seed-phrase.component":8022,"react-redux":6775},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=e("react-redux"),o=e("../../../../store/actions"),s=(a=e("./import-with-seed-phrase.component"))&&a.__esModule?a:{default:a};var c=(0,r.connect)(null,(e=>({setSeedPhraseBackedUp:t=>e((0,o.setSeedPhraseBackedUp)(t)),initializeThreeBox:()=>e((0,o.initializeThreeBox)())})))(s.default);n.default=c}}},{package:"$root$"}],[8024,{"./import-with-seed-phrase.container":8023},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./import-with-seed-phrase.container"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[8025,{"./create-password.container":8021},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./create-password.container"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[8026,{"./new-account.component":8027},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./new-account.component"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[8027,{"../../../../../shared/constants/metametrics":7321,"../../../../components/ui/button":7686,"../../../../components/ui/text-field":7822,"../../../../helpers/constants/routes":7872,"prop-types":5840,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=l(e("prop-types")),o=l(e("../../../../components/ui/button")),s=e("../../../../helpers/constants/routes"),c=l(e("../../../../components/ui/text-field")),i=e("../../../../../shared/constants/metametrics");function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class p extends a.PureComponent{constructor(...e){super(...e),d(this,"state",{password:"",confirmPassword:"",passwordError:"",confirmPasswordError:"",termsChecked:!1}),d(this,"handleCreate",(async e=>{if(e.preventDefault(),!this.isValid())return;const{password:t}=this.state,{onSubmit:n,history:a}=this.props;try{await n(t),this.context.trackEvent({category:i.EVENT.CATEGORIES.ONBOARDING,event:i.EVENT_NAMES.ACCOUNT_PASSWORD_CREATED,properties:{}}),a.push(s.INITIALIZE_SEED_PHRASE_INTRO_ROUTE)}catch(e){this.setState({passwordError:e.message})}})),d(this,"toggleTermsCheck",(()=>{this.setState((e=>({termsChecked:!e.termsChecked})))})),d(this,"onTermsKeyPress",(({key:e})=>{" "!==e&&"Enter"!==e||this.toggleTermsCheck()}))}isValid(){const{password:e,confirmPassword:t,passwordError:n,confirmPasswordError:a}=this.state;return!(!e||!t||e!==t)&&(!(e.length<8)&&(!n&&!a))}handlePasswordChange(e){const{t:t}=this.context;this.setState((n=>{const{confirmPassword:a}=n;let r="",o="";return e&&e.length<8&&(r=t("passwordNotLongEnough")),a&&e!==a&&(o=t("passwordsDontMatch")),{password:e,passwordError:r,confirmPasswordError:o}}))}handleConfirmPasswordChange(e){const{t:t}=this.context;this.setState((n=>{const{password:a}=n;let r="";return a!==e&&(r=t("passwordsDontMatch")),{confirmPassword:e,confirmPasswordError:r}}))}render(){const{t:e}=this.context,{password:t,confirmPassword:n,passwordError:r,confirmPasswordError:i,termsChecked:l}=this.state;return a.default.createElement("form",{className:"first-time-flow__form",onSubmit:this.handleCreate},a.default.createElement("div",{className:"first-time-flow__create-back"},a.default.createElement("div",{className:"first-time-flow__create-back-wrapper"},a.default.createElement("a",{"data-testid":"onboarding-back-button",onClick:e=>{e.preventDefault(),this.props.history.push(s.INITIALIZE_SELECT_ACTION_ROUTE)},href:"#"},`< ${e("back")}`),e("createPassword"))),a.default.createElement("div",{className:"first-time-flow__form-content"},a.default.createElement(c.default,{"data-testid":"create-password",id:"create-password",label:e("newPassword"),type:"password",className:"first-time-flow__input",value:t,onChange:e=>this.handlePasswordChange(e.target.value),error:r,autoFocus:!0,autoComplete:"new-password",margin:"normal",fullWidth:!0,largeLabel:!0}),a.default.createElement(c.default,{"data-testid":"confirm-password",id:"confirm-password",label:e("confirmPassword"),type:"password",className:"first-time-flow__input",value:n,onChange:e=>this.handleConfirmPasswordChange(e.target.value),error:i,autoComplete:"confirm-password",margin:"normal",fullWidth:!0,largeLabel:!0}),!1,a.default.createElement(o.default,{type:"primary",className:"first-time-flow__button",disabled:!this.isValid(),onClick:this.handleCreate,rounded:!1},e("create"))))}}n.default=p,d(p,"contextTypes",{trackEvent:r.default.func,t:r.default.func}),d(p,"propTypes",{onSubmit:r.default.func.isRequired,history:r.default.object.isRequired})}}},{package:"$root$"}],[8028,{"../../../../shared/constants/metametrics":7321,"../../../components/ui/button":7686,"../../../components/ui/metafox-logo":7785,"../../../components/ui/snackbar":7814,"../../../helpers/constants/common":7865,"../../../helpers/constants/routes":7872,"../../../helpers/constants/zendesk-url":7875,"../onboarding-initiator-util":8040,"prop-types":5840,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=f(e("prop-types")),o=f(e("../../../components/ui/button")),s=f(e("../../../components/ui/snackbar")),c=f(e("../../../components/ui/metafox-logo")),i=e("../../../helpers/constants/common"),l=e("../../../helpers/constants/routes"),u=e("../onboarding-initiator-util"),d=e("../../../../shared/constants/metametrics"),p=f(e("../../../helpers/constants/zendesk-url"));function f(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class g extends a.PureComponent{constructor(...e){super(...e),h(this,"onComplete",(async()=>{const{history:e,onboardingInitiator:t}=this.props;this._removeBeforeUnload(),await this._onOnboardingComplete(),t&&await(0,u.returnToOnboardingInitiatorTab)(t),e.push(l.DEFAULT_ROUTE)})),h(this,"componentWillUnmount",(()=>{this._removeBeforeUnload()}))}async _beforeUnload(){await this._onOnboardingComplete()}_removeBeforeUnload(){window.removeEventListener("beforeunload",this._beforeUnload)}async _onOnboardingComplete(){const{setCompletedOnboarding:e}=this.props;await e()}async componentDidMount(){window.addEventListener("beforeunload",this._beforeUnload.bind(this)),await this.props.setNativeCurrency()}render(){const{t:e}=this.context,{onboardingInitiator:t}=this.props;return a.default.createElement("div",{className:"end-of-flow","data-testid":"end-of-flow"},a.default.createElement(c.default,null),a.default.createElement("div",{className:"end-of-flow__emoji"},"🎉"),a.default.createElement("div",{className:"first-time-flow__header"},e("congratulations")),a.default.createElement("div",{className:"first-time-flow__text-block end-of-flow__text-1"},e("endOfFlowMessage1")),a.default.createElement("div",{className:"first-time-flow__text-block end-of-flow__text-2"},e("endOfFlowMessage2")),a.default.createElement("div",{className:"end-of-flow__text-3"},`• ${e("endOfFlowMessage3")}`),a.default.createElement("div",{className:"end-of-flow__text-3"},`• ${e("endOfFlowMessage4")}`),a.default.createElement("div",{className:"end-of-flow__text-3"},`• ${e("endOfFlowMessage5")}`),a.default.createElement("div",{className:"end-of-flow__text-3"},`• ${e("endOfFlowMessage6")}`),a.default.createElement("div",{className:"end-of-flow__text-3"},"•"," ",e("endOfFlowMessage7",[a.default.createElement("a",{target:"_blank",key:"metamaskSupportLink",rel:"noopener noreferrer",href:i.SUPPORT_REQUEST_LINK,onClick:()=>{this.context.trackEvent({category:d.EVENT.CATEGORIES.ONBOARDING,event:d.EVENT_NAMES.SUPPORT_LINK_CLICKED,properties:{url:i.SUPPORT_REQUEST_LINK}},{contextPropsIntoEventProperties:[d.CONTEXT_PROPS.PAGE_TITLE]})}},a.default.createElement("span",{className:"first-time-flow__link-text"},this.context.t("here")))])),a.default.createElement("div",{className:"first-time-flow__text-block end-of-flow__text-4"},`*${e("endOfFlowMessage8")}`," ",a.default.createElement("a",{href:p.default.BASIC_SAFETY,target:"_blank",rel:"noopener noreferrer"},a.default.createElement("span",{className:"first-time-flow__link-text"},e("endOfFlowMessage9")))),a.default.createElement(o.default,{type:"primary",className:"first-time-flow__button",onClick:this.onComplete,"data-testid":"EOF-complete-button"},e("endOfFlowMessage10")),t?a.default.createElement(s.default,{content:e("onboardingReturnNotice",[e("endOfFlowMessage10"),t.location])}):null)}}n.default=g,h(g,"contextTypes",{t:r.default.func,trackEvent:r.default.func}),h(g,"propTypes",{history:r.default.object,setCompletedOnboarding:r.default.func,setNativeCurrency:r.default.func,onboardingInitiator:r.default.exact({location:r.default.string,tabId:r.default.number})})}}},{package:"$root$"}],[8029,{"../../../selectors":8267,"../../../store/actions":8273,"./end-of-flow.component":8028,"react-redux":6775},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=e("react-redux"),o=e("../../../selectors"),s=e("../../../store/actions"),c=(a=e("./end-of-flow.component"))&&a.__esModule?a:{default:a};var i=(0,r.connect)((e=>({onboardingInitiator:(0,o.getOnboardingInitiator)(e)})),(e=>({setCompletedOnboarding:()=>e((0,s.setCompletedOnboarding)()),setNativeCurrency:()=>e((0,s.setNativeCurrency)())})))(c.default);n.default=i}}},{package:"$root$"}],[8030,{"./end-of-flow.container":8029},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./end-of-flow.container"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[8031,{"../../../helpers/constants/routes":7872,"prop-types":5840,react:6817,"react-router-dom":6795},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),o=(a=e("prop-types"))&&a.__esModule?a:{default:a},s=e("react-router-dom"),c=e("../../../helpers/constants/routes");function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}class l extends r.PureComponent{render(){const{completedOnboarding:e,isInitialized:t,isUnlocked:n,seedPhraseBackedUp:a}=this.props;if(e)return r.default.createElement(s.Redirect,{to:{pathname:c.DEFAULT_ROUTE}});if(null!==a)return r.default.createElement(s.Redirect,{to:{pathname:c.INITIALIZE_END_OF_FLOW_ROUTE}});if(n)return r.default.createElement(s.Redirect,{to:{pathname:c.LOCK_ROUTE}});if(!t){let e;return e=r.default.createElement(s.Redirect,{to:{pathname:c.INITIALIZE_WELCOME_ROUTE}}),e}return r.default.createElement(s.Redirect,{to:{pathname:c.INITIALIZE_UNLOCK_ROUTE}})}}n.default=l,function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(l,"propTypes",{completedOnboarding:o.default.bool,isInitialized:o.default.bool,isUnlocked:o.default.bool,seedPhraseBackedUp:o.default.bool})}}},{package:"$root$"}],[8032,{"./first-time-flow-switch.component":8031,"react-redux":6775},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=e("react-redux"),o=(a=e("./first-time-flow-switch.component"))&&a.__esModule?a:{default:a};var s=(0,r.connect)((({metamask:e})=>{const{completedOnboarding:t,isInitialized:n,isUnlocked:a,seedPhraseBackedUp:r}=e;return{completedOnboarding:t,isInitialized:n,isUnlocked:a,seedPhraseBackedUp:r}}))(o.default);n.default=s}}},{package:"$root$"}],[8033,{"./first-time-flow-switch.container":8032},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./first-time-flow-switch.container"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[8034,{"../../helpers/constants/routes":7872,"../unlock-page":8261,"./create-password":8025,"./end-of-flow":8030,"./first-time-flow-switch":8033,"./metametrics-opt-in":8037,"./seed-phrase":8045,"./select-action":8052,"./welcome":8056,"prop-types":5840,react:6817,"react-router-dom":6795},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=h(e("prop-types")),o=e("react-router-dom"),s=h(e("../unlock-page")),c=e("../../helpers/constants/routes"),i=h(e("./first-time-flow-switch")),l=h(e("./welcome")),u=h(e("./select-action")),d=h(e("./end-of-flow")),p=h(e("./create-password")),f=h(e("./seed-phrase")),m=h(e("./metametrics-opt-in"));function h(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},E.apply(this,arguments)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class y extends a.PureComponent{constructor(...e){super(...e),_(this,"state",{seedPhrase:""}),_(this,"handleCreateNewAccount",(async e=>{const{createNewAccount:t}=this.props;try{const n=await t(e);this.setState({seedPhrase:n})}catch(e){throw new Error(e.message)}})),_(this,"handleImportWithSeedPhrase",(async(e,t)=>{const{createNewAccountFromSeed:n}=this.props;try{return await n(e,t)}catch(e){throw new Error(e.message)}})),_(this,"handleUnlock",(async e=>{const{unlockAccount:t,history:n,nextRoute:a}=this.props;try{const r=await t(e);this.setState({seedPhrase:r},(()=>{n.push(a)}))}catch(e){throw new Error(e.message)}}))}componentDidMount(){const{completedOnboarding:e,history:t,isInitialized:n,isUnlocked:a,showingSeedPhraseBackupAfterOnboarding:r,seedPhraseBackedUp:o}=this.props;!e||r&&!o?n&&!a&&t.push(c.INITIALIZE_UNLOCK_ROUTE):t.push(c.DEFAULT_ROUTE)}render(){const{seedPhrase:e}=this.state,{verifySeedPhrase:t}=this.props;return a.default.createElement("div",{className:"first-time-flow"},a.default.createElement(o.Switch,null,a.default.createElement(o.Route,{path:c.INITIALIZE_SEED_PHRASE_ROUTE,render:n=>a.default.createElement(f.default,E({},n,{seedPhrase:e,verifySeedPhrase:t}))}),a.default.createElement(o.Route,{path:c.INITIALIZE_BACKUP_SEED_PHRASE_ROUTE,render:n=>a.default.createElement(f.default,E({},n,{seedPhrase:e,verifySeedPhrase:t}))}),a.default.createElement(o.Route,{path:c.INITIALIZE_SEED_PHRASE_INTRO_ROUTE,render:n=>a.default.createElement(f.default,E({},n,{seedPhrase:e,verifySeedPhrase:t}))}),a.default.createElement(o.Route,{path:c.INITIALIZE_CREATE_PASSWORD_ROUTE,render:e=>a.default.createElement(p.default,E({},e,{onCreateNewAccount:this.handleCreateNewAccount,onCreateNewAccountFromSeed:this.handleImportWithSeedPhrase}))}),a.default.createElement(o.Route,{path:c.INITIALIZE_SELECT_ACTION_ROUTE,component:u.default}),a.default.createElement(o.Route,{path:c.INITIALIZE_UNLOCK_ROUTE,render:e=>a.default.createElement(s.default,E({},e,{onSubmit:this.handleUnlock}))}),a.default.createElement(o.Route,{exact:!0,path:c.INITIALIZE_END_OF_FLOW_ROUTE,component:d.default}),a.default.createElement(o.Route,{exact:!0,path:c.INITIALIZE_WELCOME_ROUTE,component:l.default}),a.default.createElement(o.Route,{exact:!0,path:c.INITIALIZE_METAMETRICS_OPT_IN_ROUTE,component:m.default}),a.default.createElement(o.Route,{exact:!0,path:"*",component:i.default})))}}n.default=y,_(y,"propTypes",{completedOnboarding:r.default.bool,createNewAccount:r.default.func,createNewAccountFromSeed:r.default.func,history:r.default.object,isInitialized:r.default.bool,isUnlocked:r.default.bool,unlockAccount:r.default.func,nextRoute:r.default.string,showingSeedPhraseBackupAfterOnboarding:r.default.bool,seedPhraseBackedUp:r.default.bool,verifySeedPhrase:r.default.func})}}},{package:"$root$"}],[8035,{"../../helpers/constants/routes":7872,"../../selectors":8267,"../../store/actions":8273,"./first-time-flow.component":8034,"react-redux":6775},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=e("react-redux"),o=e("../../selectors"),s=e("../../store/actions"),c=e("../../helpers/constants/routes"),i=(a=e("./first-time-flow.component"))&&a.__esModule?a:{default:a};var l=(0,r.connect)(((e,t)=>{const{metamask:{completedOnboarding:n,isInitialized:a,isUnlocked:r,seedPhraseBackedUp:s}}=e,i=Boolean(t.location.pathname.match(c.INITIALIZE_BACKUP_SEED_PHRASE_ROUTE));return{completedOnboarding:n,isInitialized:a,isUnlocked:r,nextRoute:(0,o.getFirstTimeFlowTypeRoute)(e),showingSeedPhraseBackupAfterOnboarding:i,seedPhraseBackedUp:s}}),(e=>({createNewAccount:t=>e((0,s.createNewVaultAndGetSeedPhrase)(t)),createNewAccountFromSeed:(t,n)=>e((0,s.createNewVaultAndRestore)(t,n)),unlockAccount:t=>e((0,s.unlockAndGetSeedPhrase)(t)),verifySeedPhrase:()=>(0,s.verifySeedPhrase)()})))(i.default);n.default=l}}},{package:"$root$"}],[8036,{"./first-time-flow.container":8035},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./first-time-flow.container"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[8037,{"./metametrics-opt-in.container":8039},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./metametrics-opt-in.container"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[8038,{"../../../../shared/constants/metametrics":7321,"../../../components/ui/metafox-logo":7785,"../../../components/ui/page-container/page-container-footer":7793,"../../../helpers/constants/routes":7872,"prop-types":5840,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=l(e("prop-types")),o=l(e("../../../components/ui/metafox-logo")),s=l(e("../../../components/ui/page-container/page-container-footer")),c=e("../../../../shared/constants/metametrics"),i=e("../../../helpers/constants/routes");function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class p extends a.Component{render(){const{trackEvent:e,t:t}=this.context,{history:n,setParticipateInMetaMetrics:r,participateInMetaMetrics:l}=this.props;return a.default.createElement("div",{className:"metametrics-opt-in"},a.default.createElement("div",{className:"metametrics-opt-in__main"},a.default.createElement(o.default,null),a.default.createElement("div",{className:"metametrics-opt-in__body-graphic"},a.default.createElement("img",{src:"images/metrics-chart.svg",alt:""})),a.default.createElement("div",{className:"metametrics-opt-in__title"},t("metametricsHelpImproveMetaMask")),a.default.createElement("div",{className:"metametrics-opt-in__body"},a.default.createElement("div",{className:"metametrics-opt-in__description"},t("metametricsOptInDescription")),a.default.createElement("div",{className:"metametrics-opt-in__description"},t("metametricsCommitmentsIntro")),a.default.createElement("div",{className:"metametrics-opt-in__committments"},a.default.createElement("div",{className:"metametrics-opt-in__row"},a.default.createElement("i",{className:"fa fa-check"}),a.default.createElement("div",{className:"metametrics-opt-in__row-description"},t("metametricsCommitmentsAllowOptOut"))),a.default.createElement("div",{className:"metametrics-opt-in__row"},a.default.createElement("i",{className:"fa fa-check"}),a.default.createElement("div",{className:"metametrics-opt-in__row-description"},t("metametricsCommitmentsSendAnonymizedEvents"))),a.default.createElement("div",{className:"metametrics-opt-in__row metametrics-opt-in__break-row"},a.default.createElement("i",{className:"fa fa-times"}),a.default.createElement("div",{className:"metametrics-opt-in__row-description"},t("metametricsCommitmentsNeverCollectKeysEtc",[a.default.createElement("span",{className:"metametrics-opt-in__bold",key:"neverCollectKeys"},t("metametricsCommitmentsBoldNever"))]))),a.default.createElement("div",{className:"metametrics-opt-in__row"},a.default.createElement("i",{className:"fa fa-times"}),a.default.createElement("div",{className:"metametrics-opt-in__row-description"},t("metametricsCommitmentsNeverCollectIP",[a.default.createElement("span",{className:"metametrics-opt-in__bold",key:"neverCollectIP"},t("metametricsCommitmentsBoldNever"))]))),a.default.createElement("div",{className:"metametrics-opt-in__row"},a.default.createElement("i",{className:"fa fa-times"}),a.default.createElement("div",{className:"metametrics-opt-in__row-description"},t("metametricsCommitmentsNeverSellDataForProfit",[a.default.createElement("span",{className:"metametrics-opt-in__bold",key:"neverSellData"},t("metametricsCommitmentsBoldNever"))]))))),a.default.createElement("div",{className:"metametrics-opt-in__footer"},a.default.createElement(s.default,{onCancel:async()=>{await r(!1),n.push(i.INITIALIZE_SELECT_ACTION_ROUTE)},cancelText:t("noThanks"),hideCancel:!1,onSubmit:async()=>{await r(!0);try{null!==l&&!1!==l||await e({category:c.EVENT.CATEGORIES.ONBOARDING,event:c.EVENT_NAMES.METRICS_OPT_IN,properties:{action:"Metrics Option",legacy_event:!0}},{isOptIn:!0,flushImmediately:!0})}finally{n.push(i.INITIALIZE_SELECT_ACTION_ROUTE)}},submitText:t("affirmAgree"),disabled:!1}),a.default.createElement("div",{className:"metametrics-opt-in__bottom-text"},t("gdprMessage",[a.default.createElement("a",{key:"metametrics-bottom-text-wrapper",href:"https://www.qtum.org/about/privacy",target:"_blank",rel:"noopener noreferrer"},t("gdprMessagePrivacyPolicy"))])))))}}n.default=p,d(p,"propTypes",{history:r.default.object,setParticipateInMetaMetrics:r.default.func,participateInMetaMetrics:r.default.bool}),d(p,"contextTypes",{trackEvent:r.default.func,t:r.default.func})}}},{package:"$root$"}],[8039,{"../../../store/actions":8273,"./metametrics-opt-in.component":8038,"react-redux":6775},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=e("react-redux"),o=e("../../../store/actions"),s=(a=e("./metametrics-opt-in.component"))&&a.__esModule?a:{default:a};const c={create:"Selected Create New Wallet",import:"Selected Import Wallet"};var i=(0,r.connect)((e=>{const{firstTimeFlowType:t,participateInMetaMetrics:n}=e.metamask;return{firstTimeSelectionMetaMetricsName:c[t],participateInMetaMetrics:n}}),(e=>({setParticipateInMetaMetrics:t=>e((0,o.setParticipateInMetaMetrics)(t))})))(s.default);n.default=i}}},{package:"$root$"}],[8040,{loglevel:5597,"webextension-polyfill":7290},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.returnToOnboardingInitiatorTab=void 0;var a=o(e("webextension-polyfill")),r=o(e("loglevel"));function o(e){return e&&e.__esModule?e:{default:e}}n.returnToOnboardingInitiatorTab=async e=>{let t;try{t=await a.default.tabs.update(e.id,{active:!0})}catch(e){r.default.debug(`An error occurred while updating tabs in returnToOnboardingInitiatorTab: ${e.message}`)}t?window.close():(r.default.warn("Setting current tab to onboarding initiator has failed; falling back to redirect"),window.location.assign(e.location))}}}},{package:"$root$"}],[8041,{"../../../../../shared/constants/metametrics":7321,"../../../../../shared/modules/export-utils":7333,"../../../../components/ui/button":7686,"../../../../helpers/constants/routes":7872,"./draggable-seed.component":8043,classnames:2484,"prop-types":5840,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=d(e("prop-types")),o=d(e("classnames")),s=d(e("../../../../components/ui/button")),c=e("../../../../helpers/constants/routes"),i=e("../../../../../shared/constants/metametrics"),l=e("../../../../../shared/modules/export-utils"),u=d(e("./draggable-seed.component"));function d(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const m=Array(12).fill(null);class h extends a.PureComponent{constructor(...e){super(...e),f(this,"state",{selectedSeedIndices:[],sortedSeedWords:[],pendingSeedIndices:[],draggingSeedIndex:-1,hoveringIndex:-1}),f(this,"setDraggingSeedIndex",(e=>this.setState({draggingSeedIndex:e}))),f(this,"setHoveringIndex",(e=>this.setState({hoveringIndex:e}))),f(this,"onDrop",(e=>{const{selectedSeedIndices:t,draggingSeedIndex:n}=this.state,a=g(t,n,e,!0);this.setState({selectedSeedIndices:a,pendingSeedIndices:a,draggingSeedIndex:-1,hoveringIndex:-1})})),f(this,"handleExport",(()=>{(0,l.exportAsFile)("",this.props.seedPhrase,"text/plain")})),f(this,"handleSubmit",(async()=>{const{history:e,setSeedPhraseBackedUp:t,initializeThreeBox:n}=this.props;if(this.isValid())try{t(!0).then((async()=>{this.context.trackEvent({category:i.EVENT.CATEGORIES.ONBOARDING,event:i.EVENT_NAMES.WALLET_CREATED,properties:{account_type:i.EVENT.ACCOUNT_TYPES.DEFAULT,is_backup_skipped:!1}}),n(),e.replace(c.INITIALIZE_END_OF_FLOW_ROUTE)}))}catch(e){console.error(e.message),this.context.trackEvent({category:i.EVENT.CATEGORIES.ONBOARDING,event:i.EVENT_NAMES.WALLET_SETUP_FAILED,properties:{account_type:i.EVENT.ACCOUNT_TYPES.DEFAULT,is_backup_skipped:!1,reason:"Seed Phrase Creation Error",error:e.message}})}})),f(this,"handleSelectSeedWord",(e=>{this.setState({selectedSeedIndices:[...this.state.selectedSeedIndices,e],pendingSeedIndices:[...this.state.pendingSeedIndices,e]})})),f(this,"handleDeselectSeedWord",(e=>{this.setState({selectedSeedIndices:this.state.selectedSeedIndices.filter((t=>e!==t)),pendingSeedIndices:this.state.pendingSeedIndices.filter((t=>e!==t))})}))}componentDidMount(){const{seedPhrase:e=""}=this.props,t=(e.split(" ")||[]).sort();this.setState({sortedSeedWords:t})}isValid(){const{seedPhrase:e}=this.props,{selectedSeedIndices:t,sortedSeedWords:n}=this.state;return e===t.map((e=>n[e])).join(" ")}render(){const{t:e}=this.context,{history:t}=this.props,{selectedSeedIndices:n,sortedSeedWords:r,draggingSeedIndex:i}=this.state;return a.default.createElement("div",{className:"confirm-seed-phrase","data-testid":"confirm-seed-phrase"},a.default.createElement("div",{className:"confirm-seed-phrase__back-button"},a.default.createElement("a",{onClick:e=>{e.preventDefault(),t.push(c.INITIALIZE_SEED_PHRASE_ROUTE)},href:"#"},`< ${e("back")}`)),a.default.createElement("div",{className:"first-time-flow__header"},e("confirmSecretBackupPhrase")),a.default.createElement("div",{className:"first-time-flow__text-block"},e("selectEachPhrase")),a.default.createElement("div",{className:(0,o.default)("confirm-seed-phrase__selected-seed-words",{"confirm-seed-phrase__selected-seed-words--dragging":i>-1})},this.renderPendingSeeds(),this.renderSelectedSeeds()),a.default.createElement("div",{className:"confirm-seed-phrase__sorted-seed-words","data-testid":"seed-phrase-sorted"},r.map(((e,t)=>{const r=n.includes(t);return a.default.createElement(u.default,{key:t,seedIndex:t,index:t,setHoveringIndex:this.setHoveringIndex,onDrop:this.onDrop,className:"confirm-seed-phrase__seed-word--sorted",selected:r,onClick:()=>{r?this.handleDeselectSeedWord(t):this.handleSelectSeedWord(t)},word:e})}))),a.default.createElement(s.default,{type:"primary",className:"first-time-flow__button",onClick:this.handleSubmit,disabled:!this.isValid()},e("confirm")))}renderSelectedSeeds(){const{sortedSeedWords:e,selectedSeedIndices:t,draggingSeedIndex:n}=this.state;return m.map(((r,o)=>{const s=t[o],c=e[s];return a.default.createElement(u.default,{key:`selected-${s}-${o}`,className:"confirm-seed-phrase__selected-seed-words__selected-seed",index:o,seedIndex:s,word:c,draggingSeedIndex:n,setDraggingSeedIndex:this.setDraggingSeedIndex,setHoveringIndex:this.setHoveringIndex,onDrop:this.onDrop,draggable:!0})}))}renderPendingSeeds(){const{pendingSeedIndices:e,sortedSeedWords:t,draggingSeedIndex:n,hoveringIndex:r}=this.state,s=g(e,n,r);return m.map(((e,c)=>{const i=s[c],l=t[i];return a.default.createElement(u.default,{key:`pending-${i}-${c}`,index:c,className:(0,o.default)("confirm-seed-phrase__selected-seed-words__pending-seed",{"confirm-seed-phrase__seed-word--hidden":n===i&&c!==r}),seedIndex:i,word:l,draggingSeedIndex:n,setDraggingSeedIndex:this.setDraggingSeedIndex,setHoveringIndex:this.setHoveringIndex,onDrop:this.onDrop,droppable:Boolean(l)})}))}}function g(e,t,n,a){let r=[...e];return"number"==typeof e[n]&&(r=[...e.slice(0,n),t,...e.slice(n)]),a&&(r=r.filter(((e,a)=>e!==t||a===n))),r}n.default=h,f(h,"contextTypes",{trackEvent:r.default.func,t:r.default.func}),f(h,"defaultProps",{seedPhrase:""}),f(h,"propTypes",{history:r.default.object,seedPhrase:r.default.string,initializeThreeBox:r.default.func,setSeedPhraseBackedUp:r.default.func})}}},{package:"$root$"}],[8042,{"../../../../store/actions":8273,"./confirm-seed-phrase.component":8041,"react-redux":6775},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=e("react-redux"),o=e("../../../../store/actions"),s=(a=e("./confirm-seed-phrase.component"))&&a.__esModule?a:{default:a};var c=(0,r.connect)(null,(e=>({setSeedPhraseBackedUp:t=>e((0,o.setSeedPhraseBackedUp)(t)),initializeThreeBox:()=>e((0,o.initializeThreeBox)())})))(s.default);n.default=c}}},{package:"$root$"}],[8043,{classnames:2484,"prop-types":5840,react:6817,"react-dnd":6712},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=c(e("prop-types")),o=c(e("classnames")),s=e("react-dnd");function c(e){return e&&e.__esModule?e:{default:e}}function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class u extends a.Component{UNSAFE_componentWillReceiveProps(e){const{isOver:t,setHoveringIndex:n}=this.props;t&&!e.isOver&&n(-1)}render(){const{connectDragSource:e,connectDropTarget:t,isDragging:n,index:r,word:s,selected:c,className:i,onClick:l,isOver:u,canDrop:d}=this.props;return t(e(a.default.createElement("div",{key:r,className:(0,o.default)("btn-secondary notranslate confirm-seed-phrase__seed-word",i,{"confirm-seed-phrase__seed-word--selected btn-primary":c,"confirm-seed-phrase__seed-word--dragging":n,"confirm-seed-phrase__seed-word--empty":!s,"confirm-seed-phrase__seed-word--active-drop":!u&&d,"confirm-seed-phrase__seed-word--drop-hover":u&&d}),onClick:l,"data-testid":`draggable-seed-${c?"selected-":""}${s}`},s)))}}l(u,"propTypes",{connectDragSource:r.default.func.isRequired,connectDropTarget:r.default.func.isRequired,isDragging:r.default.bool,isOver:r.default.bool,canDrop:r.default.bool,onClick:r.default.func,setHoveringIndex:r.default.func.isRequired,index:r.default.number,word:r.default.string,className:r.default.string,selected:r.default.bool}),l(u,"defaultProps",{className:"",onClick:undefined});const d="SEEDWORD",p={beginDrag:e=>(setTimeout((()=>e.setDraggingSeedIndex(e.seedIndex)),0),{seedIndex:e.seedIndex,word:e.word}),canDrag:e=>e.draggable,endDrag(e,t){const n=t.getDropResult();n?e.onDrop(n.targetIndex):setTimeout((()=>e.setDraggingSeedIndex(-1)),0)}},f={drop:e=>({targetIndex:e.index}),canDrop:e=>e.droppable,hover(e){e.setHoveringIndex(e.index)}};var m=(0,s.DropTarget)(d,f,((e,t)=>({connectDropTarget:e.dropTarget(),isOver:t.isOver(),canDrop:t.canDrop()})))((0,s.DragSource)(d,p,((e,t)=>({connectDragSource:e.dragSource(),isDragging:t.isDragging()})))(u));n.default=m}}},{package:"$root$"}],[8044,{"./confirm-seed-phrase.container":8042},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./confirm-seed-phrase.container"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[8045,{"./seed-phrase.component":8051},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./seed-phrase.component"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[8046,{"./reveal-seed-phrase.container":8048},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./reveal-seed-phrase.container"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[8047,{"../../../../../shared/constants/metametrics":7321,"../../../../../shared/modules/export-utils":7333,"../../../../components/ui/box":7682,"../../../../components/ui/button":7686,"../../../../components/ui/lock-icon":7768,"../../../../components/ui/snackbar":7814,"../../../../helpers/constants/routes":7872,"../../onboarding-initiator-util":8040,classnames:2484,"prop-types":5840,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=m(e("prop-types")),o=m(e("classnames")),s=m(e("../../../../components/ui/box")),c=m(e("../../../../components/ui/lock-icon")),i=m(e("../../../../components/ui/button")),l=m(e("../../../../components/ui/snackbar")),u=e("../../../../helpers/constants/routes"),d=e("../../../../../shared/constants/metametrics"),p=e("../../onboarding-initiator-util"),f=e("../../../../../shared/modules/export-utils");function m(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class E extends a.PureComponent{constructor(...e){super(...e),g(this,"state",{isShowingSeedPhrase:!1}),g(this,"handleExport",(()=>{(0,f.exportAsFile)("",this.props.seedPhrase,"text/plain")})),g(this,"handleNext",(()=>{const{isShowingSeedPhrase:e}=this.state,{history:t}=this.props;this.context.trackEvent({category:d.EVENT.CATEGORIES.ONBOARDING,event:d.EVENT_NAMES.SRP_TO_CONFIRM_BACKUP,properties:{}}),e&&t.replace(u.INITIALIZE_CONFIRM_SEED_PHRASE_ROUTE)})),g(this,"handleSkip",(async()=>{const{history:e,setSeedPhraseBackedUp:t,setCompletedOnboarding:n,onboardingInitiator:a}=this.props;await Promise.all([n(),t(!1)]).then((()=>{this.context.trackEvent({category:d.EVENT.CATEGORIES.ONBOARDING,event:d.EVENT_NAMES.WALLET_CREATED,properties:{account_type:d.EVENT.ACCOUNT_TYPES.DEFAULT,is_backup_skipped:!0}})})).catch((e=>{console.error(e.message),this.context.trackEvent({category:d.EVENT.CATEGORIES.ONBOARDING,event:d.EVENT_NAMES.WALLET_SETUP_FAILED,properties:{account_type:d.EVENT.ACCOUNT_TYPES.DEFAULT,is_backup_skipped:!0,reason:"Seed Phrase Creation Error",error:e.message}})})),a&&await(0,p.returnToOnboardingInitiatorTab)(a),e.replace(u.DEFAULT_ROUTE)}))}renderSecretWordsContainer(){const{t:e}=this.context,{seedPhrase:t}=this.props,{isShowingSeedPhrase:n}=this.state;return a.default.createElement("div",{className:"reveal-seed-phrase__secret"},a.default.createElement("div",{className:(0,o.default)("reveal-seed-phrase__secret-words notranslate",{"reveal-seed-phrase__secret-words--hidden":!n})},t),!n&&a.default.createElement("div",{className:"reveal-seed-phrase__secret-blocker",onClick:()=>{this.context.trackEvent({category:d.EVENT.CATEGORIES.ONBOARDING,event:d.EVENT_NAMES.KEY_EXPORT_REVEALED,properties:{}}),this.setState({isShowingSeedPhrase:!0})}},a.default.createElement(c.default,{width:"28px",height:"35px",fill:"var(--color-overlay-inverse)"}),a.default.createElement("div",{className:"reveal-seed-phrase__reveal-button"},e("clickToRevealSeed"))))}render(){const{t:e}=this.context,{isShowingSeedPhrase:t}=this.state,{history:n,onboardingInitiator:r}=this.props;return a.default.createElement("div",{className:"reveal-seed-phrase","data-testid":"reveal-seed-phrase"},a.default.createElement("div",{className:"seed-phrase__sections"},a.default.createElement("div",{className:"seed-phrase__main"},a.default.createElement(s.default,{marginBottom:4},a.default.createElement("a",{href:"#",onClick:e=>{e.preventDefault(),n.push(u.INITIALIZE_SEED_PHRASE_INTRO_ROUTE)}},`< ${e("back")}`)),a.default.createElement("div",{className:"first-time-flow__header"},e("secretRecoveryPhrase")),a.default.createElement("div",{className:"first-time-flow__text-block"},e("secretBackupPhraseDescription")),a.default.createElement("div",{className:"first-time-flow__text-block"},e("secretBackupPhraseWarning")),this.renderSecretWordsContainer()),a.default.createElement("div",{className:"seed-phrase__side"},a.default.createElement("div",{className:"first-time-flow__text-block"},`${e("tips")}:`),a.default.createElement("div",{className:"first-time-flow__text-block"},e("storePhrase")),a.default.createElement("div",{className:"first-time-flow__text-block"},e("writePhrase")),a.default.createElement("div",{className:"first-time-flow__text-block"},e("memorizePhrase")),a.default.createElement("div",{className:"first-time-flow__text-block"},a.default.createElement("a",{className:"reveal-seed-phrase__export-text",onClick:this.handleExport},e("downloadSecretBackup"))))),a.default.createElement("div",{className:"reveal-seed-phrase__buttons"},a.default.createElement(i.default,{type:"secondary",className:"first-time-flow__button",onClick:this.handleSkip,rounded:!1},e("remindMeLater")),a.default.createElement(i.default,{type:"primary",className:"first-time-flow__button",onClick:this.handleNext,disabled:!t,rounded:!1},e("next"))),r?a.default.createElement(l.default,{content:e("onboardingReturnNotice",[e("remindMeLater"),r.location])}):null)}}n.default=E,g(E,"contextTypes",{t:r.default.func,trackEvent:r.default.func}),g(E,"propTypes",{history:r.default.object,seedPhrase:r.default.string,setSeedPhraseBackedUp:r.default.func,setCompletedOnboarding:r.default.func,onboardingInitiator:r.default.exact({location:r.default.string,tabId:r.default.number})})}}},{package:"$root$"}],[8048,{"../../../../selectors":8267,"../../../../store/actions":8273,"./reveal-seed-phrase.component":8047,"react-redux":6775},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=e("react-redux"),o=e("../../../../store/actions"),s=e("../../../../selectors"),c=(a=e("./reveal-seed-phrase.component"))&&a.__esModule?a:{default:a};var i=(0,r.connect)((e=>({onboardingInitiator:(0,s.getOnboardingInitiator)(e)})),(e=>({setSeedPhraseBackedUp:t=>e((0,o.setSeedPhraseBackedUp)(t)),setCompletedOnboarding:()=>e((0,o.setCompletedOnboarding)())})))(c.default);n.default=i}}},{package:"$root$"}],[8049,{"./seed-phrase-intro.component":8050},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./seed-phrase-intro.component"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[8050,{"../../../../components/ui/box":7682,"../../../../components/ui/button":7686,"../../../../components/ui/typography":7836,"../../../../helpers/constants/design-system":7868,"../../../../helpers/constants/routes":7872,"../../../../hooks/useI18nContext":7927,react:6817,"react-router-dom":6795},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const e=(0,o.useI18nContext)(),t=(0,r.useHistory)(),n={en:"English",es:"Spanish"};return(0,a.useEffect)((()=>{!async function(){const t=document.querySelector("video"),n=await f(e("seedPhraseVideo")),a=await f(e("seedPhraseAudio")),r=new MediaSource;t.src=URL.createObjectURL(r),await m(r,"sourceopen");const o=r.addSourceBuffer("video/webm;codecs=vp8");o.appendBuffer(n);const s=r.addSourceBuffer("audio/webm;codecs=opus");s.appendBuffer(a),await Promise.all([m(s,"updateend"),m(o,"updateend")]),"closed"!==r.readyState&&r.endOfStream()}()})),a.default.createElement("div",{className:"seed-phrase-intro","data-testid":"seed-phrase-intro"},a.default.createElement("div",{className:"seed-phrase-intro__sections"},a.default.createElement("div",{className:"seed-phrase-intro__left"},a.default.createElement(i.default,{color:l.COLORS.TEXT_DEFAULT,variant:l.TYPOGRAPHY.H1,boxProps:{marginTop:0,marginBottom:4}},e("seedPhraseIntroTitle")),a.default.createElement(i.default,{color:l.COLORS.TEXT_DEFAULT,boxProps:{marginBottom:4},variant:l.TYPOGRAPHY.Paragraph,className:"seed-phrase-intro__copy"},e("seedPhraseIntroTitleCopy")),a.default.createElement(s.default,{marginBottom:4},a.default.createElement("video",{controls:!0},Object.keys(n).map((e=>a.default.createElement("track",{default:!0,srcLang:e,label:n[e],key:`${e}-subtitles`,kind:"subtitles",src:`./images/videos/recovery-onboarding/subtitles/${e}.vtt`}))))),a.default.createElement(s.default,{width:l.BLOCK_SIZES.ONE_THIRD},a.default.createElement(c.default,{type:"primary",onClick:()=>{t.push(u.INITIALIZE_SEED_PHRASE_ROUTE)},rounded:!1},e("next")))),a.default.createElement("div",{className:"seed-phrase-intro__right"},a.default.createElement(s.default,{padding:4,borderWidth:1,borderRadius:l.SIZES.MD,borderColor:l.COLORS.BORDER_MUTED,borderStyle:l.BORDER_STYLE.SOLID},a.default.createElement(s.default,{marginBottom:4},a.default.createElement(i.default,{as:"span",color:l.COLORS.TEXT_DEFAULT,fontWeight:l.FONT_WEIGHT.BOLD,boxProps:{display:"block"}},e("seedPhraseIntroSidebarTitleOne")),a.default.createElement("span",null,e("seedPhraseIntroSidebarCopyOne"))),a.default.createElement(s.default,{marginBottom:4},a.default.createElement(i.default,{as:"span",color:l.COLORS.TEXT_DEFAULT,fontWeight:l.FONT_WEIGHT.BOLD,boxProps:{display:"block"}},e("seedPhraseIntroSidebarTitleTwo")),a.default.createElement("ul",{className:"seed-phrase-intro__sidebar_list"},a.default.createElement("li",null,e("seedPhraseIntroSidebarBulletOne")),a.default.createElement("li",null,e("seedPhraseIntroSidebarBulletTwo")),a.default.createElement("li",null,e("seedPhraseIntroSidebarBulletThree")),a.default.createElement("li",null,e("seedPhraseIntroSidebarBulletFour")))),a.default.createElement(s.default,{marginBottom:4},a.default.createElement(i.default,{as:"span",color:l.COLORS.TEXT_DEFAULT,fontWeight:l.FONT_WEIGHT.BOLD,boxProps:{display:"block"}},e("seedPhraseIntroSidebarTitleThree")),a.default.createElement("span",null,e("seedPhraseIntroSidebarCopyTwo"))),a.default.createElement(s.default,{marginBottom:4},a.default.createElement("span",null,e("seedPhraseIntroSidebarCopyThree")))))))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=e("react-router-dom"),o=e("../../../../hooks/useI18nContext"),s=d(e("../../../../components/ui/box")),c=d(e("../../../../components/ui/button")),i=d(e("../../../../components/ui/typography")),l=e("../../../../helpers/constants/design-system"),u=e("../../../../helpers/constants/routes");function d(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function f(e){return fetch(e).then((e=>e.arrayBuffer()))}function m(e,t){return new Promise((n=>{e.addEventListener(t,n,{once:!0})}))}}}},{package:"$root$"}],[8051,{"../../../components/ui/metafox-logo":7785,"../../../helpers/constants/routes":7872,"./confirm-seed-phrase":8044,"./reveal-seed-phrase":8046,"./seed-phrase-intro":8049,"prop-types":5840,react:6817,"react-dnd":6712,"react-dnd-html5-backend":6698,"react-router-dom":6795},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=f(e("prop-types")),o=e("react-router-dom"),s=f(e("react-dnd-html5-backend")),c=e("react-dnd"),i=e("../../../helpers/constants/routes"),l=f(e("../../../components/ui/metafox-logo")),u=f(e("./confirm-seed-phrase")),d=f(e("./reveal-seed-phrase")),p=f(e("./seed-phrase-intro"));function f(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},h.apply(this,arguments)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class E extends a.PureComponent{constructor(...e){super(...e),g(this,"state",{verifiedSeedPhrase:""})}componentDidMount(){const{seedPhrase:e,history:t,verifySeedPhrase:n}=this.props;e||n().then((e=>{e?this.setState({verifiedSeedPhrase:e}):t.push(i.DEFAULT_ROUTE)}))}render(){var e;const{seedPhrase:t,history:n}=this.props,{verifiedSeedPhrase:r}=this.state,f=(null==n||null===(e=n.location)||void 0===e?void 0:e.pathname)===i.INITIALIZE_SEED_PHRASE_INTRO_ROUTE?"intro":"";return a.default.createElement(c.DragDropContextProvider,{backend:s.default},a.default.createElement("div",{className:"first-time-flow__header-wrapper"},a.default.createElement(l.default,null),a.default.createElement("div",{className:`first-time-flow__wrapper ${f}`},a.default.createElement(o.Switch,null,a.default.createElement(o.Route,{exact:!0,path:i.INITIALIZE_CONFIRM_SEED_PHRASE_ROUTE,render:e=>a.default.createElement(u.default,h({},e,{seedPhrase:t||r}))}),a.default.createElement(o.Route,{exact:!0,path:i.INITIALIZE_SEED_PHRASE_ROUTE,render:e=>a.default.createElement(d.default,h({},e,{seedPhrase:t||r}))}),a.default.createElement(o.Route,{exact:!0,path:i.INITIALIZE_BACKUP_SEED_PHRASE_ROUTE,render:e=>a.default.createElement(d.default,h({},e,{seedPhrase:t||r}))}),a.default.createElement(o.Route,{exact:!0,path:i.INITIALIZE_SEED_PHRASE_INTRO_ROUTE,render:e=>a.default.createElement(p.default,h({},e,{seedPhrase:t||r}))})))))}}n.default=E,g(E,"propTypes",{history:r.default.object,seedPhrase:r.default.string,verifySeedPhrase:r.default.func})}}},{package:"$root$"}],[8052,{"./select-action.container":8054},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./select-action.container"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[8053,{"../../../../shared/constants/metametrics":7321,"../../../components/ui/button":7686,"../../../components/ui/metafox-logo":7785,"../../../helpers/constants/routes":7872,"prop-types":5840,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=l(e("prop-types")),o=l(e("../../../components/ui/button")),s=l(e("../../../components/ui/metafox-logo")),c=e("../../../../shared/constants/metametrics"),i=e("../../../helpers/constants/routes");function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class p extends a.PureComponent{constructor(...e){super(...e),d(this,"handleCreate",(()=>{const{metaMetricsId:e}=this.props,{trackEvent:t}=this.context;this.props.setFirstTimeFlowType("create"),t({category:c.EVENT.CATEGORIES.ONBOARDING,event:c.EVENT_NAMES.WALLET_SETUP_STARTED,properties:{account_type:c.EVENT.ACCOUNT_TYPES.DEFAULT}},{isOptIn:!0,metaMetricsId:e,flushImmediately:!0}),this.props.history.push(i.INITIALIZE_CREATE_PASSWORD_ROUTE)})),d(this,"handleImport",(()=>{const{metaMetricsId:e}=this.props,{trackEvent:t}=this.context;this.props.setFirstTimeFlowType("import"),t({category:c.EVENT.CATEGORIES.ONBOARDING,event:c.EVENT_NAMES.WALLET_SETUP_STARTED,properties:{account_type:c.EVENT.ACCOUNT_TYPES.IMPORTED}},{isOptIn:!0,metaMetricsId:e,flushImmediately:!0}),this.props.history.push(i.INITIALIZE_IMPORT_WITH_SEED_PHRASE_ROUTE)}))}componentDidMount(){const{history:e,isInitialized:t,nextRoute:n}=this.props;t&&e.push(n)}render(){const{t:e}=this.context;return a.default.createElement("div",{className:"select-action"},a.default.createElement(s.default,null),a.default.createElement("div",{className:"select-action__wrapper"},a.default.createElement("div",{className:"select-action__body"},a.default.createElement("div",{className:"select-action__body-header"},e("newToQnekt")),a.default.createElement("div",{className:"select-action__select-buttons"},a.default.createElement("div",{className:"select-action__select-button"},a.default.createElement("div",{className:"select-action__button-content"},a.default.createElement("div",{className:"select-action__button-symbol"},a.default.createElement("img",{src:"./images/add.svg",alt:""})),a.default.createElement("div",{className:"select-action__button-text-big"},e("noAlreadyHaveSeed")),a.default.createElement("div",{className:"select-action__button-text-small"},e("importYourExisting"))),a.default.createElement(o.default,{type:"primary",className:"first-time-flow__button",onClick:this.handleImport,"data-testid":"import-wallet-button",rounded:!1},e("importWallet"))),a.default.createElement("div",{className:"select-action__select-button"},a.default.createElement("div",{className:"select-action__button-content"},a.default.createElement("div",{className:"select-action__button-symbol"},a.default.createElement("img",{src:"./images/add.svg",alt:""})),a.default.createElement("div",{className:"select-action__button-text-big"},e("letsGoSetUp")),a.default.createElement("div",{className:"select-action__button-text-small"},e("thisWillCreate"))),a.default.createElement(o.default,{type:"primary",className:"first-time-flow__button",onClick:this.handleCreate,"data-testid":"create-wallet-button",rounded:!1},e("createAWallet")))))))}}n.default=p,d(p,"propTypes",{history:r.default.object,isInitialized:r.default.bool,setFirstTimeFlowType:r.default.func,nextRoute:r.default.string,metaMetricsId:r.default.string}),d(p,"contextTypes",{trackEvent:r.default.func,t:r.default.func})}}},{package:"$root$"}],[8054,{"../../../selectors":8267,"../../../store/actions":8273,"./select-action.component":8053,"react-redux":6775,"react-router-dom":6795,redux:6852},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=e("react-redux"),o=e("react-router-dom"),s=e("redux"),c=e("../../../store/actions"),i=e("../../../selectors"),l=(a=e("./select-action.component"))&&a.__esModule?a:{default:a};var u=(0,s.compose)(o.withRouter,(0,r.connect)((e=>({nextRoute:(0,i.getFirstTimeFlowTypeRoute)(e),metaMetricsId:e.metamask.metaMetricsId})),(e=>({setFirstTimeFlowType:t=>e((0,c.setFirstTimeFlowType)(t))}))))(l.default);n.default=u}}},{package:"$root$"}],[8055,{"../../../hooks/useI18nContext":7927,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=(a=e("react"))&&a.__esModule?a:{default:a},o=e("../../../hooks/useI18nContext");var s=()=>{const e=(0,o.useI18nContext)();return r.default.createElement(r.default.Fragment,null,r.default.createElement("div",{className:"welcome-page__header"},e("betaWelcome")),r.default.createElement("div",{className:"welcome-page__description"},r.default.createElement("p",null,e("betaMetamaskDescription")),r.default.createElement("p",null,e("betaMetamaskDescriptionExplanation",[r.default.createElement("a",{href:"https://metamask.io/terms.html",key:"terms-link"},e("betaMetamaskDescriptionExplanationTermsLinkText")),r.default.createElement("a",{href:"https://metamask.io/beta-terms.html",key:"beta-terms-link"},e("betaMetamaskDescriptionExplanationBetaTermsLinkText"))]))))};n.default=s}}},{package:"$root$"}],[8056,{"./welcome.container":8059},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./welcome.container"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[8057,{"../../../hooks/useI18nContext":7927,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=(a=e("react"))&&a.__esModule?a:{default:a},o=e("../../../hooks/useI18nContext");var s=()=>{const e=(0,o.useI18nContext)();return r.default.createElement(r.default.Fragment,null,r.default.createElement("div",{className:"welcome-page__header"},e("welcome")),r.default.createElement("div",{className:"welcome-page__description"},r.default.createElement("p",null,e("metamaskDescription")),r.default.createElement("p",null,e("happyToSeeYou"))))};n.default=s}}},{package:"$root$"}],[8058,{"../../../components/ui/button":7686,"../../../components/ui/mascot":7779,"../../../helpers/constants/routes":7872,"../../../helpers/utils/build-types":7885,"./beta-welcome-footer.component":8055,"./welcome-footer.component":8057,events:2435,"prop-types":5840,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=f(e("events")),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),o=f(e("prop-types")),s=f(e("../../../components/ui/mascot")),c=f(e("../../../components/ui/button")),i=e("../../../helpers/constants/routes"),l=e("../../../helpers/utils/build-types"),u=f(e("./welcome-footer.component")),d=f(e("./beta-welcome-footer.component"));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function f(e){return e&&e.__esModule?e:{default:e}}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class h extends r.PureComponent{constructor(e){super(e),m(this,"handleContinue",(()=>{this.props.history.push(i.INITIALIZE_METAMETRICS_OPT_IN_ROUTE)})),this.animationEventEmitter=new a.default}componentDidMount(){const{history:e,participateInMetaMetrics:t,welcomeScreenSeen:n,isInitialized:a}=this.props;n&&a&&null!==t?e.push(i.INITIALIZE_CREATE_PASSWORD_ROUTE):n&&null!==t?e.push(i.INITIALIZE_SELECT_ACTION_ROUTE):n&&e.push(i.INITIALIZE_METAMETRICS_OPT_IN_ROUTE)}render(){const{t:e}=this.context;return r.default.createElement("div",{className:"welcome-page__wrapper"},r.default.createElement("div",{className:"welcome-page"},r.default.createElement(s.default,{animationEventEmitter:this.animationEventEmitter,width:"0",height:"0"}),(0,l.isBeta)()?r.default.createElement(d.default,null):r.default.createElement(u.default,null),r.default.createElement(c.default,{type:"primary",className:"first-time-flow__button",onClick:this.handleContinue,rounded:!1},e("getStarted"))))}}n.default=h,m(h,"propTypes",{history:o.default.object,participateInMetaMetrics:o.default.bool,welcomeScreenSeen:o.default.bool,isInitialized:o.default.bool}),m(h,"contextTypes",{t:o.default.func})}}},{package:"$root$"}],[8059,{"../../../store/actions":8273,"./welcome.component":8058,"react-redux":6775,"react-router-dom":6795,redux:6852},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=e("react-redux"),o=e("react-router-dom"),s=e("redux"),c=e("../../../store/actions"),i=(a=e("./welcome.component"))&&a.__esModule?a:{default:a};var l=(0,s.compose)(o.withRouter,(0,r.connect)((({metamask:e})=>{const{welcomeScreenSeen:t,participateInMetaMetrics:n,isInitialized:a}=e;return{welcomeScreenSeen:t,participateInMetaMetrics:n,isInitialized:a}}),(e=>({closeWelcomeScreen:()=>e((0,c.closeWelcomeScreen)())}))))(i.default);n.default=l}}},{package:"$root$"}],[8060,{"../../../shared/constants/metametrics":7321,"../../components/app/asset-list":7388,"../../components/app/collectibles-tab":7402,"../../components/app/home-notification":7487,"../../components/app/menu-bar":7496,"../../components/app/multiple-notifications":7564,"../../components/app/recovery-phrase-reminder":7589,"../../components/app/transaction-list":7657,"../../components/app/wallet-overview":7670,"../../components/app/whats-new-popup":7673,"../../components/ui/actionable-message/actionable-message":7678,"../../components/ui/box":7682,"../../components/ui/button":7686,"../../components/ui/popover":7798,"../../components/ui/tabs":7818,"../../components/ui/typography/typography":7837,"../../helpers/constants/common":7865,"../../helpers/constants/design-system":7868,"../../helpers/constants/routes":7872,"../../helpers/constants/zendesk-url":7875,"../../helpers/utils/util":7907,"../connected-accounts":8004,"../connected-sites":8007,"prop-types":5840,react:6817,"react-router-dom":6795},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=A(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=P(e("prop-types")),o=e("react-router-dom"),s=e("../../helpers/constants/common"),c=e("../../../shared/constants/metametrics"),i=e("../../helpers/utils/util"),l=P(e("../../components/app/asset-list")),u=(P(e("../../components/app/collectibles-tab")),P(e("../../components/app/home-notification"))),d=P(e("../../components/app/multiple-notifications")),p=P(e("../../components/app/transaction-list")),f=P(e("../../components/app/menu-bar")),m=P(e("../../components/ui/popover")),h=P(e("../../components/ui/button")),g=P(e("../../components/ui/box")),E=P(e("../connected-sites")),_=P(e("../connected-accounts")),y=e("../../components/ui/tabs"),v=e("../../components/app/wallet-overview"),T=(P(e("../../components/app/whats-new-popup")),P(e("../../components/app/recovery-phrase-reminder"))),b=P(e("../../components/ui/actionable-message/actionable-message")),k=P(e("../../components/ui/typography/typography")),N=e("../../helpers/constants/design-system"),w=e("../../helpers/constants/routes"),O=P(e("../../helpers/constants/zendesk-url"));function P(e){return e&&e.__esModule?e:{default:e}}function A(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(A=function(e){return e?n:t})(e)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C({isNotification:e,totalUnapprovedCount:t,isSigningQRHardwareTransaction:n}){return e&&0===t&&!n}class x extends a.PureComponent{constructor(e){super(e),S(this,"state",{canShowBlockageNotification:!0,notificationClosing:!1,redirecting:!1}),S(this,"onRecoveryPhraseReminderClose",(()=>{const{setRecoveryPhraseReminderHasBeenShown:e,setRecoveryPhraseReminderLastShown:t}=this.props;e(!0),t((new Date).getTime())})),S(this,"renderPopover",(()=>{const{setConnectedStatusPopoverHasBeenShown:e}=this.props,{t:t}=this.context;return a.default.createElement(m.default,{title:t("whatsThis"),onClose:e,className:"home__connected-status-popover",showArrow:!0,CustomBackground:({onClose:e})=>a.default.createElement("div",{className:"home__connected-status-popover-bg-container",onClick:e},a.default.createElement("div",{className:"home__connected-status-popover-bg"})),footer:a.default.createElement(a.default.Fragment,null,a.default.createElement("a",{href:"https://metamask.zendesk.com/hc/en-us/articles/360045129011-Intro-to-MetaMask-v8-extension",target:"_blank",rel:"noopener noreferrer"},t("learnMore")),a.default.createElement(h.default,{type:"primary",onClick:e},t("dismiss")))},a.default.createElement("main",{className:"home__connect-status-text"},a.default.createElement("div",null,t("metaMaskConnectStatusParagraphOne")),a.default.createElement("div",null,t("metaMaskConnectStatusParagraphTwo")),a.default.createElement("div",null,t("metaMaskConnectStatusParagraphThree"))))}));const{closeNotificationPopup:t,firstPermissionsRequestId:n,haveSwapsQuotes:r,isNotification:o,showAwaitingSwapScreen:s,suggestedAssets:c=[],swapsFetchParams:i,unconfirmedTransactionsCount:l}=this.props;C(e)?(this.state.notificationClosing=!0,t()):(n||l>0||c.length>0||!o&&(s||r||i))&&(this.state.redirecting=!0)}checkStatusAndNavigate(){const{firstPermissionsRequestId:e,history:t,isNotification:n,suggestedAssets:a=[],unconfirmedTransactionsCount:r,haveSwapsQuotes:o,showAwaitingSwapScreen:s,swapsFetchParams:c,pendingConfirmations:i}=this.props;!n&&s?t.push(w.AWAITING_SWAP_ROUTE):!n&&o?t.push(w.VIEW_QUOTE_ROUTE):!n&&c?t.push(w.BUILD_QUOTE_ROUTE):e?t.push(`${w.CONNECT_ROUTE}/${e}`):r>0?t.push(w.CONFIRM_TRANSACTION_ROUTE):a.length>0?t.push(w.CONFIRM_ADD_SUGGESTED_TOKEN_ROUTE):i.length>0&&t.push(w.CONFIRMATION_V_NEXT_ROUTE)}componentDidMount(){this.checkStatusAndNavigate()}static getDerivedStateFromProps(e){return C(e)?{notificationClosing:!0}:null}componentDidUpdate(e,t){const{closeNotificationPopup:n,setupThreeBox:a,showRestorePrompt:r,threeBoxLastUpdated:o,threeBoxSynced:s,isNotification:c}=this.props,{notificationClosing:i}=this.state;i&&!t.notificationClosing?n():c?this.checkStatusAndNavigate():s&&r&&null===o&&a()}renderNotifications(){const{t:e}=this.context,{history:t,shouldShowSeedPhraseReminder:n,isPopup:r,selectedAddress:o,restoreFromThreeBox:s,turnThreeBoxSyncingOn:c,setShowRestorePromptToFalse:l,showRestorePrompt:p,threeBoxLastUpdated:f,shouldShowWeb3ShimUsageNotification:E,setWeb3ShimUsageAlertDismissed:_,originOfCurrentTab:y,disableWeb3ShimUsageAlert:v,infuraBlocked:T,newNetworkAdded:P,setNewNetworkAdded:A,newCollectibleAddedMessage:S,setNewCollectibleAddedMessage:C,newTokensImported:x,setNewTokensImported:R,newCustomNetworkAdded:M,clearNewCustomNetworkAdded:I,setRpcTarget:D}=this.props;return a.default.createElement(d.default,null,"success"===S?a.default.createElement(b.default,{type:"success",className:"home__new-network-notification",message:a.default.createElement(g.default,{display:N.DISPLAY.INLINE_FLEX},a.default.createElement("i",{className:"fa fa-check-circle home__new-nft-notification-icon"}),a.default.createElement(k.default,{variant:N.TYPOGRAPHY.H7,fontWeight:N.FONT_WEIGHT.NORMAL},e("newCollectibleAddedMessage")),a.default.createElement("button",{className:"fas fa-times home__new-nft-notification-close",title:e("close"),onClick:()=>C("")}))}):null,P?a.default.createElement(b.default,{type:"success",className:"home__new-network-notification",message:a.default.createElement(g.default,{display:N.DISPLAY.INLINE_FLEX},a.default.createElement("i",{className:"fa fa-check-circle home__new-network-notification-icon"}),a.default.createElement(k.default,{variant:N.TYPOGRAPHY.H7,fontWeight:N.FONT_WEIGHT.NORMAL},e("newNetworkAdded",[P])),a.default.createElement("button",{className:"fas fa-times home__new-network-notification-close",title:e("close"),onClick:()=>A("")}))}):null,x?a.default.createElement(b.default,{type:"success",className:"home__new-tokens-imported-notification",message:a.default.createElement(g.default,{display:N.DISPLAY.INLINE_FLEX},a.default.createElement("i",{className:"fa fa-check-circle home__new-tokens-imported-notification-icon"}),a.default.createElement(g.default,null,a.default.createElement(k.default,{className:"home__new-tokens-imported-notification-title",variant:N.TYPOGRAPHY.H6,fontWeight:N.FONT_WEIGHT.BOLD},e("newTokensImportedTitle")),a.default.createElement(k.default,{className:"home__new-tokens-imported-notification-message",variant:N.TYPOGRAPHY.H7,fontWeight:N.FONT_WEIGHT.NORMAL},e("newTokensImportedMessage",[x]))),a.default.createElement("button",{className:"fas fa-times home__new-tokens-imported-notification-close",title:e("close"),onClick:()=>R("")}))}):null,E?a.default.createElement(u.default,{descriptionText:e("web3ShimUsageNotification",[a.default.createElement("span",{key:"web3ShimUsageNotificationLink",className:"home-notification__text-link",onClick:()=>global.platform.openTab({url:O.default.LEGACY_WEB3})},e("here"))]),ignoreText:e("dismiss"),onIgnore:e=>{_(y),e&&v()},checkboxText:e("dontShowThisAgain"),checkboxTooltipText:e("canToggleInSettings"),key:"home-web3ShimUsageNotification"}):null,n?a.default.createElement(u.default,{descriptionText:e("backupApprovalNotice"),acceptText:e("backupNow"),onAccept:()=>{r?global.platform.openExtensionInBrowser(w.INITIALIZE_BACKUP_SEED_PHRASE_ROUTE):t.push(w.INITIALIZE_BACKUP_SEED_PHRASE_ROUTE)},infoText:e("backupApprovalInfo"),key:"home-backupApprovalNotice"}):null,f&&p?a.default.createElement(u.default,{descriptionText:e("restoreWalletPreferences",[(0,i.formatDate)(f,"M/d/y")]),acceptText:e("restore"),ignoreText:e("noThanks"),infoText:e("dataBackupFoundInfo"),onAccept:()=>{s(o).then((()=>{c()}))},onIgnore:()=>{l()},key:"home-privacyModeDefault"}):null,T&&this.state.canShowBlockageNotification?a.default.createElement(u.default,{descriptionText:e("infuraBlockedNotification",[a.default.createElement("span",{key:"infuraBlockedNotificationLink",className:"home-notification__text-link",onClick:()=>global.platform.openTab({url:O.default.INFURA_BLOCKAGE})},e("here"))]),ignoreText:e("dismiss"),onIgnore:()=>{this.setState({canShowBlockageNotification:!1})},key:"home-infuraBlockedNotification"}):null,0!==Object.keys(M).length&&a.default.createElement(m.default,{className:"home__new-network-added"},a.default.createElement("i",{className:"fa fa-check-circle fa-2x home__new-network-added__check-circle"}),a.default.createElement(k.default,{variant:N.TYPOGRAPHY.H4,marginTop:5,marginRight:9,marginLeft:9,marginBottom:0,fontWeight:N.FONT_WEIGHT.BOLD},e("networkAddedSuccessfully")),a.default.createElement(g.default,{marginTop:8,marginRight:8,marginLeft:8,marginBottom:5},a.default.createElement(h.default,{type:"primary",className:"home__new-network-added__switch-to-button",onClick:()=>{D(M.rpcUrl,M.chainId,M.ticker,M.chainName),I()}},a.default.createElement(k.default,{variant:N.TYPOGRAPHY.H6,fontWeight:N.FONT_WEIGHT.NORMAL,color:N.COLORS.PRIMARY_INVERSE},e("switchToNetwork",[M.chainName]))),a.default.createElement(h.default,{type:"secondary",onClick:()=>I()},a.default.createElement(k.default,{variant:N.TYPOGRAPHY.H6,fontWeight:N.FONT_WEIGHT.NORMAL,color:N.COLORS.PRIMARY_DEFAULT},e("dismiss"))))))}render(){const{t:e}=this.context,{defaultHomeActiveTabName:t,onTabClick:n,forgottenPassword:r,history:i,connectedStatusPopoverHasBeenShown:u,isPopup:d,announcementsToShow:m,showWhatsNewPopup:h,hideWhatsNewPopup:g,seedPhraseBackedUp:b,showRecoveryPhraseReminder:k,firstTimeFlowType:N,completedOnboarding:O}=this.props;if(r)return a.default.createElement(o.Redirect,{to:{pathname:w.RESTORE_VAULT_ROUTE}});if(this.state.notificationClosing||this.state.redirecting)return null;return a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{className:"main-container"},a.default.createElement("div",{className:"home__balance-wrapper"},a.default.createElement(f.default,null),a.default.createElement(v.EthOverview,null)),a.default.createElement(o.Route,{path:w.CONNECTED_ROUTE,component:E.default,exact:!0}),a.default.createElement(o.Route,{path:w.CONNECTED_ACCOUNTS_ROUTE,component:_.default,exact:!0}),a.default.createElement("div",{className:"home__container"},null,k?a.default.createElement(T.default,{hasBackedUp:b,onConfirm:this.onRecoveryPhraseReminderClose}):null,d&&!u?this.renderPopover():null,a.default.createElement("div",{className:"home__main-view"},a.default.createElement(y.Tabs,{defaultActiveTabName:t,onTabClick:n,tabsClassName:"home__tabs"},a.default.createElement(y.Tab,{activeClassName:"home__tab--active",className:"home__tab","data-testid":"home__asset-tab",name:e("assets")},a.default.createElement(l.default,{onClickAsset:e=>i.push(`${w.ASSET_ROUTE}/${e}`)})),null,a.default.createElement(y.Tab,{activeClassName:"home__tab--active",className:"home__tab","data-testid":"home__activity-tab",name:e("activity")},a.default.createElement(p.default,null))),a.default.createElement("div",{className:"home__support"},e("needHelp",[a.default.createElement("a",{href:s.SUPPORT_LINK,target:"_blank",rel:"noopener noreferrer",key:"need-help-link",onClick:()=>{this.context.trackEvent({category:c.EVENT.CATEGORIES.HOME,event:c.EVENT_NAMES.SUPPORT_LINK_CLICKED,properties:{url:s.SUPPORT_LINK}},{contextPropsIntoEventProperties:[c.CONTEXT_PROPS.PAGE_TITLE]})}},e("needHelpLinkText"))]))),this.renderNotifications())))}}n.default=x,S(x,"contextTypes",{t:r.default.func,trackEvent:r.default.func}),S(x,"propTypes",{history:r.default.object,forgottenPassword:r.default.bool,suggestedAssets:r.default.array,unconfirmedTransactionsCount:r.default.number,shouldShowSeedPhraseReminder:r.default.bool.isRequired,isPopup:r.default.bool,isNotification:r.default.bool.isRequired,threeBoxSynced:r.default.bool,setupThreeBox:r.default.func,turnThreeBoxSyncingOn:r.default.func,showRestorePrompt:r.default.bool,selectedAddress:r.default.string,restoreFromThreeBox:r.default.func,setShowRestorePromptToFalse:r.default.func,threeBoxLastUpdated:r.default.number,firstPermissionsRequestId:r.default.string,totalUnapprovedCount:r.default.number.isRequired,setConnectedStatusPopoverHasBeenShown:r.default.func,connectedStatusPopoverHasBeenShown:r.default.bool,defaultHomeActiveTabName:r.default.string,firstTimeFlowType:r.default.string,completedOnboarding:r.default.bool,onTabClick:r.default.func.isRequired,haveSwapsQuotes:r.default.bool.isRequired,showAwaitingSwapScreen:r.default.bool.isRequired,swapsFetchParams:r.default.object,shouldShowWeb3ShimUsageNotification:r.default.bool.isRequired,setWeb3ShimUsageAlertDismissed:r.default.func.isRequired,originOfCurrentTab:r.default.string,disableWeb3ShimUsageAlert:r.default.func.isRequired,pendingConfirmations:r.default.arrayOf(r.default.object).isRequired,infuraBlocked:r.default.bool.isRequired,showWhatsNewPopup:r.default.bool.isRequired,hideWhatsNewPopup:r.default.func.isRequired,announcementsToShow:r.default.bool.isRequired,showRecoveryPhraseReminder:r.default.bool.isRequired,setRecoveryPhraseReminderHasBeenShown:r.default.func.isRequired,setRecoveryPhraseReminderLastShown:r.default.func.isRequired,seedPhraseBackedUp:e=>{if(null!==e.seedPhraseBackedUp&&"boolean"!=typeof e.seedPhraseBackedUp)throw new Error(`seedPhraseBackedUp is required to be null or boolean. Received ${e.seedPhraseBackedUp}`)},newNetworkAdded:r.default.string,setNewNetworkAdded:r.default.func.isRequired,isSigningQRHardwareTransaction:r.default.bool.isRequired,newCollectibleAddedMessage:r.default.string,setNewCollectibleAddedMessage:r.default.func.isRequired,closeNotificationPopup:r.default.func.isRequired,newTokensImported:r.default.string,setNewTokensImported:r.default.func.isRequired,newCustomNetworkAdded:r.default.object,clearNewCustomNetworkAdded:r.default.func,setRpcTarget:r.default.func})}}},{package:"$root$"}],[8061,{"../../../app/scripts/lib/util":88,"../../../shared/constants/alerts":7315,"../../../shared/constants/app":7316,"../../ducks/app/app":7851,"../../ducks/metamask/metamask":7859,"../../ducks/swaps/swaps":7863,"../../selectors":8267,"../../store/actions":8273,"./home.component":8060,"react-redux":6775,"react-router-dom":6795,redux:6852},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=e("redux"),o=e("react-redux"),s=e("react-router-dom"),c=e("../../selectors"),i=e("../../store/actions"),l=e("../../ducks/app/app"),u=e("../../ducks/metamask/metamask"),d=e("../../ducks/swaps/swaps"),p=e("../../../app/scripts/lib/util"),f=e("../../../shared/constants/app"),m=e("../../../shared/constants/alerts"),h=(a=e("./home.component"))&&a.__esModule?a:{default:a};var g=(0,r.compose)(s.withRouter,(0,o.connect)((e=>{var t;const{metamask:n,appState:a}=e,{suggestedAssets:r,seedPhraseBackedUp:o,tokens:s,threeBoxSynced:i,showRestorePrompt:l,selectedAddress:h,connectedStatusPopoverHasBeenShown:g,defaultHomeActiveTabName:E,swapsState:_,dismissSeedBackUpReminder:y,firstTimeFlowType:v,completedOnboarding:T}=n,b=(0,c.getCurrentEthBalance)(e),{forgottenPassword:k,threeBoxLastUpdated:N}=a,w=(0,c.getTotalUnapprovedCount)(e),O=(0,d.getSwapsFeatureIsLive)(e),P=(0,c.getUnapprovedTemplatedConfirmations)(e),A=(0,p.getEnvironmentType)(),S=A===f.ENVIRONMENT_TYPE_POPUP,C=A===f.ENVIRONMENT_TYPE_NOTIFICATION;let x,R;x=(0,c.getFirstPermissionRequest)(e),R=(null===(t=x)||void 0===t?void 0:t.metadata.id)||null;const M=(0,c.getOriginOfCurrentTab)(e),I=S&&(0,u.getWeb3ShimUsageAlertEnabledness)(e)&&(0,c.activeTabHasPermissions)(e)&&(0,c.getWeb3ShimUsageStateForOrigin)(e,M)===m.WEB3_SHIM_USAGE_ALERT_STATES.RECORDED,D=(0,c.hasUnsignedQRHardwareTransaction)(e)||(0,c.hasUnsignedQRHardwareMessage)(e);return{forgottenPassword:k,suggestedAssets:r,swapsEnabled:O,unconfirmedTransactionsCount:(0,c.unconfirmedTransactionsCountSelector)(e),shouldShowSeedPhraseReminder:!1===o&&(parseInt(b,16)>0||s.length>0)&&!1===y,isPopup:S,isNotification:C,threeBoxSynced:i,showRestorePrompt:l,selectedAddress:h,threeBoxLastUpdated:N,firstPermissionsRequestId:R,totalUnapprovedCount:w,connectedStatusPopoverHasBeenShown:g,defaultHomeActiveTabName:E,firstTimeFlowType:v,completedOnboarding:T,haveSwapsQuotes:Boolean(Object.values(_.quotes||{}).length),swapsFetchParams:_.fetchParams,showAwaitingSwapScreen:"awaiting"===_.routeState,isMainnet:(0,c.getIsMainnet)(e),originOfCurrentTab:M,shouldShowWeb3ShimUsageNotification:I,pendingConfirmations:P,infuraBlocked:(0,c.getInfuraBlocked)(e),announcementsToShow:(0,c.getSortedAnnouncementsToShow)(e).length>0,showWhatsNewPopup:(0,c.getShowWhatsNewPopup)(e),showRecoveryPhraseReminder:(0,c.getShowRecoveryPhraseReminder)(e),seedPhraseBackedUp:o,newNetworkAdded:(0,c.getNewNetworkAdded)(e),isSigningQRHardwareTransaction:D,newCollectibleAddedMessage:(0,c.getNewCollectibleAddedMessage)(e),newTokensImported:(0,c.getNewTokensImported)(e),newCustomNetworkAdded:a.newCustomNetworkAdded}}),(e=>({closeNotificationPopup:()=>(0,i.closeNotificationPopup)(),turnThreeBoxSyncingOn:()=>e((0,i.turnThreeBoxSyncingOn)()),setupThreeBox:()=>{e((0,i.getThreeBoxLastUpdated)()).then((t=>{t?e((0,l.setThreeBoxLastUpdated)(t)):(e((0,i.setShowRestorePromptToFalse)()),e((0,i.turnThreeBoxSyncingOn)()))}))},restoreFromThreeBox:t=>e((0,i.restoreFromThreeBox)(t)),setShowRestorePromptToFalse:()=>e((0,i.setShowRestorePromptToFalse)()),setConnectedStatusPopoverHasBeenShown:()=>e((0,i.setConnectedStatusPopoverHasBeenShown)()),onTabClick:t=>e((0,i.setDefaultHomeActiveTabName)(t)),setWeb3ShimUsageAlertDismissed:e=>(0,i.setWeb3ShimUsageAlertDismissed)(e),disableWeb3ShimUsageAlert:()=>(0,i.setAlertEnabledness)(m.ALERT_TYPES.web3ShimUsage,!1),hideWhatsNewPopup:()=>e((0,l.hideWhatsNewPopup)()),setRecoveryPhraseReminderHasBeenShown:()=>e((0,i.setRecoveryPhraseReminderHasBeenShown)()),setRecoveryPhraseReminderLastShown:t=>e((0,i.setRecoveryPhraseReminderLastShown)(t)),setNewNetworkAdded:t=>{e((0,i.setNewNetworkAdded)(t))},setNewCollectibleAddedMessage:t=>{e((0,i.setNewCollectibleAddedMessage)(t))},setNewTokensImported:t=>{e((0,i.setNewTokensImported)(t))},clearNewCustomNetworkAdded:()=>{e((0,l.setNewCustomNetworkAdded)({}))},setRpcTarget:(t,n,a,r)=>{e((0,i.setRpcTarget)(t,n,a,r))}}))))(h.default);n.default=g}}},{package:"$root$"}],[8062,{"./home.container":8061},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./home.container"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[8063,{"../../../app/scripts/lib/util":88,"../../../shared/constants/tokens":7328,"../../../shared/constants/transaction":7329,"../../../shared/modules/hexstring-utils":7336,"../../components/ui/actionable-message/actionable-message":7678,"../../components/ui/button":7686,"../../components/ui/page-container":7791,"../../components/ui/tabs":7818,"../../components/ui/text-field":7822,"../../components/ui/typography":7836,"../../helpers/constants/design-system":7868,"../../helpers/constants/routes":7872,"../../helpers/constants/zendesk-url":7875,"../../helpers/utils/token-util":7904,"../../helpers/utils/util":7907,"./token-list":8066,"./token-search":8071,"@metamask/etherscan-link":1562,"ethereumjs-util":2891,"prop-types":5840,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=N(e("prop-types")),o=e("@metamask/etherscan-link"),s=N(e("../../helpers/constants/zendesk-url")),c=e("../../helpers/utils/util"),i=e("../../helpers/utils/token-util"),l=e("../../helpers/constants/routes"),u=N(e("../../components/ui/text-field")),d=N(e("../../components/ui/page-container")),p=e("../../components/ui/tabs"),f=e("../../../app/scripts/lib/util"),m=e("../../../shared/modules/hexstring-utils"),h=N(e("../../components/ui/actionable-message/actionable-message")),g=N(e("../../components/ui/typography")),E=e("../../helpers/constants/design-system"),_=N(e("../../components/ui/button")),y=e("../../../shared/constants/transaction"),v=e("../../../shared/constants/tokens"),T=N(e("./token-search")),b=N(e("./token-list")),k=e("ethereumjs-util");function N(e){return e&&e.__esModule?e:{default:e}}function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class P extends a.Component{constructor(...e){super(...e),O(this,"state",{customAddress:"",customSymbol:"",customDecimals:0,searchResults:[],selectedTokens:{},standard:y.TOKEN_STANDARDS.NONE,tokenSelectorError:null,customAddressError:null,customSymbolError:null,customDecimalsError:null,collectibleAddressError:null,forceEditSymbol:!1,symbolAutoFilled:!1,decimalAutoFilled:!1,mainnetTokenWarning:null})}componentDidMount(){this.tokenInfoGetter=(0,i.tokenInfoGetter)();const{pendingTokens:e={}}=this.props,t=Object.keys(e);if(t.length>0){let n={},a={};t.forEach((t=>{const r=e[t],{isCustom:o}=r;o?a={...r}:n={...n,[t]:{...r}}}));const{address:r="",symbol:o="",decimals:s=0}=a;this.setState({selectedTokens:n,customAddress:r,customSymbol:o,customDecimals:s})}}handleToggleToken(e){const{address:t}=e,{selectedTokens:n={}}=this.state,a={...n};t in a?delete a[t]:a[t]=e,this.setState({selectedTokens:a,tokenSelectorError:null})}hasError(){const{tokenSelectorError:e,customAddressError:t,customSymbolError:n,customDecimalsError:a,collectibleAddressError:r}=this.state;return e||t||n||a||r}hasSelected(){const{customAddress:e="",selectedTokens:t={}}=this.state;return e||Object.keys(t).length>0}handleNext(){if(this.hasError())return;if(!this.hasSelected())return void this.setState({tokenSelectorError:this.context.t("mustSelectOne")});const{setPendingTokens:e,history:t,tokenList:n}=this.props,a=Object.keys(n),{customAddress:r,customSymbol:o,customDecimals:s,selectedTokens:c,standard:i}=this.state;e({customToken:{address:r,symbol:o,decimals:s,standard:i},selectedTokens:c,tokenAddressList:a}),t.push(l.CONFIRM_IMPORT_TOKEN_ROUTE)}async attemptToAutoFillTokenParams(e){const{tokenList:t}=this.props,{symbol:n="",decimals:a}=await this.tokenInfoGetter(e,t),r=Boolean(n),o=Boolean(a);this.setState({symbolAutoFilled:r,decimalAutoFilled:o}),this.handleCustomSymbolChange(n||""),this.handleCustomDecimalsChange(a)}async handleCustomAddressChange(e){const t=e.trim();this.setState({customAddress:t,customAddressError:null,collectibleAddressError:null,tokenSelectorError:null,symbolAutoFilled:!1,decimalAutoFilled:!1,mainnetTokenWarning:null});const n=(0,m.isValidHexAddress)(t,{allowNonPrefixed:!1}),a=(0,f.addHexPrefix)(t).toLowerCase(),r=Object.keys(v.STATIC_MAINNET_TOKEN_LIST).some((e=>e.toLowerCase()===t.toLowerCase())),o="0x1"===this.props.chainId;let s;if(n)try{({standard:s}=await this.props.getTokenStandardAndDetails(a,this.props.selectedAddress))}catch(e){}const i=0===t.length||"0x0000000000000000000000000000000000000000"===t;switch(!0){case!n&&!i:this.setState({customAddressError:this.context.t("invalidAddress"),customSymbol:"",customDecimals:0,customSymbolError:null,customDecimalsError:null});break;case r&&!o:this.setState({mainnetTokenWarning:this.context.t("mainnetToken"),customSymbol:"",customDecimals:0,customSymbolError:null,customDecimalsError:null});break;case Boolean(this.props.identities[a]):this.setState({customAddressError:this.context.t("personalAddressDetected")});break;case(0,c.checkExistingAddresses)(t,this.props.tokens):this.setState({customAddressError:this.context.t("tokenAlreadyAdded")});break;default:i||(this.attemptToAutoFillTokenParams(t),s&&this.setState({standard:s}))}}handleCustomSymbolChange(e){const t=e.trim(),n=t.length;let a=null;(n<=0||n>=12)&&(a=this.context.t("symbolBetweenZeroTwelve")),this.setState({customSymbol:t,customSymbolError:a})}handleCustomDecimalsChange(e){let t,n=null;e?(t=Number(e.trim()),n=e<0||e>36?this.context.t("decimalsMustZerotoTen"):null):(t="",n=this.context.t("tokenDecimalFetchFailed")),this.setState({customDecimals:t,customDecimalsError:n})}renderCustomTokenForm(){var e;const{t:t}=this.context,{customAddress:n,customSymbol:r,customDecimals:i,customAddressError:d,customSymbolError:p,customDecimalsError:f,forceEditSymbol:m,symbolAutoFilled:y,decimalAutoFilled:v,mainnetTokenWarning:T,collectibleAddressError:b}=this.state,{chainId:N,rpcPrefs:w,isDynamicTokenListAvailable:O,tokenDetectionInactiveOnNonMainnetSupportedNetwork:P,history:A}=this.props,S=(0,o.getTokenTrackerLink)((0,k.stripHexPrefix)(n).toLowerCase(),N,null,null,{blockExplorerUrl:null!==(e=null==w?void 0:w.blockExplorerUrl)&&void 0!==e?e:null}),C=(0,c.getQRCTokenTrackerLink)(S),x=null!=w&&w.blockExplorerUrl?(0,c.getURLHostName)(C):t("etherscan");return a.default.createElement("div",{className:"import-token__custom-token-form"},P?a.default.createElement(h.default,{type:"warning",message:t("customTokenWarningInTokenDetectionNetworkWithTDOFF",[a.default.createElement(_.default,{type:"link",key:"import-token-security-risk",className:"import-token__link",rel:"noopener noreferrer",target:"_blank",href:s.default.TOKEN_SAFETY_PRACTICES},t("tokenScamSecurityRisk")),a.default.createElement(_.default,{type:"link",key:"import-token-token-detection-announcement",className:"import-token__link",onClick:()=>A.push(`${l.ADVANCED_ROUTE}#token-description`)},t("inYourSettings"))]),withRightButton:!0,useIcon:!0,iconFillColor:"var(--color-warning-default)"}):a.default.createElement(h.default,{type:O?"warning":"default",message:t(O?"customTokenWarningInTokenDetectionNetwork":"customTokenWarningInNonTokenDetectionNetwork",[a.default.createElement(_.default,{type:"link",key:"import-token-fake-token-warning",className:"import-token__link",rel:"noopener noreferrer",target:"_blank",href:s.default.TOKEN_SAFETY_PRACTICES},t("learnScamRisk"))]),withRightButton:!0,useIcon:!0,iconFillColor:O?"var(--color-warning-default)":"var(--color-info-default)"}),a.default.createElement(u.default,{id:"custom-address",label:t("tokenContractAddress"),type:"text",value:n,onChange:e=>this.handleCustomAddressChange(e.target.value),error:d||T||b,fullWidth:!0,autoFocus:!0,margin:"normal"}),a.default.createElement(u.default,{id:"custom-symbol",label:a.default.createElement("div",{className:"import-token__custom-symbol__label-wrapper"},a.default.createElement("span",{className:"import-token__custom-symbol__label"},t("tokenSymbol")),y&&!m&&a.default.createElement("div",{className:"import-token__custom-symbol__edit",onClick:()=>this.setState({forceEditSymbol:!0})},t("edit"))),type:"text",value:r,onChange:e=>this.handleCustomSymbolChange(e.target.value),error:p,fullWidth:!0,margin:"normal",disabled:y&&!m}),a.default.createElement(u.default,{id:"custom-decimals",label:t("decimal"),type:"number",value:i,onChange:e=>this.handleCustomDecimalsChange(e.target.value),error:i?f:null,fullWidth:!0,margin:"normal",disabled:v,min:0,max:36}),""===i&&a.default.createElement(h.default,{message:a.default.createElement(a.default.Fragment,null,a.default.createElement(g.default,{variant:E.TYPOGRAPHY.H7,fontWeight:E.FONT_WEIGHT.BOLD},t("tokenDecimalFetchFailed")),a.default.createElement(g.default,{variant:E.TYPOGRAPHY.H7,fontWeight:E.FONT_WEIGHT.NORMAL},t("verifyThisTokenDecimalOn",[a.default.createElement(_.default,{type:"link",key:"import-token-verify-token-decimal",className:"import-token__link",rel:"noopener noreferrer",target:"_blank",href:C},x)]))),type:"warning",withRightButton:!0,className:"import-token__decimal-warning"}))}renderSearchToken(){const{t:e}=this.context,{tokenList:t,history:n,useTokenDetection:r,networkName:o}=this.props,{tokenSelectorError:s,selectedTokens:c,searchResults:i}=this.state;return a.default.createElement("div",{className:"import-token__search-token"},a.default.createElement(T.default,{onSearch:({results:e=[]})=>this.setState({searchResults:e}),error:s,tokenList:t}),a.default.createElement("div",{className:"import-token__token-list"},a.default.createElement(b.default,{results:i,selectedTokens:c,onToggleToken:e=>this.handleToggleToken(e)})))}renderTabs(){const{t:e}=this.context,{showSearchTab:t}=this.props,n=[];return t&&n.push(a.default.createElement(p.Tab,{name:e("search"),key:"search-tab"},this.renderSearchToken())),n.push(a.default.createElement(p.Tab,{name:e("customToken"),key:"custom-tab"},this.renderCustomTokenForm())),a.default.createElement(p.Tabs,null,n)}render(){const{history:e,clearPendingTokens:t,mostRecentOverviewPage:n}=this.props;return a.default.createElement(d.default,{title:this.context.t("importTokensCamelCase"),tabsComponent:this.renderTabs(),onSubmit:()=>this.handleNext(),hideCancel:!0,disabled:Boolean(this.hasError())||!this.hasSelected(),onClose:()=>{t(),e.push(n)}})}}O(P,"contextTypes",{t:r.default.func}),O(P,"propTypes",{history:r.default.object,setPendingTokens:r.default.func,pendingTokens:r.default.object,clearPendingTokens:r.default.func,tokens:r.default.array,identities:r.default.object,showSearchTab:r.default.bool.isRequired,mostRecentOverviewPage:r.default.string.isRequired,chainId:r.default.string,rpcPrefs:r.default.object,tokenList:r.default.object,useTokenDetection:r.default.bool,getTokenStandardAndDetails:r.default.func,selectedAddress:r.default.string,isDynamicTokenListAvailable:r.default.bool.isRequired,tokenDetectionInactiveOnNonMainnetSupportedNetwork:r.default.bool.isRequired,networkName:r.default.string.isRequired}),O(P,"defaultProps",{tokenList:{}});var A=P;n.default=A}}},{package:"$root$"}],[8064,{"../../ducks/history/history":7856,"../../selectors/selectors":8270,"../../store/actions":8273,"./import-token.component":8063,"react-redux":6775},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=e("react-redux"),o=e("../../store/actions"),s=e("../../ducks/history/history"),c=e("../../selectors/selectors"),i=(a=e("./import-token.component"))&&a.__esModule?a:{default:a};var l=(0,r.connect)((e=>{const{metamask:{identities:t,tokens:n,pendingTokens:a,provider:{chainId:r},useTokenDetection:o,selectedAddress:i}}=e,l=(0,c.getIsTokenDetectionInactiveOnMainnet)(e),u=(0,c.getIsTokenDetectionSupported)(e)||l||Boolean(!1);return{identities:t,mostRecentOverviewPage:(0,s.getMostRecentOverviewPage)(e),tokens:n,pendingTokens:a,showSearchTab:u,chainId:r,rpcPrefs:(0,c.getRpcPrefsForCurrentProvider)(e),tokenList:(0,c.getTokenList)(e),useTokenDetection:o,selectedAddress:i,isDynamicTokenListAvailable:(0,c.getIsDynamicTokenListAvailable)(e),networkName:(0,c.getTokenDetectionSupportNetworkByChainId)(e),tokenDetectionInactiveOnNonMainnetSupportedNetwork:(0,c.getIstokenDetectionInactiveOnNonMainnetSupportedNetwork)(e)}}),(e=>({setPendingTokens:t=>e((0,o.setPendingTokens)(t)),clearPendingTokens:()=>e((0,o.clearPendingTokens)()),getTokenStandardAndDetails:(e,t)=>(0,o.getTokenStandardAndDetails)(e,t,null)})))(i.default);n.default=l}}},{package:"$root$"}],[8065,{"./import-token.container":8064},function(){with(this)return function(){"use strict";return function(e,t,n){var a;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=((a=e("./import-token.container"))&&a.__esModule?a:{default:a}).default;n.default=r}}},{package:"$root$"}],[8066,{"./token-list.container":8070},function(){with(this)return function(){"use strict";return function(e,t,n){var a;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=((a=e("./token-list.container"))&&a.__esModule?a:{default:a}).default;n.default=r}}},{package:"$root$"}],[8067,{"./token-list-placeholder.component":8068},function(){with(this)return function(){"use strict";return function(e,t,n){var a;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=((a=e("./token-list-placeholder.component"))&&a.__esModule?a:{default:a}).default;n.default=r}}},{package:"$root$"}],[8068,{"../../../../components/ui/button":7686,"../../../../components/ui/icon/icon-token-search":7738,"../../../../helpers/constants/zendesk-url":7875,"prop-types":5840,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r,o,s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),c=d(e("prop-types")),i=d(e("../../../../components/ui/button")),l=d(e("../../../../components/ui/icon/icon-token-search")),u=d(e("../../../../helpers/constants/zendesk-url"));function d(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}class f extends s.Component{render(){return s.default.createElement("div",{className:"token-list-placeholder"},s.default.createElement(l.default,{size:64,color:"var(--color-icon-muted)"}),s.default.createElement("div",{className:"token-list-placeholder__text"},this.context.t("addAcquiredTokens")),s.default.createElement(i.default,{type:"link",className:"token-list-placeholder__link",href:u.default.ADD_CUSTOM_TOKENS,target:"_blank",rel:"noopener noreferrer"},this.context.t("learnMoreUpperCase")))}}n.default=f,a=f,r="contextTypes",o={t:c.default.func},r in a?Object.defineProperty(a,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):a[r]=o}}},{package:"$root$"}],[8069,{"../../../helpers/utils/util":7907,"./token-list-placeholder":8067,classnames:2484,"prop-types":5840,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=i(e("prop-types")),o=i(e("classnames")),s=e("../../../helpers/utils/util"),c=i(e("./token-list-placeholder"));function i(e){return e&&e.__esModule?e:{default:e}}function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class d extends a.Component{render(){const{results:e=[],selectedTokens:t={},onToggleToken:n,tokens:r=[]}=this.props;return 0===e.length?a.default.createElement(c.default,null):a.default.createElement("div",{className:"token-list"},a.default.createElement("div",{className:"token-list__title"},this.context.t("searchResults")),a.default.createElement("div",{className:"token-list__tokens-container"},Array(6).fill(undefined).map(((c,i)=>{var l,u,d;const{symbol:p,name:f,address:m}=e[i]||{},h=(0,s.checkExistingAddresses)(m,r),g=()=>!h&&n(e[i]);return Boolean((null===(l=e[i])||void 0===l?void 0:l.iconUrl)||p||f)&&a.default.createElement("div",{className:(0,o.default)("token-list__token",{"token-list__token--selected":t[m],"token-list__token--disabled":h}),onClick:g,onKeyPress:e=>"Enter"===e.key&&g(),key:i,tabIndex:"0"},a.default.createElement("div",{className:"token-list__token-icon",style:{backgroundImage:(null===(u=e[i])||void 0===u?void 0:u.iconUrl)&&`url(${null===(d=e[i])||void 0===d?void 0:d.iconUrl})`}}),a.default.createElement("div",{className:"token-list__token-data"},a.default.createElement("span",{className:"token-list__token-name"},`${f} (${p})`)))}))))}}n.default=d,u(d,"contextTypes",{t:r.default.func}),u(d,"propTypes",{tokens:r.default.array,results:r.default.array,selectedTokens:r.default.object,onToggleToken:r.default.func})}}},{package:"$root$"}],[8070,{"./token-list.component":8069,"react-redux":6775},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=e("react-redux"),o=(a=e("./token-list.component"))&&a.__esModule?a:{default:a};var s=(0,r.connect)((e=>{const{tokens:t}=e.metamask;return{tokens:t}}))(o.default);n.default=s}}},{package:"$root$"}],[8071,{"./token-search.component":8072},function(){with(this)return function(){"use strict";return function(e,t,n){var a;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=((a=e("./token-search.component"))&&a.__esModule?a:{default:a}).default;n.default=r}}},{package:"$root$"}],[8072,{"../../../../shared/modules/string-utils":7343,"../../../components/ui/icon/search-icon":7745,"../../../components/ui/text-field":7822,"@material-ui/core/InputAdornment":1110,"fuse.js":4703,"prop-types":5840,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=u(e("prop-types")),o=u(e("fuse.js")),s=u(e("@material-ui/core/InputAdornment")),c=u(e("../../../components/ui/text-field")),i=e("../../../../shared/modules/string-utils"),l=u(e("../../../components/ui/icon/search-icon"));function u(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class f extends a.Component{constructor(e){super(e),p(this,"state",{searchQuery:""});const{tokenList:t}=this.props;this.tokenList=Object.values(t),this.tokenSearchFuse=new o.default(this.tokenList,{shouldSort:!0,threshold:.45,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1,keys:[{name:"name",weight:.5},{name:"symbol",weight:.5}]})}handleSearch(e){this.setState({searchQuery:e});const t=this.tokenSearchFuse.search(e),n=[...this.tokenList.filter((t=>t.address&&e&&(0,i.isEqualCaseInsensitive)(t.address,e))),...t];this.props.onSearch({searchQuery:e,results:n})}renderAdornment(){return a.default.createElement(s.default,{position:"start",style:{marginRight:"12px"}},a.default.createElement(l.default,{color:"var(--color-icon-muted)"}))}render(){const{error:e}=this.props,{searchQuery:t}=this.state;return a.default.createElement(c.default,{id:"search-tokens",placeholder:this.context.t("searchTokens"),type:"text",value:t,onChange:e=>this.handleSearch(e.target.value),error:e,fullWidth:!0,autoFocus:!0,autoComplete:"off",startAdornment:this.renderAdornment()})}}n.default=f,p(f,"contextTypes",{t:r.default.func}),p(f,"defaultProps",{error:null}),p(f,"propTypes",{onSearch:r.default.func,error:r.default.string,tokenList:r.default.object})}}},{package:"$root$"}],[8073,{"../contexts/i18n":7844,"../contexts/metametrics":7845,"./error":8019,"./routes":8106,"@sentry/browser":1770,"prop-types":5840,react:6817,"react-redux":6775,"react-router-dom":6795},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=m(e("react")),r=p(e("prop-types")),o=e("react-redux"),s=e("react-router-dom"),c=m(e("@sentry/browser")),i=e("../contexts/i18n"),l=e("../contexts/metametrics"),u=p(e("./error")),d=p(e("./routes"));function p(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function m(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}class h extends a.PureComponent{constructor(...e){var t,n,a;super(...e),a={},(n="state")in(t=this)?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a}static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e){c.captureException(e)}render(){const{error:e,errorId:t}=this.state,{store:n}=this.props;return e?a.default.createElement(o.Provider,{store:n},a.default.createElement(i.I18nProvider,null,a.default.createElement(i.LegacyI18nProvider,null,a.default.createElement(u.default,{error:e,errorId:t})))):a.default.createElement(o.Provider,{store:n},a.default.createElement(s.HashRouter,{hashType:"noslash"},a.default.createElement(l.MetaMetricsProvider,null,a.default.createElement(l.LegacyMetaMetricsProvider,null,a.default.createElement(i.I18nProvider,null,a.default.createElement(i.LegacyI18nProvider,null,a.default.createElement(d.default,null)))))))}}h.propTypes={store:r.default.object};var g=h;n.default=g}}},{package:"$root$"}],[8074,{"../../../shared/constants/metametrics":7321,"../../components/app/create-new-vault":7436,"../../components/ui/box":7682,"../../components/ui/button":7686,"../../components/ui/typography":7836,"../../helpers/constants/design-system":7868,"../../helpers/constants/routes":7872,"../../helpers/constants/zendesk-url":7875,"../../store/actions":8273,"prop-types":5840,react:6817,"react-redux":6775},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=h(e("prop-types")),o=e("react-redux"),s=e("../../store/actions"),c=e("../../helpers/constants/routes"),i=h(e("../../components/app/create-new-vault")),l=h(e("../../components/ui/button")),u=h(e("../../components/ui/box")),d=h(e("../../components/ui/typography")),p=h(e("../../helpers/constants/zendesk-url")),f=e("../../helpers/constants/design-system"),m=e("../../../shared/constants/metametrics");function h(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class _ extends a.Component{constructor(...e){super(...e),E(this,"handleImport",(async(e,t)=>{const{createNewVaultAndRestore:n,leaveImportSeedScreenState:a,history:r,initializeThreeBox:o}=this.props;a(),await n(e,t),this.context.trackEvent({category:m.EVENT.CATEGORIES.RETENTION,event:"onboardingRestoredVault",properties:{action:"userEntersSeedPhrase",legacy_event:!0}}),o(),r.push(c.DEFAULT_ROUTE)}))}render(){const{t:e}=this.context,{isLoading:t}=this.props;return a.default.createElement(u.default,{className:"first-view-main-wrapper"},a.default.createElement(u.default,{className:"first-view-main"},a.default.createElement(u.default,{className:"import-account"},a.default.createElement("a",{className:"import-account__back-button",onClick:e=>{e.preventDefault(),this.props.leaveImportSeedScreenState(),this.props.history.goBack()},href:"#"},`< ${e("back")}`),a.default.createElement(d.default,{variant:f.TYPOGRAPHY.H1,color:f.COLORS.TEXT_DEFAULT},e("resetWallet")),a.default.createElement(d.default,{color:f.COLORS.TEXT_DEFAULT},e("resetWalletSubHeader")),a.default.createElement(d.default,{color:f.COLORS.TEXT_DEFAULT,marginTop:4,marginBottom:4},e("resetWalletUsingSRP",[a.default.createElement(l.default,{type:"link",target:"_blank",rel:"noopener noreferrer",href:p.default.ADD_MISSING_ACCOUNTS,key:"import-account-secretphase",className:"import-account__link"},e("reAddAccounts")),a.default.createElement(l.default,{type:"link",target:"_blank",rel:"noopener noreferrer",href:p.default.IMPORT_ACCOUNTS,key:"import-account-reimport-accounts",className:"import-account__link"},e("reAdded")),a.default.createElement(l.default,{type:"link",target:"_blank",rel:"noopener noreferrer",href:p.default.ADD_CUSTOM_TOKENS,key:"import-account-readd-tokens",className:"import-account__link"},e("reAdded"))])),a.default.createElement(d.default,{color:f.COLORS.TEXT_DEFAULT,margin:0,marginBottom:4},e("resetWalletWarning")),a.default.createElement(i.default,{disabled:t,onSubmit:this.handleImport,submitText:e("restore")}))))}}E(_,"contextTypes",{t:r.default.func,trackEvent:r.default.func}),E(_,"propTypes",{createNewVaultAndRestore:r.default.func.isRequired,leaveImportSeedScreenState:r.default.func,history:r.default.object,isLoading:r.default.bool,initializeThreeBox:r.default.func});var y=(0,o.connect)((({appState:{isLoading:e}})=>({isLoading:e})),(e=>({leaveImportSeedScreenState:()=>{e((0,s.unMarkPasswordForgotten)())},createNewVaultAndRestore:(t,n)=>e((0,s.createNewVaultAndRestore)(t,n)),initializeThreeBox:()=>e((0,s.initializeThreeBox)())})))(_);n.default=y}}},{package:"$root$"}],[8075,{"../../../shared/constants/metametrics":7321,"../../components/ui/button":7686,"../../components/ui/export-text-container":7714,"../../ducks/history/history":7856,"../../store/actions":8273,classnames:2484,"prop-types":5840,react:6817,"react-redux":6775},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=e("react-redux"),o=p(e("prop-types")),s=p(e("classnames")),c=e("../../store/actions"),i=p(e("../../components/ui/export-text-container")),l=e("../../ducks/history/history"),u=e("../../../shared/constants/metametrics"),d=p(e("../../components/ui/button"));function p(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}const m="PASSWORD_PROMPT_SCREEN";class h extends a.Component{constructor(...e){var t,n,a;super(...e),a={screen:m,password:"",seedWords:null,error:null},(n="state")in(t=this)?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a}componentDidMount(){const e=document.getElementById("password-box");e&&e.focus()}handleSubmit(e){e.preventDefault(),this.setState({seedWords:null,error:null}),this.props.requestRevealSeedWords(this.state.password).then((e=>{this.context.trackEvent({category:u.EVENT.CATEGORIES.KEYS,event:u.EVENT_NAMES.KEY_EXPORT_REVEALED,properties:{key_type:u.EVENT.KEY_TYPES.SRP}}),this.setState({seedWords:e,screen:"REVEAL_SEED_SCREEN"})})).catch((e=>{this.context.trackEvent({category:u.EVENT.CATEGORIES.KEYS,event:u.EVENT_NAMES.KEY_EXPORT_FAILED,properties:{key_type:u.EVENT.KEY_TYPES.SRP,reason:e.message}}),this.setState({error:e.message})}))}renderWarning(){return a.default.createElement("div",{className:"page-container__warning-container"},a.default.createElement("i",{className:"fa fa-exclamation-triangle fa-2x page-container__warning-icon"}),a.default.createElement("div",{className:"page-container__warning-message"},a.default.createElement("div",{className:"page-container__warning-title"},this.context.t("revealSeedWordsWarningTitle")),a.default.createElement("div",null,this.context.t("revealSeedWordsWarning"))))}renderContent(){return this.state.screen===m?this.renderPasswordPromptContent():this.renderRevealSeedContent()}renderPasswordPromptContent(){const{t:e}=this.context;return a.default.createElement("form",{onSubmit:e=>this.handleSubmit(e)},a.default.createElement("label",{className:"input-label",htmlFor:"password-box"},e("enterPasswordContinue")),a.default.createElement("div",{className:"input-group"},a.default.createElement("input",{type:"password",placeholder:e("password"),id:"password-box",value:this.state.password,onChange:e=>this.setState({password:e.target.value}),className:(0,s.default)("form-control",{"form-control--error":this.state.error})})),this.state.error&&a.default.createElement("div",{className:"reveal-seed__error"},this.state.error))}renderRevealSeedContent(){const{t:e,trackEvent:t}=this.context;return a.default.createElement("div",null,a.default.createElement("label",{className:"reveal-seed__label"},e("yourPrivateSeedPhrase")),a.default.createElement(i.default,{text:this.state.seedWords,onClickCopy:()=>{t({category:u.EVENT.CATEGORIES.KEYS,event:u.EVENT_NAMES.KEY_EXPORT_COPIED,properties:{key_type:u.EVENT.KEY_TYPES.SRP,copy_method:"clipboard"}})},onClickDownload:()=>{t({category:u.EVENT.CATEGORIES.KEYS,event:u.EVENT_NAMES.KEY_EXPORT_COPIED,properties:{key_type:u.EVENT.KEY_TYPES.SRP,copy_method:"file_download"}})}}))}renderFooter(){return this.state.screen===m?this.renderPasswordPromptFooter():this.renderRevealSeedFooter()}renderPasswordPromptFooter(){return a.default.createElement("div",{className:"page-container__footer"},a.default.createElement("footer",null,a.default.createElement(d.default,{type:"secondary",large:!0,className:"page-container__footer-button",onClick:()=>{this.context.trackEvent({category:u.EVENT.CATEGORIES.KEYS,event:u.EVENT_NAMES.KEY_EXPORT_CANCELED,properties:{key_type:u.EVENT.KEY_TYPES.SRP}}),this.props.history.push(this.props.mostRecentOverviewPage)}},this.context.t("cancel")),a.default.createElement(d.default,{type:"primary",large:!0,className:"page-container__footer-button",onClick:e=>{this.context.trackEvent({category:u.EVENT.CATEGORIES.KEYS,event:u.EVENT_NAMES.KEY_EXPORT_REQUESTED,properties:{key_type:u.EVENT.KEY_TYPES.SRP}}),this.handleSubmit(e)},disabled:""===this.state.password},this.context.t("next"))))}renderRevealSeedFooter(){return a.default.createElement("div",{className:"page-container__footer"},a.default.createElement(d.default,{type:"secondary",large:!0,className:"page-container__footer-single-button",onClick:()=>this.props.history.push(this.props.mostRecentOverviewPage)},this.context.t("close")))}render(){return a.default.createElement("div",{className:"page-container"},a.default.createElement("div",{className:"page-container__header"},a.default.createElement("div",{className:"page-container__title"},this.context.t("secretRecoveryPhrase")),a.default.createElement("div",{className:"page-container__subtitle"},this.context.t("revealSeedWordsDescription"))),a.default.createElement("div",{className:"page-container__content"},this.renderWarning(),a.default.createElement("div",{className:"reveal-seed__content"},this.renderContent())),this.renderFooter())}}h.propTypes={requestRevealSeedWords:o.default.func,history:o.default.object,mostRecentOverviewPage:o.default.string.isRequired},h.contextTypes={t:o.default.func,trackEvent:o.default.func};var g=(0,r.connect)((e=>({mostRecentOverviewPage:(0,l.getMostRecentOverviewPage)(e)})),(e=>({requestRevealSeedWords:t=>e((0,c.requestRevealSeedWords)(t))})))(h);n.default=g}}},{package:"$root$"}],[8076,{"./lock.container":8078},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./lock.container"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[8077,{"../../components/ui/loading-screen":7766,"../../helpers/constants/routes":7872,"prop-types":5840,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r,o,s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),c=u(e("prop-types")),i=u(e("../../components/ui/loading-screen")),l=e("../../helpers/constants/routes");function u(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}class p extends s.PureComponent{componentDidMount(){const{lockMetamask:e,isUnlocked:t,history:n}=this.props;t?e().then((()=>n.push(l.DEFAULT_ROUTE))):n.replace(l.DEFAULT_ROUTE)}render(){return s.default.createElement(i.default,null)}}n.default=p,a=p,r="propTypes",o={history:c.default.object,isUnlocked:c.default.bool,lockMetamask:c.default.func},r in a?Object.defineProperty(a,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):a[r]=o}}},{package:"$root$"}],[8078,{"../../store/actions":8273,"./lock.component":8077,"react-redux":6775,"react-router-dom":6795,redux:6852},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=e("redux"),o=e("react-redux"),s=e("react-router-dom"),c=e("../../store/actions"),i=(a=e("./lock.component"))&&a.__esModule?a:{default:a};var l=(0,r.compose)(s.withRouter,(0,o.connect)((e=>{const{metamask:{isUnlocked:t}}=e;return{isUnlocked:t}}),(e=>({lockMetamask:()=>e((0,c.lockMetamask)())}))))(i.default);n.default=l}}},{package:"$root$"}],[8079,{"./mobile-sync.container":8081},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./mobile-sync.container"))&&a.__esModule?a:{default:a}}}},{package:"$root$"}],[8080,{"../../../shared/constants/time":7327,"../../components/ui/button":7686,"../../components/ui/loading-screen":7766,classnames:2484,"prop-types":5840,pubnub:5861,"qrcode-generator":5960,react:6817},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=d(e("prop-types")),o=d(e("classnames")),s=d(e("pubnub")),c=d(e("qrcode-generator")),i=d(e("../../components/ui/button")),l=d(e("../../components/ui/loading-screen")),u=e("../../../shared/constants/time");function d(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const m="PASSWORD_PROMPT_SCREEN",h=30*u.SECOND,g=2*u.MINUTE;class E extends a.Component{constructor(...e){super(...e),f(this,"state",{screen:m,password:"",seedWords:null,importedAccounts:[],error:null,syncing:!1,completed:!1,channelName:undefined,cipherKey:undefined}),f(this,"syncing",!1)}componentDidMount(){const e=document.getElementById("password-box");e&&e.focus()}startIdleTimeout(){this.idleTimeout=setTimeout((()=>{this.clearTimeouts(),this.goBack()}),g)}handleSubmit(e){e.preventDefault(),this.setState({seedWords:null,error:null}),this.props.requestRevealSeedWords(this.state.password).then((e=>{this.startKeysGeneration(),this.startIdleTimeout(),this.exportAccounts().then((t=>{this.setState({seedWords:e,importedAccounts:t,screen:"REVEAL_SEED_SCREEN"})}))})).catch((e=>this.setState({error:e.message})))}async exportAccounts(){const e=[];this.props.keyrings.forEach((t=>{"Simple Key Pair"===t.type&&e.push(t.accounts[0])}));return await this.props.exportAccounts(this.state.password,e)}startKeysGeneration(){this.keysGenerationTimeout&&clearTimeout(this.keysGenerationTimeout),this.disconnectWebsockets(),this.generateCipherKeyAndChannelName(),this.initWebsockets(),this.keysGenerationTimeout=setTimeout((()=>{this.startKeysGeneration()}),h)}goBack(){const{history:e,mostRecentOverviewPage:t}=this.props;e.push(t)}clearTimeouts(){this.keysGenerationTimeout&&clearTimeout(this.keysGenerationTimeout),this.idleTimeout&&clearTimeout(this.idleTimeout)}generateCipherKeyAndChannelName(){this.cipherKey=`${this.props.selectedAddress.substr(-4)}-${s.default.generateUUID()}`,this.channelName=`mm-${s.default.generateUUID()}`,this.setState({cipherKey:this.cipherKey,channelName:this.channelName})}initWithCipherKeyAndChannelName(e,t){this.cipherKey=e,this.channelName=t}initWebsockets(){this.disconnectWebsockets(),this.pubnub=new s.default({subscribeKey:"",publishKey:"",cipherKey:this.cipherKey,ssl:!0}),this.pubnubListener={message:e=>{const{channel:t,message:n}=e;t===this.channelName&&n&&("start-sync"===n.event?this.startSyncing():"connection-info"===n.event?(this.keysGenerationTimeout&&clearTimeout(this.keysGenerationTimeout),this.disconnectWebsockets(),this.initWithCipherKeyAndChannelName(n.cipher,n.channel),this.initWebsockets()):"end-sync"===n.event&&(this.disconnectWebsockets(),this.setState({syncing:!1,completed:!0})))}},this.pubnub.addListener(this.pubnubListener),this.pubnub.subscribe({channels:[this.channelName],withPresence:!1})}disconnectWebsockets(){this.pubnub&&this.pubnubListener&&this.pubnub.removeListener(this.pubnubListener)}calculatePayloadSize(e,t){return encodeURIComponent(e+JSON.stringify(t)).length+100}chunkString(e,t){const n=Math.ceil(e.length/t),a=new Array(n);let r=0;for(let o=0;o<n;o+=1)a[o]=e.substr(r,t),r+=t;return a}notifyError(e){return new Promise(((t,n)=>{this.pubnub.publish({message:{event:"error-sync",data:e},channel:this.channelName,sendByPost:!1,storeInHistory:!1},((e,a)=>{e.error?n(e.errorData):t()}))}))}async startSyncing(){if(this.syncing)return;this.syncing=!0,this.setState({syncing:!0});const{accounts:e,network:t,preferences:n,transactions:a,tokens:r}=await this.props.fetchInfoToSync(),{t:o}=this.context,s=JSON.stringify({accounts:e,network:t,preferences:n,transactions:a,tokens:r,udata:{pwd:this.state.password,seed:this.state.seedWords,importedAccounts:this.state.importedAccounts}}),c=this.chunkString(s,17e3),i=c.length;try{for(let e=0;e<i;e++)await this.sendMessage(c[e],e+1,i)}catch(e){this.props.displayWarning(`${o("syncFailed")} :(`),this.setState({syncing:!1}),this.syncing=!1,this.notifyError(e.toString())}}sendMessage(e,t,n){return new Promise(((a,r)=>{this.pubnub.publish({message:{event:"syncing-data",data:e,totalPkg:n,currentPkg:t},channel:this.channelName,sendByPost:!1,storeInHistory:!1},((e,t)=>{e.error?r(e.errorData):a()}))}))}componentWillUnmount(){this.state.error&&this.props.hideWarning(),this.clearTimeouts(),this.disconnectWebsockets()}renderWarning(e){return a.default.createElement("div",{className:"page-container__warning-container"},a.default.createElement("div",{className:"page-container__warning-message"},a.default.createElement("div",null,e)))}renderContent(){const{syncing:e,completed:t,screen:n}=this.state,{t:r}=this.context;return e?a.default.createElement(l.default,{loadingMessage:r("syncInProgress")}):t?a.default.createElement("div",{className:"reveal-seed__content"},a.default.createElement("label",{className:"reveal-seed__label",style:{width:"100%",textAlign:"center"}},r("syncWithMobileComplete"))):n===m?a.default.createElement("div",null,this.renderWarning(this.context.t("mobileSyncWarning"))):a.default.createElement("div",null,this.renderWarning(this.context.t("syncWithMobileBeCareful")),a.default.createElement("div",{className:"reveal-seed__content"},this.renderRevealSeedContent()))}renderPasswordPromptContent(){const{t:e}=this.context;return a.default.createElement("form",{onSubmit:e=>this.handleSubmit(e)},a.default.createElement("label",{className:"input-label",htmlFor:"password-box"},e("enterPasswordContinue")),a.default.createElement("div",{className:"input-group"},a.default.createElement("input",{type:"password",placeholder:e("password"),id:"password-box",value:this.state.password,onChange:e=>this.setState({password:e.target.value}),className:(0,o.default)("form-control",{"form-control--error":this.state.error})})),this.state.error&&a.default.createElement("div",{className:"reveal-seed__error"},this.state.error))}renderRevealSeedContent(){const e=(0,c.default)(0,"M");e.addData(`metamask-sync:${this.state.channelName}|@|${this.state.cipherKey}`),e.make();const{t:t}=this.context;return a.default.createElement("div",null,a.default.createElement("label",{className:"reveal-seed__label",style:{width:"100%",textAlign:"center"}},t("syncWithMobileScanThisCode")),a.default.createElement("div",{style:{display:"flex",justifyContent:"center"},dangerouslySetInnerHTML:{__html:e.createTableTag(4)}}))}renderFooter(){return this.state.screen===m?this.renderPasswordPromptFooter():this.renderRevealSeedFooter()}renderPasswordPromptFooter(){const{t:e}=this.context,{password:t}=this.state;return a.default.createElement("div",{className:"new-account-import-form__buttons",style:{padding:"30px 15px 30px 15px",marginTop:0}},a.default.createElement(i.default,{type:"secondary",large:!0,className:"new-account-create-form__button",onClick:()=>this.goBack()},e("cancel")),a.default.createElement(i.default,{type:"primary",large:!0,className:"new-account-create-form__button",onClick:e=>this.handleSubmit(e),disabled:""===t},e("next")))}renderRevealSeedFooter(){const{t:e}=this.context;return a.default.createElement("div",{className:"page-container__footer",style:{padding:30}},a.default.createElement(i.default,{type:"secondary",large:!0,className:"page-container__footer-button",onClick:()=>this.goBack()},e("close")))}render(){const{t:e}=this.context,{screen:t}=this.state;return a.default.createElement("div",{className:"page-container"},a.default.createElement("div",{className:"page-container__header"},a.default.createElement("div",{className:"page-container__title"},e("syncWithMobileTitle")),t===m?a.default.createElement("div",{className:"page-container__subtitle"},e("syncWithMobileDesc")):null,t===m?a.default.createElement("div",{className:"page-container__subtitle"},e("syncWithMobileDescNewUsers")):null),a.default.createElement("div",{className:"page-container__content"},this.renderContent()),this.renderFooter())}}n.default=E,f(E,"contextTypes",{t:r.default.func}),f(E,"propTypes",{history:r.default.object.isRequired,selectedAddress:r.default.string.isRequired,displayWarning:r.default.func.isRequired,fetchInfoToSync:r.default.func.isRequired,mostRecentOverviewPage:r.default.string.isRequired,requestRevealSeedWords:r.default.func.isRequired,exportAccounts:r.default.func.isRequired,keyrings:r.default.array,hideWarning:r.default.func.isRequired})}}},{package:"$root$"}],[8081,{"../../ducks/history/history":7856,"../../selectors":8267,"../../store/actions":8273,"./mobile-sync.component":8080,"react-redux":6775},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=e("react-redux"),o=e("../../store/actions"),s=e("../../ducks/history/history"),c=e("../../selectors"),i=(a=e("./mobile-sync.component"))&&a.__esModule?a:{default:a};var l=(0,r.connect)((e=>{const{metamask:{selectedAddress:t}}=e;return{mostRecentOverviewPage:(0,s.getMostRecentOverviewPage)(e),selectedAddress:t,keyrings:(0,c.getMetaMaskKeyrings)(e)}}),(e=>({requestRevealSeedWords:t=>e((0,o.requestRevealSeedWords)(t)),fetchInfoToSync:()=>e((0,o.fetchInfoToSync)()),displayWarning:t=>e((0,o.displayWarning)(t||null)),exportAccounts:(t,n)=>e((0,o.exportAccounts)(t,n)),hideWarning:()=>e((0,o.hideWarning)())})))(i.default);n.default=l}}},{package:"$root$"}],[8082,{"../../../../shared/constants/metametrics":7321,"../../../components/app/step-progress-bar":7615,"../../../components/ui/box":7682,"../../../components/ui/button":7686,"../../../components/ui/check-box":7692,"../../../components/ui/form-field":7716,"../../../components/ui/typography":7836,"../../../contexts/metametrics":7845,"../../../helpers/constants/design-system":7868,"../../../helpers/constants/onboarding":7871,"../../../helpers/constants/routes":7872,"../../../helpers/constants/zendesk-url":7875,"../../../hooks/useI18nContext":7927,"../../../selectors":8267,"prop-types":5840,react:6817,"react-redux":6775,"react-router-dom":6795,zxcvbn:7311},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=N;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=k(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=b(e("prop-types")),o=e("react-router-dom"),s=b(e("zxcvbn")),c=e("react-redux"),i=e("../../../hooks/useI18nContext"),l=b(e("../../../components/ui/button")),u=b(e("../../../components/ui/typography")),d=e("../../../helpers/constants/design-system"),p=e("../../../helpers/constants/routes"),f=b(e("../../../components/ui/form-field")),m=b(e("../../../components/ui/box")),h=b(e("../../../components/ui/check-box")),g=e("../../../components/app/step-progress-bar"),E=b(e("../../../helpers/constants/zendesk-url")),_=e("../../../selectors"),y=e("../../../helpers/constants/onboarding"),v=e("../../../contexts/metametrics"),T=e("../../../../shared/constants/metametrics");function b(e){return e&&e.__esModule?e:{default:e}}function k(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(k=function(e){return e?n:t})(e)}function N({createNewAccount:e,importWithRecoveryPhrase:t,secretRecoveryPhrase:n}){const r=(0,i.useI18nContext)(),[b,k]=(0,a.useState)(""),[N,w]=(0,a.useState)(""),[O,P]=(0,a.useState)(""),[A,S]=(0,a.useState)(""),[C,x]=(0,a.useState)(""),[R,M]=(0,a.useState)(""),[I,D]=(0,a.useState)(!1),[j,L]=(0,a.useState)(!1),F=(0,o.useHistory)(),W=(0,c.useSelector)(_.getFirstTimeFlowType),U=(0,a.useContext)(v.MetaMetricsContext),$=(0,a.useMemo)((()=>!(!N||!b||N!==b)&&(!(N.length<8)&&(!O&&!R))),[N,b,O,R]),B=async a=>{if(a.preventDefault(),$)if(n&&W===y.FIRST_TIME_FLOW_TYPES.IMPORT)await t(N,n),F.push(p.ONBOARDING_COMPLETION_ROUTE);else try{e&&await e(N),U({event:T.EVENT_NAMES.ACCOUNT_PASSWORD_CREATED,category:T.EVENT.CATEGORIES.ONBOARDING}),F.push(p.ONBOARDING_SECURE_YOUR_WALLET_ROUTE)}catch(e){P(e.message)}};return a.default.createElement("div",{className:"create-password__wrapper","data-testid":"create-password"},n&&W===y.FIRST_TIME_FLOW_TYPES.IMPORT?a.default.createElement(g.TwoStepProgressBar,{stage:g.twoStepStages.PASSWORD_CREATE,marginBottom:4}):a.default.createElement(g.ThreeStepProgressBar,{stage:g.threeStepStages.PASSWORD_CREATE,marginBottom:4}),a.default.createElement(u.default,{variant:d.TYPOGRAPHY.H2,fontWeight:d.FONT_WEIGHT.BOLD},r("createPassword")),a.default.createElement(u.default,{variant:d.TYPOGRAPHY.H4,align:d.TEXT_ALIGN.CENTER},r("passwordSetupDetails")),a.default.createElement(m.default,{justifyContent:d.JUSTIFY_CONTENT.CENTER,marginTop:3},a.default.createElement("form",{className:"create-password__form",onSubmit:B},a.default.createElement(f.default,{dataTestId:"create-password-new",autoFocus:!0,passwordStrength:A,passwordStrengthText:C,onChange:e=>{let t="";const n=(0,s.default)(e),o=(c=n.score,i=r,c>=4?{className:"create-password__strong",text:i("strong"),description:""}:3===c?{className:"create-password__average",text:i("average"),description:r("passwordStrengthDescription")}:{className:"create-password__weak",text:i("weak"),description:r("passwordStrengthDescription")});var c,i;const l=o.description,u=r("passwordStrength",[a.default.createElement("span",{key:n.score,className:o.className},o.text)]);b&&e!==b&&(t=r("passwordsDontMatch")),w(e),S(u),x(l),M(t)},password:!j,titleText:r("newPassword"),value:N,titleDetail:a.default.createElement("button",{className:"create-password__form--password-button",type:"button",onClick:e=>{e.preventDefault(),L(!j)}},r(j?"hide":"show"))}),a.default.createElement(f.default,{dataTestId:"create-password-confirm",onChange:e=>{let t="";N!==e&&(t=r("passwordsDontMatch")),k(e),M(t)},password:!j,error:R,titleText:r("confirmPassword"),value:b,titleDetail:$&&a.default.createElement("div",{className:"create-password__form--checkmark"},a.default.createElement("i",{className:"fas fa-check"}))}),a.default.createElement(m.default,{alignItems:d.ALIGN_ITEMS.CENTER,justifyContent:d.JUSTIFY_CONTENT.SPACE_BETWEEN,marginBottom:4},a.default.createElement("label",{className:"create-password__form__terms-label"},a.default.createElement(h.default,{dataTestId:"create-password-terms",onClick:()=>D(!I),checked:I}),a.default.createElement(u.default,{variant:d.TYPOGRAPHY.H5,boxProps:{marginLeft:3}},r("passwordTermsWarning",[a.default.createElement("a",{onClick:e=>e.stopPropagation(),key:"create-password__link-text",href:E.default.PASSWORD_ARTICLE,target:"_blank",rel:"noopener noreferrer"},a.default.createElement("span",{className:"create-password__link-text"},r("learnMoreUpperCase")))])))),a.default.createElement(l.default,{"data-testid":n&&W===y.FIRST_TIME_FLOW_TYPES.IMPORT?"create-password-import":"create-password-wallet",type:"primary",large:!0,className:"create-password__form--submit-button",disabled:!$||!I,onClick:B},n&&W===y.FIRST_TIME_FLOW_TYPES.IMPORT?r("importMyWallet"):r("createNewWallet")))))}N.propTypes={createNewAccount:r.default.func,importWithRecoveryPhrase:r.default.func,secretRecoveryPhrase:r.default.string}}}},{package:"$root$"}],[8083,{"../../../components/ui/box":7682,"../../../components/ui/button":7686,"../../../components/ui/typography":7836,"../../../helpers/constants/design-system":7868,"../../../helpers/constants/routes":7872,"../../../hooks/useI18nContext":7927,"../../../store/actions":8273,react:6817,"react-redux":6775,"react-router-dom":6795},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const e=(0,r.useHistory)(),t=(0,u.useI18nContext)(),n=(0,o.useDispatch)();return a.default.createElement("div",{className:"creation-successful","data-testid":"creation-successful"},a.default.createElement(s.default,{textAlign:l.TEXT_ALIGN.CENTER},a.default.createElement("img",{src:"./images/tada.png"}),a.default.createElement(c.default,{variant:l.TYPOGRAPHY.H2,fontWeight:l.FONT_WEIGHT.BOLD,margin:6},t("walletCreationSuccessTitle")),a.default.createElement(c.default,{variant:l.TYPOGRAPHY.H4},t("walletCreationSuccessDetail"))),a.default.createElement(c.default,{variant:l.TYPOGRAPHY.H4,boxProps:{align:l.ALIGN_ITEMS.LEFT},marginLeft:12},t("remember")),a.default.createElement("ul",null,a.default.createElement("li",null,a.default.createElement(c.default,{variant:l.TYPOGRAPHY.H4},t("walletCreationSuccessReminder1"))),a.default.createElement("li",null,a.default.createElement(c.default,{variant:l.TYPOGRAPHY.H4},t("walletCreationSuccessReminder2"))),a.default.createElement("li",null,a.default.createElement(c.default,{variant:l.TYPOGRAPHY.H4},t("walletCreationSuccessReminder3",[a.default.createElement("span",{key:"creation-successful__bold",className:"creation-successful__bold"},t("walletCreationSuccessReminder3BoldSection"))]))),a.default.createElement("li",null,a.default.createElement(i.default,{href:"http://qtum.org/about/qnekt",target:"_blank",type:"link",rel:"noopener noreferrer"},t("learnMoreUpperCase")))),a.default.createElement(s.default,{marginTop:6,className:"creation-successful__actions"},a.default.createElement(i.default,{type:"link",onClick:()=>e.push(d.ONBOARDING_PRIVACY_SETTINGS_ROUTE)},t("setAdvancedPrivacySettings")),a.default.createElement(i.default,{"data-testid":"onboarding-complete-done",type:"primary",large:!0,rounded:!0,onClick:async()=>{await n((0,p.setCompletedOnboarding)()),e.push(d.ONBOARDING_PIN_EXTENSION_ROUTE)}},t("gotIt"))))};var a=f(e("react")),r=e("react-router-dom"),o=e("react-redux"),s=f(e("../../../components/ui/box")),c=f(e("../../../components/ui/typography")),i=f(e("../../../components/ui/button")),l=e("../../../helpers/constants/design-system"),u=e("../../../hooks/useI18nContext"),d=e("../../../helpers/constants/routes"),p=e("../../../store/actions");function f(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$"}],[8084,{"../../../components/app/srp-input":7612,"../../../components/app/step-progress-bar":7615,"../../../components/ui/box":7682,"../../../components/ui/button":7686,"../../../components/ui/typography":7836,"../../../helpers/constants/design-system":7868,"../../../helpers/constants/routes":7872,"../../../helpers/constants/zendesk-url":7875,"../../../hooks/useI18nContext":7927,"prop-types":5840,react:6817,"react-router-dom":6795},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=E;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=e("react-router-dom"),o=h(e("prop-types")),s=e("../../../components/app/step-progress-bar"),c=h(e("../../../components/ui/box")),i=h(e("../../../components/ui/button")),l=h(e("../../../components/ui/typography")),u=e("../../../helpers/constants/design-system"),d=e("../../../helpers/constants/routes"),p=e("../../../hooks/useI18nContext"),f=h(e("../../../helpers/constants/zendesk-url")),m=h(e("../../../components/app/srp-input"));function h(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function E({submitSecretRecoveryPhrase:e}){const[t,n]=(0,a.useState)(""),o=(0,r.useHistory)(),h=(0,p.useI18nContext)();return a.default.createElement("div",{className:"import-srp","data-testid":"import-srp"},a.default.createElement(s.TwoStepProgressBar,{stage:s.twoStepStages.RECOVERY_PHRASE_CONFIRM,marginBottom:4}),a.default.createElement("div",{className:"import-srp__header"},a.default.createElement(l.default,{variant:u.TYPOGRAPHY.H2,fontWeight:u.FONT_WEIGHT.BOLD},h("accessYourWalletWithSRP"))),a.default.createElement("div",{className:"import-srp__description"},a.default.createElement(l.default,{variant:u.TYPOGRAPHY.H4},h("accessYourWalletWithSRPDescription",[a.default.createElement("a",{key:"learnMore",type:"link",href:f.default.SECRET_RECOVERY_PHRASE,target:"_blank",rel:"noopener noreferrer"},h("learnMoreUpperCase"))]))),a.default.createElement("div",{className:"import-srp__actions"},a.default.createElement(c.default,{textAlign:u.TEXT_ALIGN.LEFT},a.default.createElement(m.default,{onChange:n,srpText:h("typeYourSRP")}),a.default.createElement(i.default,{className:"import-srp__confirm-button",type:"primary","data-testid":"import-srp-confirm",large:!0,onClick:()=>{e(t),o.replace(d.ONBOARDING_CREATE_PASSWORD_ROUTE)},disabled:!t.trim()},h("confirmRecoveryPhrase")))))}E.propTypes={submitSecretRecoveryPhrase:o.default.func}}}},{package:"$root$"}],[8085,{"../../../../shared/constants/metametrics":7321,"../../../components/ui/button":7686,"../../../components/ui/typography/typography":7837,"../../../contexts/metametrics":7845,"../../../helpers/constants/design-system":7868,"../../../hooks/useI18nContext":7927,"../../../selectors":8267,"../../../store/actions":8273,react:6817,"react-redux":6775,"react-router-dom":6795},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const e=(0,l.useI18nContext)(),t=(0,r.useDispatch)(),n=(0,o.useHistory)(),m=(0,r.useSelector)(d.getFirstTimeFlowTypeRoute),h=(0,r.useSelector)(d.getFirstTimeFlowType),g=(0,r.useSelector)(d.getParticipateInMetaMetrics),E=(0,a.useContext)(f.MetaMetricsContext);return a.default.createElement("div",{className:"onboarding-metametrics","data-testid":"onboarding-metametrics"},a.default.createElement(s.default,{variant:c.TYPOGRAPHY.H2,align:c.TEXT_ALIGN.CENTER,fontWeight:c.FONT_WEIGHT.BOLD},e("metametricsTitle")),a.default.createElement(s.default,{className:"onboarding-metametrics__desc",align:c.TEXT_ALIGN.CENTER},e("metametricsOptInDescription2")),a.default.createElement("ul",null,a.default.createElement("li",null,a.default.createElement("i",{className:"fa fa-check"}),e("metametricsCommitmentsAllowOptOut2")),a.default.createElement("li",null,a.default.createElement("i",{className:"fa fa-check"}),e("metametricsCommitmentsSendAnonymizedEvents")),a.default.createElement("li",null,a.default.createElement("i",{className:"fa fa-times"}),e("metametricsCommitmentsNeverCollect")),a.default.createElement("li",null,a.default.createElement("i",{className:"fa fa-times"}),e("metametricsCommitmentsNeverIP")),a.default.createElement("li",null,a.default.createElement("i",{className:"fa fa-times"}),e("metametricsCommitmentsNeverSell"))),a.default.createElement(s.default,{color:c.COLORS.TEXT_ALTERNATIVE,align:c.TEXT_ALIGN.CENTER,variant:c.TYPOGRAPHY.H6,className:"onboarding-metametrics__terms"},e("gdprMessage",[a.default.createElement("a",{key:"metametrics-bottom-text-wrapper",href:"https://www.qtum.org/about/privacy",target:"_blank",rel:"noopener noreferrer"},e("gdprMessagePrivacyPolicy"))])),a.default.createElement("div",{className:"onboarding-metametrics__buttons"},a.default.createElement(i.default,{"data-testid":"metametrics-no-thanks",type:"secondary",onClick:async()=>{await t((0,u.setParticipateInMetaMetrics)(!1));const e=null===g||g;try{e&&E({category:p.EVENT.CATEGORIES.ONBOARDING,event:p.EVENT_NAMES.METRICS_OPT_OUT,properties:{action:"Metrics Option",legacy_event:!0}},{isOptIn:!0,flushImmediately:!0})}finally{n.push(m)}}},e("noThanks")),a.default.createElement(i.default,{"data-testid":"metametrics-i-agree",type:"primary",onClick:async()=>{const[,e]=await t((0,u.setParticipateInMetaMetrics)(!0)),a=!g;try{a&&E({category:p.EVENT.CATEGORIES.ONBOARDING,event:p.EVENT_NAMES.METRICS_OPT_IN,properties:{action:"Metrics Option",legacy_event:!0}},{isOptIn:!0,flushImmediately:!0}),E({category:p.EVENT.CATEGORIES.ONBOARDING,event:p.EVENT_NAMES.WALLET_SETUP_STARTED,properties:{account_type:"create"===h?p.EVENT.ACCOUNT_TYPES.DEFAULT:p.EVENT.ACCOUNT_TYPES.IMPORTED}},{isOptIn:!0,metaMetricsId:e,flushImmediately:!0})}finally{n.push(m)}}},e("affirmAgree"))))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=e("react-redux"),o=e("react-router-dom"),s=m(e("../../../components/ui/typography/typography")),c=e("../../../helpers/constants/design-system"),i=m(e("../../../components/ui/button")),l=e("../../../hooks/useI18nContext"),u=e("../../../store/actions"),d=e("../../../selectors"),p=e("../../../../shared/constants/metametrics"),f=e("../../../contexts/metametrics");function m(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}}}},{package:"$root$"}],[8086,{"../../../../app/_locales/index.json":1,"../../../components/ui/dropdown":7708,"../../../components/ui/metafox-logo":7785,"../../../ducks/metamask/metamask":7859,"../../../store/actions":8273,react:6817,"react-redux":6775},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const e=(0,r.useDispatch)(),t=(0,r.useSelector)(c.getCurrentLocale),n=l.default.map((e=>({name:e.name,value:e.code})));return a.default.createElement("div",{className:"onboarding-app-header"},a.default.createElement("div",{className:"onboarding-app-header__contents"},a.default.createElement(o.default,{unsetIconHeight:!0,isOnboarding:!0}),a.default.createElement(s.default,{id:"select-locale",options:n,selectedOption:t,onChange:async t=>e((0,i.updateCurrentLocale)(t))})))};var a=u(e("react")),r=e("react-redux"),o=u(e("../../../components/ui/metafox-logo")),s=u(e("../../../components/ui/dropdown")),c=e("../../../ducks/metamask/metamask"),i=e("../../../store/actions"),l=u(e("../../../../app/_locales/index.json"));function u(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$"}],[8087,{"../../../ducks/metamask/metamask":7859,"../../../helpers/constants/routes":7872,react:6817,"react-redux":6775,"react-router-dom":6795},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const e=(0,o.useSelector)(i.getCompletedOnboarding),t=(0,o.useSelector)(i.getIsInitialized),n=(0,o.useSelector)(i.getSeedPhraseBackedUp),a=(0,o.useSelector)(i.getIsUnlocked);if(e)return r.default.createElement(s.Redirect,{to:{pathname:c.DEFAULT_ROUTE}});if(null!==n)return r.default.createElement(s.Redirect,{to:{pathname:c.ONBOARDING_COMPLETION_ROUTE}});if(a)return r.default.createElement(s.Redirect,{to:{pathname:c.LOCK_ROUTE}});if(!t){let e;return e=r.default.createElement(s.Redirect,{to:{pathname:c.ONBOARDING_WELCOME_ROUTE}}),e}return r.default.createElement(s.Redirect,{to:{pathname:c.ONBOARDING_UNLOCK_ROUTE}})};var a,r=(a=e("react"))&&a.__esModule?a:{default:a},o=e("react-redux"),s=e("react-router-dom"),c=e("../../../helpers/constants/routes"),i=e("../../../ducks/metamask/metamask")}}},{package:"$root$"}],[8088,{"../../components/ui/button":7686,"../../ducks/metamask/metamask":7859,"../../helpers/constants/routes":7872,"../../hooks/useI18nContext":7927,"../../selectors":8267,"../../store/actions":8273,"../unlock-page":8261,"./create-password/create-password":8082,"./creation-successful/creation-successful":8083,"./import-srp/import-srp":8084,"./metametrics/metametrics":8085,"./onboarding-flow-switch/onboarding-flow-switch":8087,"./pin-extension/pin-extension":8090,"./privacy-settings/privacy-settings":8091,"./recovery-phrase/confirm-recovery-phrase":8093,"./recovery-phrase/review-recovery-phrase":8095,"./secure-your-wallet/secure-your-wallet":8096,"./welcome/welcome":8098,react:6817,"react-redux":6775,"react-router-dom":6795},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const[e,t]=(0,a.useState)(""),n=(0,o.useDispatch)(),N=(0,r.useLocation)(),w=(0,r.useHistory)(),P=(0,p.useI18nContext)(),A=(0,o.useSelector)(i.getCompletedOnboarding),S=(0,o.useSelector)(i.getSeedPhraseBackedUp),C=(0,o.useSelector)(u.getFirstTimeFlowTypeRoute);(0,a.useEffect)((()=>{A&&S&&w.push(c.DEFAULT_ROUTE)}),[w,A,S]);const x=async e=>{const a=await n((0,l.createNewVaultAndGetSeedPhrase)(e));t(a)},R=async e=>{const a=await n((0,l.unlockAndGetSeedPhrase)(e));t(a),w.push(C)},M=async(e,t)=>await n((0,l.createNewVaultAndRestore)(e,t));return a.default.createElement("div",{className:"onboarding-flow"},a.default.createElement("div",{className:"onboarding-flow__wrapper"},a.default.createElement(r.Switch,null,a.default.createElement(r.Route,{path:c.ONBOARDING_CREATE_PASSWORD_ROUTE,render:t=>a.default.createElement(m.default,O({},t,{createNewAccount:x,importWithRecoveryPhrase:M,secretRecoveryPhrase:e}))}),a.default.createElement(r.Route,{exact:!0,path:c.ONBOARDING_SECURE_YOUR_WALLET_ROUTE,component:g.default}),a.default.createElement(r.Route,{path:c.ONBOARDING_REVIEW_SRP_ROUTE,render:()=>a.default.createElement(h.default,{secretRecoveryPhrase:e})}),a.default.createElement(r.Route,{path:c.ONBOARDING_CONFIRM_SRP_ROUTE,render:()=>a.default.createElement(E.default,{secretRecoveryPhrase:e})}),a.default.createElement(r.Route,{path:c.ONBOARDING_IMPORT_WITH_SRP_ROUTE,render:e=>a.default.createElement(T.default,O({},e,{submitSecretRecoveryPhrase:t}))}),a.default.createElement(r.Route,{path:c.ONBOARDING_UNLOCK_ROUTE,render:e=>a.default.createElement(s.default,O({},e,{onSubmit:R}))}),a.default.createElement(r.Route,{path:c.ONBOARDING_PRIVACY_SETTINGS_ROUTE,component:_.default}),a.default.createElement(r.Route,{path:c.ONBOARDING_COMPLETION_ROUTE,component:y.default}),a.default.createElement(r.Route,{path:c.ONBOARDING_WELCOME_ROUTE,component:v.default}),a.default.createElement(r.Route,{path:c.ONBOARDING_PIN_EXTENSION_ROUTE,component:b.default}),a.default.createElement(r.Route,{path:c.ONBOARDING_METAMETRICS,component:k.default}),a.default.createElement(r.Route,{exact:!0,path:"*",component:f.default}))),(null==N?void 0:N.pathname)===c.ONBOARDING_COMPLETION_ROUTE&&a.default.createElement(d.default,{className:"onboarding-flow__twitter-button",type:"link",href:"https://twitter.com/MetaMask",target:"_blank"},a.default.createElement("span",null,P("followUsOnTwitter")),a.default.createElement("i",{className:"fab fa-twitter onboarding-flow__twitter-button__icon"})))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(e("react")),r=e("react-router-dom"),o=e("react-redux"),s=N(e("../unlock-page")),c=e("../../helpers/constants/routes"),i=e("../../ducks/metamask/metamask"),l=e("../../store/actions"),u=e("../../selectors"),d=N(e("../../components/ui/button")),p=e("../../hooks/useI18nContext"),f=N(e("./onboarding-flow-switch/onboarding-flow-switch")),m=N(e("./create-password/create-password")),h=N(e("./recovery-phrase/review-recovery-phrase")),g=N(e("./secure-your-wallet/secure-your-wallet")),E=N(e("./recovery-phrase/confirm-recovery-phrase")),_=N(e("./privacy-settings/privacy-settings")),y=N(e("./creation-successful/creation-successful")),v=N(e("./welcome/welcome")),T=N(e("./import-srp/import-srp")),b=N(e("./pin-extension/pin-extension")),k=N(e("./metametrics/metametrics"));function N(e){return e&&e.__esModule?e:{default:e}}function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}function O(){return O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},O.apply(this,arguments)}}}},{package:"$root$"}]],[],{});